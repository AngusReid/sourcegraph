<span class="com">//! moment.js</span><span class="">
</span><span class="com">//! version : 2.10.5</span><span class="">
</span><span class="com">//! authors : Tim Wood, Iskren Chernev, Moment.js contributors</span><span class="">
</span><span class="com">//! license : MIT</span><span class="">
</span><span class="com">//! momentjs.com</span><span class="">

</span><span class="pun">(</span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">global</span><span class="pun">,</span><span class=""> </span><span class="pln">factory</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
    </span><span class="kwd">typeof</span><span class=""> </span><span class="pln">exports</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;object&#39;</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="kwd">typeof</span><span class=""> </span><span class="pln">module</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;undefined&#39;</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">module</span><span class="pun">.</span><span class="pln">exports</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">factory</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">:</span><span class="">
    </span><span class="kwd">typeof</span><span class=""> </span><span class="pln">define</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;function&#39;</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">define</span><span class="pun">.</span><span class="pln">amd</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">define</span><span class="pun">(</span><span class="pln">factory</span><span class="pun">)</span><span class=""> </span><span class="pun">:</span><span class="">
    </span><span class="pln">global</span><span class="pun">.</span><span class="pln">moment</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">factory</span><span class="pun">(</span><span class="pun">)</span><span class="">
</span><span class="pun">}</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class=""> </span><span class="str">&#39;use strict&#39;</span><span class="pun">;</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">hookCallback</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">hookCallback</span><span class="pun">.</span><span class="pln">apply</span><span class="pun">(</span><span class="kwd">null</span><span class="pun">,</span><span class=""> </span><span class="pln">arguments</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="com">// This is done to register the method called with moment()</span><span class="">
    </span><span class="com">// without creating circular dependencies.</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">setHookCallback</span><span class=""> </span><span class="pun">(</span><span class="pln">callback</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">hookCallback</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">callback</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">isArray</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">Object</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">.</span><span class="pln">call</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;[object Array]&#39;</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">isDate</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="kwd">instanceof</span><span class=""> </span><span class="pln">Date</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">Object</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">.</span><span class="pln">call</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;[object Date]&#39;</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">map</span><span class="pun">(</span><span class="pln">arr</span><span class="pun">,</span><span class=""> </span><span class="pln">fn</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">res</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">[</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">i</span><span class="pun">;</span><span class="">
        </span><span class="kwd">for</span><span class=""> </span><span class="pun">(</span><span class="pln">i</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class=""> </span><span class="pln">i</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">arr</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span><span class=""> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">res</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">fn</span><span class="pun">(</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">i</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">res</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">hasOwnProp</span><span class="pun">(</span><span class="pln">a</span><span class="pun">,</span><span class=""> </span><span class="pln">b</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">Object</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">hasOwnProperty</span><span class="pun">.</span><span class="pln">call</span><span class="pun">(</span><span class="pln">a</span><span class="pun">,</span><span class=""> </span><span class="pln">b</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">extend</span><span class="pun">(</span><span class="pln">a</span><span class="pun">,</span><span class=""> </span><span class="pln">b</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">for</span><span class=""> </span><span class="pun">(</span><span class="kwd">var</span><span class=""> </span><span class="pln">i</span><span class=""> </span><span class="kwd">in</span><span class=""> </span><span class="pln">b</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">hasOwnProp</span><span class="pun">(</span><span class="pln">b</span><span class="pun">,</span><span class=""> </span><span class="pln">i</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">a</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">b</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">hasOwnProp</span><span class="pun">(</span><span class="pln">b</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;toString&#39;</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">a</span><span class="pun">.</span><span class="pln">toString</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">b</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">hasOwnProp</span><span class="pun">(</span><span class="pln">b</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;valueOf&#39;</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">a</span><span class="pun">.</span><span class="pln">valueOf</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">b</span><span class="pun">.</span><span class="pln">valueOf</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="pln">a</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">create</span><span class="pln">_utc</span><span class="pln">_</span><span class="pln">_createUTC</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">format</span><span class="pun">,</span><span class=""> </span><span class="pln">locale</span><span class="pun">,</span><span class=""> </span><span class="pln">strict</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">createLocalOrUTC</span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">format</span><span class="pun">,</span><span class=""> </span><span class="pln">locale</span><span class="pun">,</span><span class=""> </span><span class="pln">strict</span><span class="pun">,</span><span class=""> </span><span class="kwd">true</span><span class="pun">)</span><span class="pun">.</span><span class="pln">utc</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">defaultParsingFlags</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="com">// We need to deep clone this object.</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">empty</span><span class="">           </span><span class="pun">:</span><span class=""> </span><span class="kwd">false</span><span class="pun">,</span><span class="">
            </span><span class="pln">unusedTokens</span><span class="">    </span><span class="pun">:</span><span class=""> </span><span class="pun">[</span><span class="pun">]</span><span class="pun">,</span><span class="">
            </span><span class="pln">unusedInput</span><span class="">     </span><span class="pun">:</span><span class=""> </span><span class="pun">[</span><span class="pun">]</span><span class="pun">,</span><span class="">
            </span><span class="pln">overflow</span><span class="">        </span><span class="pun">:</span><span class=""> </span><span class="pun">-</span><span class="pln">2</span><span class="pun">,</span><span class="">
            </span><span class="pln">charsLeftOver</span><span class="">   </span><span class="pun">:</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class="">
            </span><span class="pln">nullInput</span><span class="">       </span><span class="pun">:</span><span class=""> </span><span class="kwd">false</span><span class="pun">,</span><span class="">
            </span><span class="pln">invalidMonth</span><span class="">    </span><span class="pun">:</span><span class=""> </span><span class="kwd">null</span><span class="pun">,</span><span class="">
            </span><span class="pln">invalidFormat</span><span class="">   </span><span class="pun">:</span><span class=""> </span><span class="kwd">false</span><span class="pun">,</span><span class="">
            </span><span class="pln">userInvalidated</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="kwd">false</span><span class="pun">,</span><span class="">
            </span><span class="pln">iso</span><span class="">             </span><span class="pun">:</span><span class=""> </span><span class="kwd">false</span><span class="">
        </span><span class="pun">}</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="pln">m</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">m</span><span class="pun">.</span><span class="pln">_pf</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">m</span><span class="pun">.</span><span class="pln">_pf</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">defaultParsingFlags</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">m</span><span class="pun">.</span><span class="pln">_pf</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">valid</span><span class="pln">_</span><span class="pln">_isValid</span><span class="pun">(</span><span class="pln">m</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">m</span><span class="pun">.</span><span class="pln">_isValid</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">var</span><span class=""> </span><span class="pln">flags</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="pln">m</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pln">m</span><span class="pun">.</span><span class="pln">_isValid</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">!</span><span class="pln">isNaN</span><span class="pun">(</span><span class="pln">m</span><span class="pun">.</span><span class="pln">_d</span><span class="pun">.</span><span class="pln">getTime</span><span class="pun">(</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class="">
                </span><span class="pln">flags</span><span class="pun">.</span><span class="pln">overflow</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">0</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class="">
                </span><span class="pun">!</span><span class="pln">flags</span><span class="pun">.</span><span class="pln">empty</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class="">
                </span><span class="pun">!</span><span class="pln">flags</span><span class="pun">.</span><span class="pln">invalidMonth</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class="">
                </span><span class="pun">!</span><span class="pln">flags</span><span class="pun">.</span><span class="pln">invalidWeekday</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class="">
                </span><span class="pun">!</span><span class="pln">flags</span><span class="pun">.</span><span class="pln">nullInput</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class="">
                </span><span class="pun">!</span><span class="pln">flags</span><span class="pun">.</span><span class="pln">invalidFormat</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class="">
                </span><span class="pun">!</span><span class="pln">flags</span><span class="pun">.</span><span class="pln">userInvalidated</span><span class="pun">;</span><span class="">

            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">m</span><span class="pun">.</span><span class="pln">_strict</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">m</span><span class="pun">.</span><span class="pln">_isValid</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">m</span><span class="pun">.</span><span class="pln">_isValid</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class="">
                    </span><span class="pln">flags</span><span class="pun">.</span><span class="pln">charsLeftOver</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class="">
                    </span><span class="pln">flags</span><span class="pun">.</span><span class="pln">unusedTokens</span><span class="pun">.</span><span class="pln">length</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class="">
                    </span><span class="pln">flags</span><span class="pun">.</span><span class="pln">bigHour</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">undefined</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">m</span><span class="pun">.</span><span class="pln">_isValid</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">valid</span><span class="pln">_</span><span class="pln">_createInvalid</span><span class=""> </span><span class="pun">(</span><span class="pln">flags</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">m</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">create</span><span class="pln">_utc</span><span class="pln">_</span><span class="pln">_createUTC</span><span class="pun">(</span><span class="kwd">NaN</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">flags</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">extend</span><span class="pun">(</span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="pln">m</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">flags</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="pln">m</span><span class="pun">)</span><span class="pun">.</span><span class="pln">userInvalidated</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">true</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="pln">m</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">momentProperties</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">momentProperties</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">[</span><span class="pun">]</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">copyConfig</span><span class="pun">(</span><span class="pln">to</span><span class="pun">,</span><span class=""> </span><span class="pln">from</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">i</span><span class="pun">,</span><span class=""> </span><span class="pln">prop</span><span class="pun">,</span><span class=""> </span><span class="pln">val</span><span class="pun">;</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">from</span><span class="pun">.</span><span class="pln">_isAMomentObject</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;undefined&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">to</span><span class="pun">.</span><span class="pln">_isAMomentObject</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">from</span><span class="pun">.</span><span class="pln">_isAMomentObject</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">from</span><span class="pun">.</span><span class="pln">_i</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;undefined&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">to</span><span class="pun">.</span><span class="pln">_i</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">from</span><span class="pun">.</span><span class="pln">_i</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">from</span><span class="pun">.</span><span class="pln">_f</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;undefined&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">to</span><span class="pun">.</span><span class="pln">_f</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">from</span><span class="pun">.</span><span class="pln">_f</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">from</span><span class="pun">.</span><span class="pln">_l</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;undefined&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">to</span><span class="pun">.</span><span class="pln">_l</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">from</span><span class="pun">.</span><span class="pln">_l</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">from</span><span class="pun">.</span><span class="pln">_strict</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;undefined&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">to</span><span class="pun">.</span><span class="pln">_strict</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">from</span><span class="pun">.</span><span class="pln">_strict</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">from</span><span class="pun">.</span><span class="pln">_tzm</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;undefined&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">to</span><span class="pun">.</span><span class="pln">_tzm</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">from</span><span class="pun">.</span><span class="pln">_tzm</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">from</span><span class="pun">.</span><span class="pln">_isUTC</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;undefined&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">to</span><span class="pun">.</span><span class="pln">_isUTC</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">from</span><span class="pun">.</span><span class="pln">_isUTC</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">from</span><span class="pun">.</span><span class="pln">_offset</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;undefined&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">to</span><span class="pun">.</span><span class="pln">_offset</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">from</span><span class="pun">.</span><span class="pln">_offset</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">from</span><span class="pun">.</span><span class="pln">_pf</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;undefined&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">to</span><span class="pun">.</span><span class="pln">_pf</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="pln">from</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">from</span><span class="pun">.</span><span class="pln">_locale</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;undefined&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">to</span><span class="pun">.</span><span class="pln">_locale</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">from</span><span class="pun">.</span><span class="pln">_locale</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">momentProperties</span><span class="pun">.</span><span class="pln">length</span><span class=""> </span><span class="pun">&gt;</span><span class=""> </span><span class="pln">0</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">for</span><span class=""> </span><span class="pun">(</span><span class="pln">i</span><span class=""> </span><span class="kwd">in</span><span class=""> </span><span class="pln">momentProperties</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">prop</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">momentProperties</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">;</span><span class="">
                </span><span class="pln">val</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">from</span><span class="pun">[</span><span class="pln">prop</span><span class="pun">]</span><span class="pun">;</span><span class="">
                </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">val</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;undefined&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                    </span><span class="pln">to</span><span class="pun">[</span><span class="pln">prop</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">val</span><span class="pun">;</span><span class="">
                </span><span class="pun">}</span><span class="">
            </span><span class="pun">}</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="pln">to</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">updateInProgress</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">false</span><span class="pun">;</span><span class="">

    </span><span class="com">// Moment prototype object</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">Moment</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">copyConfig</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_d</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">new</span><span class=""> </span><span class="pln">Date</span><span class="pun">(</span><span class="pln">config</span><span class="pun">.</span><span class="pln">_d</span><span class="pun">.</span><span class="pln">getTime</span><span class="pun">(</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="com">// Prevent infinite loop in case updateOffset creates new moment</span><span class="">
        </span><span class="com">// objects.</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">updateInProgress</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">false</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">updateInProgress</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">true</span><span class="pun">;</span><span class="">
            </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">updateOffset</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pln">updateInProgress</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">false</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">isMoment</span><span class=""> </span><span class="pun">(</span><span class="pln">obj</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">obj</span><span class=""> </span><span class="kwd">instanceof</span><span class=""> </span><span class="pln">Moment</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pun">(</span><span class="pln">obj</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">obj</span><span class="pun">.</span><span class="pln">_isAMomentObject</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">absFloor</span><span class=""> </span><span class="pun">(</span><span class="pln">number</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">number</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">0</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">Math</span><span class="pun">.</span><span class="pln">ceil</span><span class="pun">(</span><span class="pln">number</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">Math</span><span class="pun">.</span><span class="pln">floor</span><span class="pun">(</span><span class="pln">number</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">toInt</span><span class="pun">(</span><span class="pln">argumentForCoercion</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">coercedNumber</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">+</span><span class="pln">argumentForCoercion</span><span class="pun">,</span><span class="">
            </span><span class="pln">value</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">coercedNumber</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">isFinite</span><span class="pun">(</span><span class="pln">coercedNumber</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">value</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">absFloor</span><span class="pun">(</span><span class="pln">coercedNumber</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="pln">value</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">compareArrays</span><span class="pun">(</span><span class="pln">array1</span><span class="pun">,</span><span class=""> </span><span class="pln">array2</span><span class="pun">,</span><span class=""> </span><span class="pln">dontConvert</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">len</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">Math</span><span class="pun">.</span><span class="pln">min</span><span class="pun">(</span><span class="pln">array1</span><span class="pun">.</span><span class="pln">length</span><span class="pun">,</span><span class=""> </span><span class="pln">array2</span><span class="pun">.</span><span class="pln">length</span><span class="pun">)</span><span class="pun">,</span><span class="">
            </span><span class="pln">lengthDiff</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">Math</span><span class="pun">.</span><span class="pln">abs</span><span class="pun">(</span><span class="pln">array1</span><span class="pun">.</span><span class="pln">length</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">array2</span><span class="pun">.</span><span class="pln">length</span><span class="pun">)</span><span class="pun">,</span><span class="">
            </span><span class="pln">diffs</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class="">
            </span><span class="pln">i</span><span class="pun">;</span><span class="">
        </span><span class="kwd">for</span><span class=""> </span><span class="pun">(</span><span class="pln">i</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class=""> </span><span class="pln">i</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">len</span><span class="pun">;</span><span class=""> </span><span class="pln">i</span><span class="pun">++</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pun">(</span><span class="pln">dontConvert</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">array1</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">array2</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">)</span><span class=""> </span><span class="pun">||</span><span class="">
                </span><span class="pun">(</span><span class="pun">!</span><span class="pln">dontConvert</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">toInt</span><span class="pun">(</span><span class="pln">array1</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">)</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">toInt</span><span class="pun">(</span><span class="pln">array2</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">)</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">diffs</span><span class="pun">++</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">diffs</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">lengthDiff</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">Locale</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">locales</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">{</span><span class="pun">}</span><span class="pun">;</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">globalLocale</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">normalizeLocale</span><span class="pun">(</span><span class="pln">key</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">key</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">key</span><span class="pun">.</span><span class="pln">toLowerCase</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">replace</span><span class="pun">(</span><span class="str">&#39;_&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;-&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">key</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="com">// pick the locale from the array</span><span class="">
    </span><span class="com">// try [&#39;en-au&#39;, &#39;en-gb&#39;] as &#39;en-au&#39;, &#39;en-gb&#39;, &#39;en&#39;, as in move through the list trying each</span><span class="">
    </span><span class="com">// substring from most specific to least, but move to the next array item if it&#39;s a more specific variant than the current root</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">chooseLocale</span><span class="pun">(</span><span class="pln">names</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">i</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">j</span><span class="pun">,</span><span class=""> </span><span class="pln">next</span><span class="pun">,</span><span class=""> </span><span class="pln">locale</span><span class="pun">,</span><span class=""> </span><span class="pln">split</span><span class="pun">;</span><span class="">

        </span><span class="kwd">while</span><span class=""> </span><span class="pun">(</span><span class="pln">i</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">names</span><span class="pun">.</span><span class="pln">length</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">split</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">normalizeLocale</span><span class="pun">(</span><span class="pln">names</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">)</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="str">&#39;-&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pln">j</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">split</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span><span class="">
            </span><span class="pln">next</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">normalizeLocale</span><span class="pun">(</span><span class="pln">names</span><span class="pun">[</span><span class="pln">i</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">1</span><span class="pun">]</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pln">next</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">next</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">next</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="str">&#39;-&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="kwd">null</span><span class="pun">;</span><span class="">
            </span><span class="kwd">while</span><span class=""> </span><span class="pun">(</span><span class="pln">j</span><span class=""> </span><span class="pun">&gt;</span><span class=""> </span><span class="pln">0</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">locale</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">loadLocale</span><span class="pun">(</span><span class="pln">split</span><span class="pun">.</span><span class="pln">slice</span><span class="pun">(</span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">j</span><span class="pun">)</span><span class="pun">.</span><span class="pln">join</span><span class="pun">(</span><span class="str">&#39;-&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">
                </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">locale</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                    </span><span class="kwd">return</span><span class=""> </span><span class="pln">locale</span><span class="pun">;</span><span class="">
                </span><span class="pun">}</span><span class="">
                </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">next</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">next</span><span class="pun">.</span><span class="pln">length</span><span class=""> </span><span class="pun">&gt;</span><span class="pun">=</span><span class=""> </span><span class="pln">j</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">compareArrays</span><span class="pun">(</span><span class="pln">split</span><span class="pun">,</span><span class=""> </span><span class="pln">next</span><span class="pun">,</span><span class=""> </span><span class="kwd">true</span><span class="pun">)</span><span class=""> </span><span class="pun">&gt;</span><span class="pun">=</span><span class=""> </span><span class="pln">j</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">1</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                    </span><span class="com">//the next array item is better than a shallower substring of this one</span><span class="">
                    </span><span class="kwd">break</span><span class="pun">;</span><span class="">
                </span><span class="pun">}</span><span class="">
                </span><span class="pln">j</span><span class="pun">--</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
            </span><span class="pln">i</span><span class="pun">++</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">null</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">loadLocale</span><span class="pun">(</span><span class="pln">name</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">oldLocale</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">;</span><span class="">
        </span><span class="com">// TODO: Find a better way to register and load all the locales in Node</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pun">!</span><span class="pln">locales</span><span class="pun">[</span><span class="pln">name</span><span class="pun">]</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="kwd">typeof</span><span class=""> </span><span class="pln">module</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;undefined&#39;</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class="">
                </span><span class="pln">module</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">module</span><span class="pun">.</span><span class="pln">exports</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">try</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">oldLocale</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">globalLocale</span><span class="pun">.</span><span class="pln">_abbr</span><span class="pun">;</span><span class="">
                </span><span class="pln">require</span><span class="pun">(</span><span class="str">&#39;./locale/&#39;</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">name</span><span class="pun">)</span><span class="pun">;</span><span class="">
                </span><span class="com">// because defineLocale currently also sets the global locale, we</span><span class="">
                </span><span class="com">// want to undo that for lazy loaded locales</span><span class="">
                </span><span class="pln">locale</span><span class="pln">_locales</span><span class="pln">_</span><span class="pln">_getSetGlobalLocale</span><span class="pun">(</span><span class="pln">oldLocale</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class=""> </span><span class="kwd">catch</span><span class=""> </span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class=""> </span><span class="pun">}</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">locales</span><span class="pun">[</span><span class="pln">name</span><span class="pun">]</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="com">// This function will load locale and then set the global locale.  If</span><span class="">
    </span><span class="com">// no arguments are passed in, it will simply return the current global</span><span class="">
    </span><span class="com">// locale key.</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">locale</span><span class="pln">_locales</span><span class="pln">_</span><span class="pln">_getSetGlobalLocale</span><span class=""> </span><span class="pun">(</span><span class="pln">key</span><span class="pun">,</span><span class=""> </span><span class="pln">values</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">data</span><span class="pun">;</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">key</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">values</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;undefined&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">data</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">locale</span><span class="pln">_locales</span><span class="pln">_</span><span class="pln">_getLocale</span><span class="pun">(</span><span class="pln">key</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
            </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">data</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">defineLocale</span><span class="pun">(</span><span class="pln">key</span><span class="pun">,</span><span class=""> </span><span class="pln">values</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">

            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">data</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="com">// moment.duration._locale = moment._locale = data;</span><span class="">
                </span><span class="pln">globalLocale</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">data</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="pln">globalLocale</span><span class="pun">.</span><span class="pln">_abbr</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">defineLocale</span><span class=""> </span><span class="pun">(</span><span class="pln">name</span><span class="pun">,</span><span class=""> </span><span class="pln">values</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">values</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">values</span><span class="pun">.</span><span class="pln">abbr</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">name</span><span class="pun">;</span><span class="">
            </span><span class="pln">locales</span><span class="pun">[</span><span class="pln">name</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">locales</span><span class="pun">[</span><span class="pln">name</span><span class="pun">]</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="kwd">new</span><span class=""> </span><span class="pln">Locale</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pln">locales</span><span class="pun">[</span><span class="pln">name</span><span class="pun">]</span><span class="pun">.</span><span class="pln">set</span><span class="pun">(</span><span class="pln">values</span><span class="pun">)</span><span class="pun">;</span><span class="">

            </span><span class="com">// backwards compat for now: also set the locale</span><span class="">
            </span><span class="pln">locale</span><span class="pln">_locales</span><span class="pln">_</span><span class="pln">_getSetGlobalLocale</span><span class="pun">(</span><span class="pln">name</span><span class="pun">)</span><span class="pun">;</span><span class="">

            </span><span class="kwd">return</span><span class=""> </span><span class="pln">locales</span><span class="pun">[</span><span class="pln">name</span><span class="pun">]</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="com">// useful for testing</span><span class="">
            </span><span class="kwd">delete</span><span class=""> </span><span class="pln">locales</span><span class="pun">[</span><span class="pln">name</span><span class="pun">]</span><span class="pun">;</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="kwd">null</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="com">// returns locale data</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">locale</span><span class="pln">_locales</span><span class="pln">_</span><span class="pln">_getLocale</span><span class=""> </span><span class="pun">(</span><span class="pln">key</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">locale</span><span class="pun">;</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">key</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">key</span><span class="pun">.</span><span class="pln">_locale</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">key</span><span class="pun">.</span><span class="pln">_locale</span><span class="pun">.</span><span class="pln">_abbr</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">key</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">key</span><span class="pun">.</span><span class="pln">_locale</span><span class="pun">.</span><span class="pln">_abbr</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pun">!</span><span class="pln">key</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">globalLocale</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pun">!</span><span class="pln">isArray</span><span class="pun">(</span><span class="pln">key</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="com">//short-circuit everything else</span><span class="">
            </span><span class="pln">locale</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">loadLocale</span><span class="pun">(</span><span class="pln">key</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">locale</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">return</span><span class=""> </span><span class="pln">locale</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
            </span><span class="pln">key</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">[</span><span class="pln">key</span><span class="pun">]</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="pln">chooseLocale</span><span class="pun">(</span><span class="pln">key</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">aliases</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">{</span><span class="pun">}</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">addUnitAlias</span><span class=""> </span><span class="pun">(</span><span class="pln">unit</span><span class="pun">,</span><span class=""> </span><span class="pln">shorthand</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">lowerCase</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">unit</span><span class="pun">.</span><span class="pln">toLowerCase</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pln">aliases</span><span class="pun">[</span><span class="pln">lowerCase</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">aliases</span><span class="pun">[</span><span class="pln">lowerCase</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="str">&#39;s&#39;</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">aliases</span><span class="pun">[</span><span class="pln">shorthand</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">unit</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">normalizeUnits</span><span class="pun">(</span><span class="pln">units</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">typeof</span><span class=""> </span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;string&#39;</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">aliases</span><span class="pun">[</span><span class="pln">units</span><span class="pun">]</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">aliases</span><span class="pun">[</span><span class="pln">units</span><span class="pun">.</span><span class="pln">toLowerCase</span><span class="pun">(</span><span class="pun">)</span><span class="pun">]</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="kwd">undefined</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">normalizeObjectUnits</span><span class="pun">(</span><span class="pln">inputObject</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">normalizedInput</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">{</span><span class="pun">}</span><span class="pun">,</span><span class="">
            </span><span class="pln">normalizedProp</span><span class="pun">,</span><span class="">
            </span><span class="pln">prop</span><span class="pun">;</span><span class="">

        </span><span class="kwd">for</span><span class=""> </span><span class="pun">(</span><span class="pln">prop</span><span class=""> </span><span class="kwd">in</span><span class=""> </span><span class="pln">inputObject</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">hasOwnProp</span><span class="pun">(</span><span class="pln">inputObject</span><span class="pun">,</span><span class=""> </span><span class="pln">prop</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">normalizedProp</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">normalizeUnits</span><span class="pun">(</span><span class="pln">prop</span><span class="pun">)</span><span class="pun">;</span><span class="">
                </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">normalizedProp</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                    </span><span class="pln">normalizedInput</span><span class="pun">[</span><span class="pln">normalizedProp</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">inputObject</span><span class="pun">[</span><span class="pln">prop</span><span class="pun">]</span><span class="pun">;</span><span class="">
                </span><span class="pun">}</span><span class="">
            </span><span class="pun">}</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="pln">normalizedInput</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">makeGetSet</span><span class=""> </span><span class="pun">(</span><span class="pln">unit</span><span class="pun">,</span><span class=""> </span><span class="pln">keepTime</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">value</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">value</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">get</span><span class="pln">_set</span><span class="pln">_</span><span class="pln">_set</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="pln">unit</span><span class="pun">,</span><span class=""> </span><span class="pln">value</span><span class="pun">)</span><span class="pun">;</span><span class="">
                </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">updateOffset</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="pln">keepTime</span><span class="pun">)</span><span class="pun">;</span><span class="">
                </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">return</span><span class=""> </span><span class="pln">get</span><span class="pln">_set</span><span class="pln">_</span><span class="pln">_get</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="pln">unit</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
        </span><span class="pun">}</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">get</span><span class="pln">_set</span><span class="pln">_</span><span class="pln">_get</span><span class=""> </span><span class="pun">(</span><span class="pln">mom</span><span class="pun">,</span><span class=""> </span><span class="pln">unit</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">mom</span><span class="pun">.</span><span class="pln">_d</span><span class="pun">[</span><span class="str">&#39;get&#39;</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pun">(</span><span class="pln">mom</span><span class="pun">.</span><span class="pln">_isUTC</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="str">&#39;UTC&#39;</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">unit</span><span class="pun">]</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">get</span><span class="pln">_set</span><span class="pln">_</span><span class="pln">_set</span><span class=""> </span><span class="pun">(</span><span class="pln">mom</span><span class="pun">,</span><span class=""> </span><span class="pln">unit</span><span class="pun">,</span><span class=""> </span><span class="pln">value</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">mom</span><span class="pun">.</span><span class="pln">_d</span><span class="pun">[</span><span class="str">&#39;set&#39;</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pun">(</span><span class="pln">mom</span><span class="pun">.</span><span class="pln">_isUTC</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="str">&#39;UTC&#39;</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">unit</span><span class="pun">]</span><span class="pun">(</span><span class="pln">value</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="com">// MOMENTS</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">getSet</span><span class=""> </span><span class="pun">(</span><span class="pln">units</span><span class="pun">,</span><span class=""> </span><span class="pln">value</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">unit</span><span class="pun">;</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;object&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">for</span><span class=""> </span><span class="pun">(</span><span class="pln">unit</span><span class=""> </span><span class="kwd">in</span><span class=""> </span><span class="pln">units</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">set</span><span class="pun">(</span><span class="pln">unit</span><span class="pun">,</span><span class=""> </span><span class="pln">units</span><span class="pun">[</span><span class="pln">unit</span><span class="pun">]</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">normalizeUnits</span><span class="pun">(</span><span class="pln">units</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="kwd">this</span><span class="pun">[</span><span class="pln">units</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;function&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">[</span><span class="pln">units</span><span class="pun">]</span><span class="pun">(</span><span class="pln">value</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">zeroFill</span><span class="pun">(</span><span class="pln">number</span><span class="pun">,</span><span class=""> </span><span class="pln">targetLength</span><span class="pun">,</span><span class=""> </span><span class="pln">forceSign</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">absNumber</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">&#39;&#39;</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">Math</span><span class="pun">.</span><span class="pln">abs</span><span class="pun">(</span><span class="pln">number</span><span class="pun">)</span><span class="pun">,</span><span class="">
            </span><span class="pln">zerosToFill</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">targetLength</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">absNumber</span><span class="pun">.</span><span class="pln">length</span><span class="pun">,</span><span class="">
            </span><span class="pln">sign</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">number</span><span class=""> </span><span class="pun">&gt;</span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pun">(</span><span class="pln">sign</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pun">(</span><span class="pln">forceSign</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="str">&#39;+&#39;</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;-&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class="">
            </span><span class="pln">Math</span><span class="pun">.</span><span class="pln">pow</span><span class="pun">(</span><span class="pln">10</span><span class="pun">,</span><span class=""> </span><span class="pln">Math</span><span class="pun">.</span><span class="pln">max</span><span class="pun">(</span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">zerosToFill</span><span class="pun">)</span><span class="pun">)</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">substr</span><span class="pun">(</span><span class="pln">1</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">absNumber</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">formattingTokens</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g</span><span class="pun">;</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">localFormattingTokens</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g</span><span class="pun">;</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">formatFunctions</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">{</span><span class="pun">}</span><span class="pun">;</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">formatTokenFunctions</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">{</span><span class="pun">}</span><span class="pun">;</span><span class="">

    </span><span class="com">// token:    &#39;M&#39;</span><span class="">
    </span><span class="com">// padded:   [&#39;MM&#39;, 2]</span><span class="">
    </span><span class="com">// ordinal:  &#39;Mo&#39;</span><span class="">
    </span><span class="com">// callback: function () { this.month() + 1 }</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">addFormatToken</span><span class=""> </span><span class="pun">(</span><span class="pln">token</span><span class="pun">,</span><span class=""> </span><span class="pln">padded</span><span class="pun">,</span><span class=""> </span><span class="pln">ordinal</span><span class="pun">,</span><span class=""> </span><span class="pln">callback</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">func</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">callback</span><span class="pun">;</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">callback</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;string&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">func</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">[</span><span class="pln">callback</span><span class="pun">]</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">token</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">formatTokenFunctions</span><span class="pun">[</span><span class="pln">token</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">func</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">padded</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">formatTokenFunctions</span><span class="pun">[</span><span class="pln">padded</span><span class="pun">[</span><span class="pln">0</span><span class="pun">]</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">return</span><span class=""> </span><span class="pln">zeroFill</span><span class="pun">(</span><span class="pln">func</span><span class="pun">.</span><span class="pln">apply</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="pln">arguments</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">padded</span><span class="pun">[</span><span class="pln">1</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">padded</span><span class="pun">[</span><span class="pln">2</span><span class="pun">]</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">ordinal</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">formatTokenFunctions</span><span class="pun">[</span><span class="pln">ordinal</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">localeData</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">ordinal</span><span class="pun">(</span><span class="pln">func</span><span class="pun">.</span><span class="pln">apply</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="pln">arguments</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">token</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">removeFormattingTokens</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">.</span><span class="pln">match</span><span class="pun">(</span><span class="str">/\[[\s\S]/</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">input</span><span class="pun">.</span><span class="pln">replace</span><span class="pun">(</span><span class="str">/^\[|\]$/g</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">input</span><span class="pun">.</span><span class="pln">replace</span><span class="pun">(</span><span class="str">/\\/g</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">makeFormatFunction</span><span class="pun">(</span><span class="pln">format</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">array</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">format</span><span class="pun">.</span><span class="pln">match</span><span class="pun">(</span><span class="pln">formattingTokens</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">i</span><span class="pun">,</span><span class=""> </span><span class="pln">length</span><span class="pun">;</span><span class="">

        </span><span class="kwd">for</span><span class=""> </span><span class="pun">(</span><span class="pln">i</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">length</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">array</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span><span class=""> </span><span class="pln">i</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">length</span><span class="pun">;</span><span class=""> </span><span class="pln">i</span><span class="pun">++</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">formatTokenFunctions</span><span class="pun">[</span><span class="pln">array</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">]</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">array</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">formatTokenFunctions</span><span class="pun">[</span><span class="pln">array</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">]</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">array</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">removeFormattingTokens</span><span class="pun">(</span><span class="pln">array</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">mom</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">var</span><span class=""> </span><span class="pln">output</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">;</span><span class="">
            </span><span class="kwd">for</span><span class=""> </span><span class="pun">(</span><span class="pln">i</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class=""> </span><span class="pln">i</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">length</span><span class="pun">;</span><span class=""> </span><span class="pln">i</span><span class="pun">++</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">output</span><span class=""> </span><span class="pun">+</span><span class="pun">=</span><span class=""> </span><span class="pln">array</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class=""> </span><span class="kwd">instanceof</span><span class=""> </span><span class="pln">Function</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">array</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">.</span><span class="pln">call</span><span class="pun">(</span><span class="pln">mom</span><span class="pun">,</span><span class=""> </span><span class="pln">format</span><span class="pun">)</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">array</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">output</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="com">// format date using native date object</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">formatMoment</span><span class="pun">(</span><span class="pln">m</span><span class="pun">,</span><span class=""> </span><span class="pln">format</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pun">!</span><span class="pln">m</span><span class="pun">.</span><span class="pln">isValid</span><span class="pun">(</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">m</span><span class="pun">.</span><span class="pln">localeData</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">invalidDate</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="pln">format</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">expandFormat</span><span class="pun">(</span><span class="pln">format</span><span class="pun">,</span><span class=""> </span><span class="pln">m</span><span class="pun">.</span><span class="pln">localeData</span><span class="pun">(</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pln">formatFunctions</span><span class="pun">[</span><span class="pln">format</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">formatFunctions</span><span class="pun">[</span><span class="pln">format</span><span class="pun">]</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">makeFormatFunction</span><span class="pun">(</span><span class="pln">format</span><span class="pun">)</span><span class="pun">;</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="pln">formatFunctions</span><span class="pun">[</span><span class="pln">format</span><span class="pun">]</span><span class="pun">(</span><span class="pln">m</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">expandFormat</span><span class="pun">(</span><span class="pln">format</span><span class="pun">,</span><span class=""> </span><span class="pln">locale</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">i</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">5</span><span class="pun">;</span><span class="">

        </span><span class="kwd">function</span><span class=""> </span><span class="pln">replaceLongDateFormatTokens</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">locale</span><span class="pun">.</span><span class="pln">longDateFormat</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">input</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="pln">localFormattingTokens</span><span class="pun">.</span><span class="pln">lastIndex</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class="">
        </span><span class="kwd">while</span><span class=""> </span><span class="pun">(</span><span class="pln">i</span><span class=""> </span><span class="pun">&gt;</span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">localFormattingTokens</span><span class="pun">.</span><span class="pln">test</span><span class="pun">(</span><span class="pln">format</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">format</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">format</span><span class="pun">.</span><span class="pln">replace</span><span class="pun">(</span><span class="pln">localFormattingTokens</span><span class="pun">,</span><span class=""> </span><span class="pln">replaceLongDateFormatTokens</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pln">localFormattingTokens</span><span class="pun">.</span><span class="pln">lastIndex</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class="">
            </span><span class="pln">i</span><span class=""> </span><span class="pun">-</span><span class="pun">=</span><span class=""> </span><span class="pln">1</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="pln">format</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">match1</span><span class="">         </span><span class="pun">=</span><span class=""> </span><span class="str">/\d/</span><span class="pun">;</span><span class="">            </span><span class="com">//       0 - 9</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">match2</span><span class="">         </span><span class="pun">=</span><span class=""> </span><span class="str">/\d\d/</span><span class="pun">;</span><span class="">          </span><span class="com">//      00 - 99</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">match3</span><span class="">         </span><span class="pun">=</span><span class=""> </span><span class="str">/\d{3}/</span><span class="pun">;</span><span class="">         </span><span class="com">//     000 - 999</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">match4</span><span class="">         </span><span class="pun">=</span><span class=""> </span><span class="str">/\d{4}/</span><span class="pun">;</span><span class="">         </span><span class="com">//    0000 - 9999</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">match6</span><span class="">         </span><span class="pun">=</span><span class=""> </span><span class="str">/[+-]?\d{6}/</span><span class="pun">;</span><span class="">    </span><span class="com">// -999999 - 999999</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">match1to2</span><span class="">      </span><span class="pun">=</span><span class=""> </span><span class="str">/\d\d?/</span><span class="pun">;</span><span class="">         </span><span class="com">//       0 - 99</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">match1to3</span><span class="">      </span><span class="pun">=</span><span class=""> </span><span class="str">/\d{1,3}/</span><span class="pun">;</span><span class="">       </span><span class="com">//       0 - 999</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">match1to4</span><span class="">      </span><span class="pun">=</span><span class=""> </span><span class="str">/\d{1,4}/</span><span class="pun">;</span><span class="">       </span><span class="com">//       0 - 9999</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">match1to6</span><span class="">      </span><span class="pun">=</span><span class=""> </span><span class="str">/[+-]?\d{1,6}/</span><span class="pun">;</span><span class="">  </span><span class="com">// -999999 - 999999</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">matchUnsigned</span><span class="">  </span><span class="pun">=</span><span class=""> </span><span class="str">/\d+/</span><span class="pun">;</span><span class="">           </span><span class="com">//       0 - inf</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">matchSigned</span><span class="">    </span><span class="pun">=</span><span class=""> </span><span class="str">/[+-]?\d+/</span><span class="pun">;</span><span class="">      </span><span class="com">//    -inf - inf</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">matchOffset</span><span class="">    </span><span class="pun">=</span><span class=""> </span><span class="str">/Z|[+-]\d\d:?\d\d/gi</span><span class="pun">;</span><span class=""> </span><span class="com">// +00:00 -00:00 +0000 -0000 or Z</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">matchTimestamp</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">/[+-]?\d+(\.\d{1,3})?/</span><span class="pun">;</span><span class=""> </span><span class="com">// 123456789 123456789.123</span><span class="">

    </span><span class="com">// any word (or two) characters or numbers including two/three word month in arabic.</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">matchWord</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">/[0-9]*[&#39;a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i</span><span class="pun">;</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">regexes</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">{</span><span class="pun">}</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">isFunction</span><span class=""> </span><span class="pun">(</span><span class="pln">sth</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="com">// https://github.com/moment/moment/issues/2325</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">typeof</span><span class=""> </span><span class="pln">sth</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;function&#39;</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class="">
            </span><span class="pln">Object</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">toString</span><span class="pun">.</span><span class="pln">call</span><span class="pun">(</span><span class="pln">sth</span><span class="pun">)</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;[object Function]&#39;</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">


    </span><span class="kwd">function</span><span class=""> </span><span class="pln">addRegexToken</span><span class=""> </span><span class="pun">(</span><span class="pln">token</span><span class="pun">,</span><span class=""> </span><span class="pln">regex</span><span class="pun">,</span><span class=""> </span><span class="pln">strictRegex</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">regexes</span><span class="pun">[</span><span class="pln">token</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">isFunction</span><span class="pun">(</span><span class="pln">regex</span><span class="pun">)</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">regex</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">isStrict</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pun">(</span><span class="pln">isStrict</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">strictRegex</span><span class="pun">)</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">strictRegex</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">regex</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">getParseRegexForToken</span><span class=""> </span><span class="pun">(</span><span class="pln">token</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pun">!</span><span class="pln">hasOwnProp</span><span class="pun">(</span><span class="pln">regexes</span><span class="pun">,</span><span class=""> </span><span class="pln">token</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="kwd">new</span><span class=""> </span><span class="pln">RegExp</span><span class="pun">(</span><span class="pln">unescapeFormat</span><span class="pun">(</span><span class="pln">token</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="pln">regexes</span><span class="pun">[</span><span class="pln">token</span><span class="pun">]</span><span class="pun">(</span><span class="pln">config</span><span class="pun">.</span><span class="pln">_strict</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_locale</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="com">// Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">unescapeFormat</span><span class="pun">(</span><span class="pln">s</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">s</span><span class="pun">.</span><span class="pln">replace</span><span class="pun">(</span><span class="str">&#39;\\&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">.</span><span class="pln">replace</span><span class="pun">(</span><span class="str">/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">matched</span><span class="pun">,</span><span class=""> </span><span class="pln">p1</span><span class="pun">,</span><span class=""> </span><span class="pln">p2</span><span class="pun">,</span><span class=""> </span><span class="pln">p3</span><span class="pun">,</span><span class=""> </span><span class="pln">p4</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">p1</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">p2</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">p3</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">p4</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="pun">)</span><span class="pun">.</span><span class="pln">replace</span><span class="pun">(</span><span class="str">/[-\/\\^$*+?.()|[\]{}]/g</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;\\$&amp;&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">tokens</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">{</span><span class="pun">}</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">addParseToken</span><span class=""> </span><span class="pun">(</span><span class="pln">token</span><span class="pun">,</span><span class=""> </span><span class="pln">callback</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">i</span><span class="pun">,</span><span class=""> </span><span class="pln">func</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">callback</span><span class="pun">;</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">token</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;string&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">token</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">[</span><span class="pln">token</span><span class="pun">]</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">callback</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;number&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">func</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">array</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">array</span><span class="pun">[</span><span class="pln">callback</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">toInt</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">for</span><span class=""> </span><span class="pun">(</span><span class="pln">i</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class=""> </span><span class="pln">i</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">token</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span><span class=""> </span><span class="pln">i</span><span class="pun">++</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">tokens</span><span class="pun">[</span><span class="pln">token</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">func</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">addWeekParseToken</span><span class=""> </span><span class="pun">(</span><span class="pln">token</span><span class="pun">,</span><span class=""> </span><span class="pln">callback</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">addParseToken</span><span class="pun">(</span><span class="pln">token</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">array</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">,</span><span class=""> </span><span class="pln">token</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_w</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_w</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pun">{</span><span class="pun">}</span><span class="pun">;</span><span class="">
            </span><span class="pln">callback</span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_w</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">,</span><span class=""> </span><span class="pln">token</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">addTimeToArrayFromToken</span><span class="pun">(</span><span class="pln">token</span><span class="pun">,</span><span class=""> </span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">hasOwnProp</span><span class="pun">(</span><span class="pln">tokens</span><span class="pun">,</span><span class=""> </span><span class="pln">token</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">tokens</span><span class="pun">[</span><span class="pln">token</span><span class="pun">]</span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">,</span><span class=""> </span><span class="pln">token</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">YEAR</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">MONTH</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">1</span><span class="pun">;</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">DATE</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">2</span><span class="pun">;</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">HOUR</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">3</span><span class="pun">;</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">MINUTE</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">4</span><span class="pun">;</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">SECOND</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">5</span><span class="pun">;</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">MILLISECOND</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">6</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">daysInMonth</span><span class="pun">(</span><span class="pln">year</span><span class="pun">,</span><span class=""> </span><span class="pln">month</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">new</span><span class=""> </span><span class="pln">Date</span><span class="pun">(</span><span class="pln">Date</span><span class="pun">.</span><span class="pln">UTC</span><span class="pun">(</span><span class="pln">year</span><span class="pun">,</span><span class=""> </span><span class="pln">month</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">1</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">)</span><span class="pun">)</span><span class="pun">.</span><span class="pln">getUTCDate</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="com">// FORMATTING</span><span class="">

    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="str">&#39;M&#39;</span><span class="pun">,</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;MM&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">2</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;Mo&#39;</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">month</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">1</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="str">&#39;MMM&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">format</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">localeData</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">monthsShort</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="pln">format</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="str">&#39;MMMM&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">format</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">localeData</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">months</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="pln">format</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// ALIASES</span><span class="">

    </span><span class="pln">addUnitAlias</span><span class="pun">(</span><span class="str">&#39;month&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;M&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// PARSING</span><span class="">

    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;M&#39;</span><span class="pun">,</span><span class="">    </span><span class="pln">match1to2</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;MM&#39;</span><span class="pun">,</span><span class="">   </span><span class="pln">match1to2</span><span class="pun">,</span><span class=""> </span><span class="pln">match2</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;MMM&#39;</span><span class="pun">,</span><span class="">  </span><span class="pln">matchWord</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;MMMM&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">matchWord</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="pln">addParseToken</span><span class="pun">(</span><span class="pun">[</span><span class="str">&#39;M&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;MM&#39;</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">array</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">array</span><span class="pun">[</span><span class="pln">MONTH</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">toInt</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">1</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="pln">addParseToken</span><span class="pun">(</span><span class="pun">[</span><span class="str">&#39;MMM&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;MMMM&#39;</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">array</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">,</span><span class=""> </span><span class="pln">token</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">month</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_locale</span><span class="pun">.</span><span class="pln">monthsParse</span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">token</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_strict</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="com">// if we didn&#39;t find a month name, mark the date as invalid.</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">month</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">array</span><span class="pun">[</span><span class="pln">MONTH</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">month</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">.</span><span class="pln">invalidMonth</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">input</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// LOCALES</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">defaultLocaleMonths</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">&#39;January_February_March_April_May_June_July_August_September_October_November_December&#39;</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="str">&#39;_&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">localeMonths</span><span class=""> </span><span class="pun">(</span><span class="pln">m</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_months</span><span class="pun">[</span><span class="pln">m</span><span class="pun">.</span><span class="pln">month</span><span class="pun">(</span><span class="pun">)</span><span class="pun">]</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">defaultLocaleMonthsShort</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">&#39;Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec&#39;</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="str">&#39;_&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">localeMonthsShort</span><span class=""> </span><span class="pun">(</span><span class="pln">m</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_monthsShort</span><span class="pun">[</span><span class="pln">m</span><span class="pun">.</span><span class="pln">month</span><span class="pun">(</span><span class="pun">)</span><span class="pun">]</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">localeMonthsParse</span><span class=""> </span><span class="pun">(</span><span class="pln">monthName</span><span class="pun">,</span><span class=""> </span><span class="pln">format</span><span class="pun">,</span><span class=""> </span><span class="pln">strict</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">i</span><span class="pun">,</span><span class=""> </span><span class="pln">mom</span><span class="pun">,</span><span class=""> </span><span class="pln">regex</span><span class="pun">;</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pun">!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_monthsParse</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_monthsParse</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">[</span><span class="pun">]</span><span class="pun">;</span><span class="">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_longMonthsParse</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">[</span><span class="pun">]</span><span class="pun">;</span><span class="">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_shortMonthsParse</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">[</span><span class="pun">]</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">for</span><span class=""> </span><span class="pun">(</span><span class="pln">i</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class=""> </span><span class="pln">i</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">12</span><span class="pun">;</span><span class=""> </span><span class="pln">i</span><span class="pun">++</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="com">// make the regex if we don&#39;t have it already</span><span class="">
            </span><span class="pln">mom</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">create</span><span class="pln">_utc</span><span class="pln">_</span><span class="pln">_createUTC</span><span class="pun">(</span><span class="pun">[</span><span class="pln">2000</span><span class="pun">,</span><span class=""> </span><span class="pln">i</span><span class="pun">]</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">strict</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pun">!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_longMonthsParse</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_longMonthsParse</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">new</span><span class=""> </span><span class="pln">RegExp</span><span class="pun">(</span><span class="str">&#39;^&#39;</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">months</span><span class="pun">(</span><span class="pln">mom</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">.</span><span class="pln">replace</span><span class="pun">(</span><span class="str">&#39;.&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="str">&#39;$&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;i&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
                </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_shortMonthsParse</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">new</span><span class=""> </span><span class="pln">RegExp</span><span class="pun">(</span><span class="str">&#39;^&#39;</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">monthsShort</span><span class="pun">(</span><span class="pln">mom</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">.</span><span class="pln">replace</span><span class="pun">(</span><span class="str">&#39;.&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="str">&#39;$&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;i&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pun">!</span><span class="pln">strict</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pun">!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_monthsParse</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">regex</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">&#39;^&#39;</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">months</span><span class="pun">(</span><span class="pln">mom</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="str">&#39;|^&#39;</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">monthsShort</span><span class="pun">(</span><span class="pln">mom</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
                </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_monthsParse</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">new</span><span class=""> </span><span class="pln">RegExp</span><span class="pun">(</span><span class="pln">regex</span><span class="pun">.</span><span class="pln">replace</span><span class="pun">(</span><span class="str">&#39;.&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;i&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
            </span><span class="com">// test the regex</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">strict</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">format</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;MMMM&#39;</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_longMonthsParse</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">.</span><span class="pln">test</span><span class="pun">(</span><span class="pln">monthName</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">return</span><span class=""> </span><span class="pln">i</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">strict</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">format</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;MMM&#39;</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_shortMonthsParse</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">.</span><span class="pln">test</span><span class="pun">(</span><span class="pln">monthName</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">return</span><span class=""> </span><span class="pln">i</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pun">!</span><span class="pln">strict</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_monthsParse</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">.</span><span class="pln">test</span><span class="pun">(</span><span class="pln">monthName</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">return</span><span class=""> </span><span class="pln">i</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="com">// MOMENTS</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">setMonth</span><span class=""> </span><span class="pun">(</span><span class="pln">mom</span><span class="pun">,</span><span class=""> </span><span class="pln">value</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">dayOfMonth</span><span class="pun">;</span><span class="">

        </span><span class="com">// TODO: Move this out of here!</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">value</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;string&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">value</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">mom</span><span class="pun">.</span><span class="pln">localeData</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">monthsParse</span><span class="pun">(</span><span class="pln">value</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="com">// TODO: Another silent failure?</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">value</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;number&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">return</span><span class=""> </span><span class="pln">mom</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="pln">dayOfMonth</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">Math</span><span class="pun">.</span><span class="pln">min</span><span class="pun">(</span><span class="pln">mom</span><span class="pun">.</span><span class="pln">date</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">daysInMonth</span><span class="pun">(</span><span class="pln">mom</span><span class="pun">.</span><span class="pln">year</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">value</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pln">mom</span><span class="pun">.</span><span class="pln">_d</span><span class="pun">[</span><span class="str">&#39;set&#39;</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pun">(</span><span class="pln">mom</span><span class="pun">.</span><span class="pln">_isUTC</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="str">&#39;UTC&#39;</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="str">&#39;Month&#39;</span><span class="pun">]</span><span class="pun">(</span><span class="pln">value</span><span class="pun">,</span><span class=""> </span><span class="pln">dayOfMonth</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">mom</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">getSetMonth</span><span class=""> </span><span class="pun">(</span><span class="pln">value</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">value</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">setMonth</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="pln">value</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">updateOffset</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="kwd">true</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">get</span><span class="pln">_set</span><span class="pln">_</span><span class="pln">_get</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;Month&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">getDaysInMonth</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">daysInMonth</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">year</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">month</span><span class="pun">(</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">checkOverflow</span><span class=""> </span><span class="pun">(</span><span class="pln">m</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">overflow</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">a</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">m</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">;</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">a</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="pln">m</span><span class="pun">)</span><span class="pun">.</span><span class="pln">overflow</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pun">-</span><span class="pln">2</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">overflow</span><span class=""> </span><span class="pun">=</span><span class="">
                </span><span class="pln">a</span><span class="pun">[</span><span class="pln">MONTH</span><span class="pun">]</span><span class="">       </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">0</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">a</span><span class="pun">[</span><span class="pln">MONTH</span><span class="pun">]</span><span class="">       </span><span class="pun">&gt;</span><span class=""> </span><span class="pln">11</span><span class="">  </span><span class="pun">?</span><span class=""> </span><span class="pln">MONTH</span><span class=""> </span><span class="pun">:</span><span class="">
                </span><span class="pln">a</span><span class="pun">[</span><span class="pln">DATE</span><span class="pun">]</span><span class="">        </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">1</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">a</span><span class="pun">[</span><span class="pln">DATE</span><span class="pun">]</span><span class="">        </span><span class="pun">&gt;</span><span class=""> </span><span class="pln">daysInMonth</span><span class="pun">(</span><span class="pln">a</span><span class="pun">[</span><span class="pln">YEAR</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">a</span><span class="pun">[</span><span class="pln">MONTH</span><span class="pun">]</span><span class="pun">)</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">DATE</span><span class=""> </span><span class="pun">:</span><span class="">
                </span><span class="pln">a</span><span class="pun">[</span><span class="pln">HOUR</span><span class="pun">]</span><span class="">        </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">0</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">a</span><span class="pun">[</span><span class="pln">HOUR</span><span class="pun">]</span><span class="">        </span><span class="pun">&gt;</span><span class=""> </span><span class="pln">24</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pun">(</span><span class="pln">a</span><span class="pun">[</span><span class="pln">HOUR</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">24</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pun">(</span><span class="pln">a</span><span class="pun">[</span><span class="pln">MINUTE</span><span class="pun">]</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">a</span><span class="pun">[</span><span class="pln">SECOND</span><span class="pun">]</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">a</span><span class="pun">[</span><span class="pln">MILLISECOND</span><span class="pun">]</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">HOUR</span><span class=""> </span><span class="pun">:</span><span class="">
                </span><span class="pln">a</span><span class="pun">[</span><span class="pln">MINUTE</span><span class="pun">]</span><span class="">      </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">0</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">a</span><span class="pun">[</span><span class="pln">MINUTE</span><span class="pun">]</span><span class="">      </span><span class="pun">&gt;</span><span class=""> </span><span class="pln">59</span><span class="">  </span><span class="pun">?</span><span class=""> </span><span class="pln">MINUTE</span><span class=""> </span><span class="pun">:</span><span class="">
                </span><span class="pln">a</span><span class="pun">[</span><span class="pln">SECOND</span><span class="pun">]</span><span class="">      </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">0</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">a</span><span class="pun">[</span><span class="pln">SECOND</span><span class="pun">]</span><span class="">      </span><span class="pun">&gt;</span><span class=""> </span><span class="pln">59</span><span class="">  </span><span class="pun">?</span><span class=""> </span><span class="pln">SECOND</span><span class=""> </span><span class="pun">:</span><span class="">
                </span><span class="pln">a</span><span class="pun">[</span><span class="pln">MILLISECOND</span><span class="pun">]</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">0</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">a</span><span class="pun">[</span><span class="pln">MILLISECOND</span><span class="pun">]</span><span class=""> </span><span class="pun">&gt;</span><span class=""> </span><span class="pln">999</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">MILLISECOND</span><span class=""> </span><span class="pun">:</span><span class="">
                </span><span class="pun">-</span><span class="pln">1</span><span class="pun">;</span><span class="">

            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="pln">m</span><span class="pun">)</span><span class="pun">.</span><span class="pln">_overflowDayOfYear</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pun">(</span><span class="pln">overflow</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">YEAR</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">overflow</span><span class=""> </span><span class="pun">&gt;</span><span class=""> </span><span class="pln">DATE</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">overflow</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">DATE</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">

            </span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="pln">m</span><span class="pun">)</span><span class="pun">.</span><span class="pln">overflow</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">overflow</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="pln">m</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">warn</span><span class="pun">(</span><span class="pln">msg</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">suppressDeprecationWarnings</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">false</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="kwd">typeof</span><span class=""> </span><span class="pln">console</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;undefined&#39;</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">console</span><span class="pun">.</span><span class="pln">warn</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">console</span><span class="pun">.</span><span class="pln">warn</span><span class="pun">(</span><span class="str">&#39;Deprecation warning: &#39;</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">msg</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">deprecate</span><span class="pun">(</span><span class="pln">msg</span><span class="pun">,</span><span class=""> </span><span class="pln">fn</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">firstTime</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">true</span><span class="pun">;</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="pln">extend</span><span class="pun">(</span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">firstTime</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">warn</span><span class="pun">(</span><span class="pln">msg</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="str">&#39;\n&#39;</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pun">(</span><span class="kwd">new</span><span class=""> </span><span class="pln">Error</span><span class="pun">(</span><span class="pun">)</span><span class="pun">)</span><span class="pun">.</span><span class="pln">stack</span><span class="pun">)</span><span class="pun">;</span><span class="">
                </span><span class="pln">firstTime</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">false</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">fn</span><span class="pun">.</span><span class="pln">apply</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="pln">arguments</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="pun">,</span><span class=""> </span><span class="pln">fn</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">deprecations</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">{</span><span class="pun">}</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">deprecateSimple</span><span class="pun">(</span><span class="pln">name</span><span class="pun">,</span><span class=""> </span><span class="pln">msg</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pun">!</span><span class="pln">deprecations</span><span class="pun">[</span><span class="pln">name</span><span class="pun">]</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">warn</span><span class="pun">(</span><span class="pln">msg</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pln">deprecations</span><span class="pun">[</span><span class="pln">name</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">true</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">suppressDeprecationWarnings</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">false</span><span class="pun">;</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">from</span><span class="pln">_string</span><span class="pln">_</span><span class="pln">_isoRegex</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/</span><span class="pun">;</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">isoDates</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">[</span><span class="">
        </span><span class="pun">[</span><span class="str">&#39;YYYYYY-MM-DD&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">/[+-]\d{6}-\d{2}-\d{2}/</span><span class="pun">]</span><span class="pun">,</span><span class="">
        </span><span class="pun">[</span><span class="str">&#39;YYYY-MM-DD&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">/\d{4}-\d{2}-\d{2}/</span><span class="pun">]</span><span class="pun">,</span><span class="">
        </span><span class="pun">[</span><span class="str">&#39;GGGG-[W]WW-E&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">/\d{4}-W\d{2}-\d/</span><span class="pun">]</span><span class="pun">,</span><span class="">
        </span><span class="pun">[</span><span class="str">&#39;GGGG-[W]WW&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">/\d{4}-W\d{2}/</span><span class="pun">]</span><span class="pun">,</span><span class="">
        </span><span class="pun">[</span><span class="str">&#39;YYYY-DDD&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">/\d{4}-\d{3}/</span><span class="pun">]</span><span class="">
    </span><span class="pun">]</span><span class="pun">;</span><span class="">

    </span><span class="com">// iso time formats and regexes</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">isoTimes</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">[</span><span class="">
        </span><span class="pun">[</span><span class="str">&#39;HH:mm:ss.SSSS&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">/(T| )\d\d:\d\d:\d\d\.\d+/</span><span class="pun">]</span><span class="pun">,</span><span class="">
        </span><span class="pun">[</span><span class="str">&#39;HH:mm:ss&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">/(T| )\d\d:\d\d:\d\d/</span><span class="pun">]</span><span class="pun">,</span><span class="">
        </span><span class="pun">[</span><span class="str">&#39;HH:mm&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">/(T| )\d\d:\d\d/</span><span class="pun">]</span><span class="pun">,</span><span class="">
        </span><span class="pun">[</span><span class="str">&#39;HH&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">/(T| )\d\d/</span><span class="pun">]</span><span class="">
    </span><span class="pun">]</span><span class="pun">;</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">aspNetJsonRegex</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">/^\/?Date\((\-?\d+)/i</span><span class="pun">;</span><span class="">

    </span><span class="com">// date from iso format</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">configFromISO</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">i</span><span class="pun">,</span><span class=""> </span><span class="pln">l</span><span class="pun">,</span><span class="">
            </span><span class="pln">string</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_i</span><span class="pun">,</span><span class="">
            </span><span class="pln">match</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">from</span><span class="pln">_string</span><span class="pln">_</span><span class="pln">_isoRegex</span><span class="pun">.</span><span class="pln">exec</span><span class="pun">(</span><span class="pln">string</span><span class="pun">)</span><span class="pun">;</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">match</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">.</span><span class="pln">iso</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">true</span><span class="pun">;</span><span class="">
            </span><span class="kwd">for</span><span class=""> </span><span class="pun">(</span><span class="pln">i</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">l</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">isoDates</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span><span class=""> </span><span class="pln">i</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">l</span><span class="pun">;</span><span class=""> </span><span class="pln">i</span><span class="pun">++</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">isoDates</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">[</span><span class="pln">1</span><span class="pun">]</span><span class="pun">.</span><span class="pln">exec</span><span class="pun">(</span><span class="pln">string</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                    </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_f</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">isoDates</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">[</span><span class="pln">0</span><span class="pun">]</span><span class="pun">;</span><span class="">
                    </span><span class="kwd">break</span><span class="pun">;</span><span class="">
                </span><span class="pun">}</span><span class="">
            </span><span class="pun">}</span><span class="">
            </span><span class="kwd">for</span><span class=""> </span><span class="pun">(</span><span class="pln">i</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">l</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">isoTimes</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span><span class=""> </span><span class="pln">i</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">l</span><span class="pun">;</span><span class=""> </span><span class="pln">i</span><span class="pun">++</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">isoTimes</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">[</span><span class="pln">1</span><span class="pun">]</span><span class="pun">.</span><span class="pln">exec</span><span class="pun">(</span><span class="pln">string</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                    </span><span class="com">// match[6] should be &#39;T&#39; or space</span><span class="">
                    </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_f</span><span class=""> </span><span class="pun">+</span><span class="pun">=</span><span class=""> </span><span class="pun">(</span><span class="pln">match</span><span class="pun">[</span><span class="pln">6</span><span class="pun">]</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="str">&#39; &#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">isoTimes</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">[</span><span class="pln">0</span><span class="pun">]</span><span class="pun">;</span><span class="">
                    </span><span class="kwd">break</span><span class="pun">;</span><span class="">
                </span><span class="pun">}</span><span class="">
            </span><span class="pun">}</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">string</span><span class="pun">.</span><span class="pln">match</span><span class="pun">(</span><span class="pln">matchOffset</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_f</span><span class=""> </span><span class="pun">+</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;Z&#39;</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
            </span><span class="pln">configFromStringAndFormat</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_isValid</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">false</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="com">// date from iso format or fallback</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">configFromString</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">matched</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">aspNetJsonRegex</span><span class="pun">.</span><span class="pln">exec</span><span class="pun">(</span><span class="pln">config</span><span class="pun">.</span><span class="pln">_i</span><span class="pun">)</span><span class="pun">;</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">matched</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_d</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">new</span><span class=""> </span><span class="pln">Date</span><span class="pun">(</span><span class="pun">+</span><span class="pln">matched</span><span class="pun">[</span><span class="pln">1</span><span class="pun">]</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="kwd">return</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="pln">configFromISO</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">config</span><span class="pun">.</span><span class="pln">_isValid</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">false</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">delete</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_isValid</span><span class="pun">;</span><span class="">
            </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">createFromInputFallback</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">createFromInputFallback</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">deprecate</span><span class="pun">(</span><span class="">
        </span><span class="str">&#39;moment construction falls back to js Date. This is &#39;</span><span class=""> </span><span class="pun">+</span><span class="">
        </span><span class="str">&#39;discouraged and will be removed in upcoming major &#39;</span><span class=""> </span><span class="pun">+</span><span class="">
        </span><span class="str">&#39;release. Please refer to &#39;</span><span class=""> </span><span class="pun">+</span><span class="">
        </span><span class="str">&#39;https://github.com/moment/moment/issues/1407 for more info.&#39;</span><span class="pun">,</span><span class="">
        </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_d</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">new</span><span class=""> </span><span class="pln">Date</span><span class="pun">(</span><span class="pln">config</span><span class="pun">.</span><span class="pln">_i</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pun">(</span><span class="pln">config</span><span class="pun">.</span><span class="pln">_useUTC</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="str">&#39; UTC&#39;</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">createDate</span><span class=""> </span><span class="pun">(</span><span class="pln">y</span><span class="pun">,</span><span class=""> </span><span class="pln">m</span><span class="pun">,</span><span class=""> </span><span class="pln">d</span><span class="pun">,</span><span class=""> </span><span class="pln">h</span><span class="pun">,</span><span class=""> </span><span class="pln">M</span><span class="pun">,</span><span class=""> </span><span class="pln">s</span><span class="pun">,</span><span class=""> </span><span class="pln">ms</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="com">//can&#39;t just apply() to create a date:</span><span class="">
        </span><span class="com">//http://stackoverflow.com/questions/181348/instantiating-a-javascript-object-by-calling-prototype-constructor-apply</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">date</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">new</span><span class=""> </span><span class="pln">Date</span><span class="pun">(</span><span class="pln">y</span><span class="pun">,</span><span class=""> </span><span class="pln">m</span><span class="pun">,</span><span class=""> </span><span class="pln">d</span><span class="pun">,</span><span class=""> </span><span class="pln">h</span><span class="pun">,</span><span class=""> </span><span class="pln">M</span><span class="pun">,</span><span class=""> </span><span class="pln">s</span><span class="pun">,</span><span class=""> </span><span class="pln">ms</span><span class="pun">)</span><span class="pun">;</span><span class="">

        </span><span class="com">//the date constructor doesn&#39;t accept years &lt; 1970</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">y</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">1970</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">date</span><span class="pun">.</span><span class="pln">setFullYear</span><span class="pun">(</span><span class="pln">y</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">date</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">createUTCDate</span><span class=""> </span><span class="pun">(</span><span class="pln">y</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">date</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">new</span><span class=""> </span><span class="pln">Date</span><span class="pun">(</span><span class="pln">Date</span><span class="pun">.</span><span class="pln">UTC</span><span class="pun">.</span><span class="pln">apply</span><span class="pun">(</span><span class="kwd">null</span><span class="pun">,</span><span class=""> </span><span class="pln">arguments</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">y</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">1970</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">date</span><span class="pun">.</span><span class="pln">setUTCFullYear</span><span class="pun">(</span><span class="pln">y</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">date</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;YY&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">2</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">year</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">%</span><span class=""> </span><span class="pln">100</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;YYYY&#39;</span><span class="pun">,</span><span class="">   </span><span class="pln">4</span><span class="pun">]</span><span class="pun">,</span><span class="">       </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;year&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;YYYYY&#39;</span><span class="pun">,</span><span class="">  </span><span class="pln">5</span><span class="pun">]</span><span class="pun">,</span><span class="">       </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;year&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;YYYYYY&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">6</span><span class="pun">,</span><span class=""> </span><span class="kwd">true</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;year&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// ALIASES</span><span class="">

    </span><span class="pln">addUnitAlias</span><span class="pun">(</span><span class="str">&#39;year&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;y&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// PARSING</span><span class="">

    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;Y&#39;</span><span class="pun">,</span><span class="">      </span><span class="pln">matchSigned</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;YY&#39;</span><span class="pun">,</span><span class="">     </span><span class="pln">match1to2</span><span class="pun">,</span><span class=""> </span><span class="pln">match2</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;YYYY&#39;</span><span class="pun">,</span><span class="">   </span><span class="pln">match1to4</span><span class="pun">,</span><span class=""> </span><span class="pln">match4</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;YYYYY&#39;</span><span class="pun">,</span><span class="">  </span><span class="pln">match1to6</span><span class="pun">,</span><span class=""> </span><span class="pln">match6</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;YYYYYY&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">match1to6</span><span class="pun">,</span><span class=""> </span><span class="pln">match6</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="pln">addParseToken</span><span class="pun">(</span><span class="pun">[</span><span class="str">&#39;YYYYY&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;YYYYYY&#39;</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">YEAR</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addParseToken</span><span class="pun">(</span><span class="str">&#39;YYYY&#39;</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">array</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">array</span><span class="pun">[</span><span class="pln">YEAR</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">input</span><span class="pun">.</span><span class="pln">length</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">2</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">parseTwoDigitYear</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">toInt</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addParseToken</span><span class="pun">(</span><span class="str">&#39;YY&#39;</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">array</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">array</span><span class="pun">[</span><span class="pln">YEAR</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">parseTwoDigitYear</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// HELPERS</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">daysInYear</span><span class="pun">(</span><span class="pln">year</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">isLeapYear</span><span class="pun">(</span><span class="pln">year</span><span class="pun">)</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">366</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">365</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">isLeapYear</span><span class="pun">(</span><span class="pln">year</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pun">(</span><span class="pln">year</span><span class=""> </span><span class="pun">%</span><span class=""> </span><span class="pln">4</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">year</span><span class=""> </span><span class="pun">%</span><span class=""> </span><span class="pln">100</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">)</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">year</span><span class=""> </span><span class="pun">%</span><span class=""> </span><span class="pln">400</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="com">// HOOKS</span><span class="">

    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">parseTwoDigitYear</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">toInt</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pun">(</span><span class="pln">toInt</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">&gt;</span><span class=""> </span><span class="pln">68</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">1900</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">2000</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">;</span><span class="">

    </span><span class="com">// MOMENTS</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">getSetYear</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">makeGetSet</span><span class="pun">(</span><span class="str">&#39;FullYear&#39;</span><span class="pun">,</span><span class=""> </span><span class="kwd">false</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">getIsLeapYear</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">isLeapYear</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">year</span><span class="pun">(</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="str">&#39;w&#39;</span><span class="pun">,</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;ww&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">2</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;wo&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;week&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="str">&#39;W&#39;</span><span class="pun">,</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;WW&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">2</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;Wo&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;isoWeek&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// ALIASES</span><span class="">

    </span><span class="pln">addUnitAlias</span><span class="pun">(</span><span class="str">&#39;week&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;w&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addUnitAlias</span><span class="pun">(</span><span class="str">&#39;isoWeek&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;W&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// PARSING</span><span class="">

    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;w&#39;</span><span class="pun">,</span><span class="">  </span><span class="pln">match1to2</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;ww&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">match1to2</span><span class="pun">,</span><span class=""> </span><span class="pln">match2</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;W&#39;</span><span class="pun">,</span><span class="">  </span><span class="pln">match1to2</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;WW&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">match1to2</span><span class="pun">,</span><span class=""> </span><span class="pln">match2</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="pln">addWeekParseToken</span><span class="pun">(</span><span class="pun">[</span><span class="str">&#39;w&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;ww&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;W&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;WW&#39;</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">week</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">,</span><span class=""> </span><span class="pln">token</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">week</span><span class="pun">[</span><span class="pln">token</span><span class="pun">.</span><span class="pln">substr</span><span class="pun">(</span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">1</span><span class="pun">)</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">toInt</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// HELPERS</span><span class="">

    </span><span class="com">// firstDayOfWeek       0 = sun, 6 = sat</span><span class="">
    </span><span class="com">//                      the day of the week that starts the week</span><span class="">
    </span><span class="com">//                      (usually sunday or monday)</span><span class="">
    </span><span class="com">// firstDayOfWeekOfYear 0 = sun, 6 = sat</span><span class="">
    </span><span class="com">//                      the first week is the week that contains the first</span><span class="">
    </span><span class="com">//                      of this day of the week</span><span class="">
    </span><span class="com">//                      (eg. ISO weeks use thursday (4))</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">weekOfYear</span><span class="pun">(</span><span class="pln">mom</span><span class="pun">,</span><span class=""> </span><span class="pln">firstDayOfWeek</span><span class="pun">,</span><span class=""> </span><span class="pln">firstDayOfWeekOfYear</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">end</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">firstDayOfWeekOfYear</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">firstDayOfWeek</span><span class="pun">,</span><span class="">
            </span><span class="pln">daysToDayOfWeek</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">firstDayOfWeekOfYear</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">mom</span><span class="pun">.</span><span class="pln">day</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class="">
            </span><span class="pln">adjustedMoment</span><span class="pun">;</span><span class="">


        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">daysToDayOfWeek</span><span class=""> </span><span class="pun">&gt;</span><span class=""> </span><span class="pln">end</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">daysToDayOfWeek</span><span class=""> </span><span class="pun">-</span><span class="pun">=</span><span class=""> </span><span class="pln">7</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">daysToDayOfWeek</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">end</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">7</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">daysToDayOfWeek</span><span class=""> </span><span class="pun">+</span><span class="pun">=</span><span class=""> </span><span class="pln">7</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="pln">adjustedMoment</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class="pun">(</span><span class="pln">mom</span><span class="pun">)</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">daysToDayOfWeek</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;d&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">week</span><span class="pun">:</span><span class=""> </span><span class="pln">Math</span><span class="pun">.</span><span class="pln">ceil</span><span class="pun">(</span><span class="pln">adjustedMoment</span><span class="pun">.</span><span class="pln">dayOfYear</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">7</span><span class="pun">)</span><span class="pun">,</span><span class="">
            </span><span class="pln">year</span><span class="pun">:</span><span class=""> </span><span class="pln">adjustedMoment</span><span class="pun">.</span><span class="pln">year</span><span class="pun">(</span><span class="pun">)</span><span class="">
        </span><span class="pun">}</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="com">// LOCALES</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">localeWeek</span><span class=""> </span><span class="pun">(</span><span class="pln">mom</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">weekOfYear</span><span class="pun">(</span><span class="pln">mom</span><span class="pun">,</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_week</span><span class="pun">.</span><span class="pln">dow</span><span class="pun">,</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_week</span><span class="pun">.</span><span class="pln">doy</span><span class="pun">)</span><span class="pun">.</span><span class="pln">week</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">defaultLocaleWeek</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">dow</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="com">// Sunday is the first day of the week.</span><span class="">
        </span><span class="pln">doy</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">6</span><span class="">  </span><span class="com">// The week that contains Jan 1st is the first week of the year.</span><span class="">
    </span><span class="pun">}</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">localeFirstDayOfWeek</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_week</span><span class="pun">.</span><span class="pln">dow</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">localeFirstDayOfYear</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_week</span><span class="pun">.</span><span class="pln">doy</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="com">// MOMENTS</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">getSetWeek</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">week</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">localeData</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">week</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">week</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pun">(</span><span class="pln">input</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">week</span><span class="pun">)</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">7</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;d&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">getSetISOWeek</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">week</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">weekOfYear</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="pln">1</span><span class="pun">,</span><span class=""> </span><span class="pln">4</span><span class="pun">)</span><span class="pun">.</span><span class="pln">week</span><span class="pun">;</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">week</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pun">(</span><span class="pln">input</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">week</span><span class="pun">)</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">7</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;d&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="str">&#39;DDD&#39;</span><span class="pun">,</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;DDDD&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">3</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;DDDo&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;dayOfYear&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// ALIASES</span><span class="">

    </span><span class="pln">addUnitAlias</span><span class="pun">(</span><span class="str">&#39;dayOfYear&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;DDD&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// PARSING</span><span class="">

    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;DDD&#39;</span><span class="pun">,</span><span class="">  </span><span class="pln">match1to3</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;DDDD&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">match3</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addParseToken</span><span class="pun">(</span><span class="pun">[</span><span class="str">&#39;DDD&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;DDDD&#39;</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">array</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_dayOfYear</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">toInt</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// HELPERS</span><span class="">

    </span><span class="com">//http://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">dayOfYearFromWeeks</span><span class="pun">(</span><span class="pln">year</span><span class="pun">,</span><span class=""> </span><span class="pln">week</span><span class="pun">,</span><span class=""> </span><span class="pln">weekday</span><span class="pun">,</span><span class=""> </span><span class="pln">firstDayOfWeekOfYear</span><span class="pun">,</span><span class=""> </span><span class="pln">firstDayOfWeek</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">week1Jan</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">6</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">firstDayOfWeek</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">firstDayOfWeekOfYear</span><span class="pun">,</span><span class=""> </span><span class="pln">janX</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">createUTCDate</span><span class="pun">(</span><span class="pln">year</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">1</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">week1Jan</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">d</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">janX</span><span class="pun">.</span><span class="pln">getUTCDay</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">dayOfYear</span><span class="pun">;</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">d</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">firstDayOfWeek</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">d</span><span class=""> </span><span class="pun">+</span><span class="pun">=</span><span class=""> </span><span class="pln">7</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="pln">weekday</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">weekday</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">1</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">weekday</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">firstDayOfWeek</span><span class="pun">;</span><span class="">

        </span><span class="pln">dayOfYear</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">1</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">week1Jan</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">7</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pun">(</span><span class="pln">week</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">1</span><span class="pun">)</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">d</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">weekday</span><span class="pun">;</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">year</span><span class="pun">:</span><span class=""> </span><span class="pln">dayOfYear</span><span class=""> </span><span class="pun">&gt;</span><span class=""> </span><span class="pln">0</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">year</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">year</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">1</span><span class="pun">,</span><span class="">
            </span><span class="pln">dayOfYear</span><span class="pun">:</span><span class=""> </span><span class="pln">dayOfYear</span><span class=""> </span><span class="pun">&gt;</span><span class=""> </span><span class="pln">0</span><span class=""> </span><span class="pun">?</span><span class="">  </span><span class="pln">dayOfYear</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">daysInYear</span><span class="pun">(</span><span class="pln">year</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">1</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">dayOfYear</span><span class="">
        </span><span class="pun">}</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="com">// MOMENTS</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">getSetDayOfYear</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">dayOfYear</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">Math</span><span class="pun">.</span><span class="pln">round</span><span class="pun">(</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">clone</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">startOf</span><span class="pun">(</span><span class="str">&#39;day&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">clone</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">startOf</span><span class="pun">(</span><span class="str">&#39;year&#39;</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">864e5</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">1</span><span class="pun">;</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">dayOfYear</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pun">(</span><span class="pln">input</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">dayOfYear</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;d&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="com">// Pick the first defined of two or three arguments.</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">defaults</span><span class="pun">(</span><span class="pln">a</span><span class="pun">,</span><span class=""> </span><span class="pln">b</span><span class="pun">,</span><span class=""> </span><span class="pln">c</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">a</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">a</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">b</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">b</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">c</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">currentDateArray</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">now</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">new</span><span class=""> </span><span class="pln">Date</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">config</span><span class="pun">.</span><span class="pln">_useUTC</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pun">[</span><span class="pln">now</span><span class="pun">.</span><span class="pln">getUTCFullYear</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">now</span><span class="pun">.</span><span class="pln">getUTCMonth</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">now</span><span class="pun">.</span><span class="pln">getUTCDate</span><span class="pun">(</span><span class="pun">)</span><span class="pun">]</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pun">[</span><span class="pln">now</span><span class="pun">.</span><span class="pln">getFullYear</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">now</span><span class="pun">.</span><span class="pln">getMonth</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">now</span><span class="pun">.</span><span class="pln">getDate</span><span class="pun">(</span><span class="pun">)</span><span class="pun">]</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="com">// convert an array to a date.</span><span class="">
    </span><span class="com">// the array should mirror the parameters below</span><span class="">
    </span><span class="com">// note: all values past the year are optional and will default to the lowest possible value.</span><span class="">
    </span><span class="com">// [year, month, day , hour, minute, second, millisecond]</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">configFromArray</span><span class=""> </span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">i</span><span class="pun">,</span><span class=""> </span><span class="pln">date</span><span class="pun">,</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">[</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">currentDate</span><span class="pun">,</span><span class=""> </span><span class="pln">yearToUse</span><span class="pun">;</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">config</span><span class="pun">.</span><span class="pln">_d</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="pln">currentDate</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">currentDateArray</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">;</span><span class="">

        </span><span class="com">//compute day of the year from weeks and weekdays</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">config</span><span class="pun">.</span><span class="pln">_w</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">[</span><span class="pln">DATE</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">[</span><span class="pln">MONTH</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">dayOfYearFromWeekInfo</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="com">//if the day of the year is set, figure out what it is</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">config</span><span class="pun">.</span><span class="pln">_dayOfYear</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">yearToUse</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">defaults</span><span class="pun">(</span><span class="pln">config</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">[</span><span class="pln">YEAR</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">currentDate</span><span class="pun">[</span><span class="pln">YEAR</span><span class="pun">]</span><span class="pun">)</span><span class="pun">;</span><span class="">

            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">config</span><span class="pun">.</span><span class="pln">_dayOfYear</span><span class=""> </span><span class="pun">&gt;</span><span class=""> </span><span class="pln">daysInYear</span><span class="pun">(</span><span class="pln">yearToUse</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">.</span><span class="pln">_overflowDayOfYear</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">true</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">

            </span><span class="pln">date</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">createUTCDate</span><span class="pun">(</span><span class="pln">yearToUse</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_dayOfYear</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">[</span><span class="pln">MONTH</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">date</span><span class="pun">.</span><span class="pln">getUTCMonth</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">[</span><span class="pln">DATE</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">date</span><span class="pun">.</span><span class="pln">getUTCDate</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="com">// Default to current date.</span><span class="">
        </span><span class="com">// * if no year, month, day of month are given, default to today</span><span class="">
        </span><span class="com">// * if day of month is given, default month and year</span><span class="">
        </span><span class="com">// * if month is given, default only year</span><span class="">
        </span><span class="com">// * if year is given, don&#39;t default anything</span><span class="">
        </span><span class="kwd">for</span><span class=""> </span><span class="pun">(</span><span class="pln">i</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class=""> </span><span class="pln">i</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">3</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">;</span><span class=""> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">input</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">currentDate</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="com">// Zero out whatever was not defaulted, including time</span><span class="">
        </span><span class="kwd">for</span><span class=""> </span><span class="pun">(</span><span class="pun">;</span><span class=""> </span><span class="pln">i</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">7</span><span class="pun">;</span><span class=""> </span><span class="pln">i</span><span class="pun">++</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">input</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">(</span><span class="pln">config</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pun">(</span><span class="pln">i</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">2</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">1</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">0</span><span class="pun">)</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="com">// Check for 24:00:00.000</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">config</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">[</span><span class="pln">HOUR</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">24</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class="">
                </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">[</span><span class="pln">MINUTE</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class="">
                </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">[</span><span class="pln">SECOND</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class="">
                </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">[</span><span class="pln">MILLISECOND</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_nextDay</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">true</span><span class="pun">;</span><span class="">
            </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">[</span><span class="pln">HOUR</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_d</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">(</span><span class="pln">config</span><span class="pun">.</span><span class="pln">_useUTC</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">createUTCDate</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">createDate</span><span class="pun">)</span><span class="pun">.</span><span class="pln">apply</span><span class="pun">(</span><span class="kwd">null</span><span class="pun">,</span><span class=""> </span><span class="pln">input</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="com">// Apply timezone offset from input. The actual utcOffset can be changed</span><span class="">
        </span><span class="com">// with parseZone.</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">config</span><span class="pun">.</span><span class="pln">_tzm</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_d</span><span class="pun">.</span><span class="pln">setUTCMinutes</span><span class="pun">(</span><span class="pln">config</span><span class="pun">.</span><span class="pln">_d</span><span class="pun">.</span><span class="pln">getUTCMinutes</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_tzm</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">config</span><span class="pun">.</span><span class="pln">_nextDay</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">[</span><span class="pln">HOUR</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">24</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">dayOfYearFromWeekInfo</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">w</span><span class="pun">,</span><span class=""> </span><span class="pln">weekYear</span><span class="pun">,</span><span class=""> </span><span class="pln">week</span><span class="pun">,</span><span class=""> </span><span class="pln">weekday</span><span class="pun">,</span><span class=""> </span><span class="pln">dow</span><span class="pun">,</span><span class=""> </span><span class="pln">doy</span><span class="pun">,</span><span class=""> </span><span class="pln">temp</span><span class="pun">;</span><span class="">

        </span><span class="pln">w</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_w</span><span class="pun">;</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">w</span><span class="pun">.</span><span class="pln">GG</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">w</span><span class="pun">.</span><span class="pln">W</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">w</span><span class="pun">.</span><span class="pln">E</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">dow</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">1</span><span class="pun">;</span><span class="">
            </span><span class="pln">doy</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">4</span><span class="pun">;</span><span class="">

            </span><span class="com">// TODO: We need to take the current isoWeekYear, but that depends on</span><span class="">
            </span><span class="com">// how we interpret now (local, utc, fixed offset). So create</span><span class="">
            </span><span class="com">// a now version of current config (take local/utc/offset flags, and</span><span class="">
            </span><span class="com">// create now).</span><span class="">
            </span><span class="pln">weekYear</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">defaults</span><span class="pun">(</span><span class="pln">w</span><span class="pun">.</span><span class="pln">GG</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">[</span><span class="pln">YEAR</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">weekOfYear</span><span class="pun">(</span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">1</span><span class="pun">,</span><span class=""> </span><span class="pln">4</span><span class="pun">)</span><span class="pun">.</span><span class="pln">year</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pln">week</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">defaults</span><span class="pun">(</span><span class="pln">w</span><span class="pun">.</span><span class="pln">W</span><span class="pun">,</span><span class=""> </span><span class="pln">1</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pln">weekday</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">defaults</span><span class="pun">(</span><span class="pln">w</span><span class="pun">.</span><span class="pln">E</span><span class="pun">,</span><span class=""> </span><span class="pln">1</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">dow</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_locale</span><span class="pun">.</span><span class="pln">_week</span><span class="pun">.</span><span class="pln">dow</span><span class="pun">;</span><span class="">
            </span><span class="pln">doy</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_locale</span><span class="pun">.</span><span class="pln">_week</span><span class="pun">.</span><span class="pln">doy</span><span class="pun">;</span><span class="">

            </span><span class="pln">weekYear</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">defaults</span><span class="pun">(</span><span class="pln">w</span><span class="pun">.</span><span class="pln">gg</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">[</span><span class="pln">YEAR</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">weekOfYear</span><span class="pun">(</span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">dow</span><span class="pun">,</span><span class=""> </span><span class="pln">doy</span><span class="pun">)</span><span class="pun">.</span><span class="pln">year</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pln">week</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">defaults</span><span class="pun">(</span><span class="pln">w</span><span class="pun">.</span><span class="pln">w</span><span class="pun">,</span><span class=""> </span><span class="pln">1</span><span class="pun">)</span><span class="pun">;</span><span class="">

            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">w</span><span class="pun">.</span><span class="pln">d</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="com">// weekday -- low day numbers are considered next week</span><span class="">
                </span><span class="pln">weekday</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">w</span><span class="pun">.</span><span class="pln">d</span><span class="pun">;</span><span class="">
                </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">weekday</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">dow</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                    </span><span class="pun">++</span><span class="pln">week</span><span class="pun">;</span><span class="">
                </span><span class="pun">}</span><span class="">
            </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">w</span><span class="pun">.</span><span class="pln">e</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="com">// local weekday -- counting starts from begining of week</span><span class="">
                </span><span class="pln">weekday</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">w</span><span class="pun">.</span><span class="pln">e</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">dow</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="com">// default to begining of week</span><span class="">
                </span><span class="pln">weekday</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">dow</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="pln">temp</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">dayOfYearFromWeeks</span><span class="pun">(</span><span class="pln">weekYear</span><span class="pun">,</span><span class=""> </span><span class="pln">week</span><span class="pun">,</span><span class=""> </span><span class="pln">weekday</span><span class="pun">,</span><span class=""> </span><span class="pln">doy</span><span class="pun">,</span><span class=""> </span><span class="pln">dow</span><span class="pun">)</span><span class="pun">;</span><span class="">

        </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">[</span><span class="pln">YEAR</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">temp</span><span class="pun">.</span><span class="pln">year</span><span class="pun">;</span><span class="">
        </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_dayOfYear</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">temp</span><span class="pun">.</span><span class="pln">dayOfYear</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">ISO</span><span class="pln">_8601</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="pun">}</span><span class="pun">;</span><span class="">

    </span><span class="com">// date from string and format string</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">configFromStringAndFormat</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="com">// TODO: Move this to another part of the creation flow to prevent circular deps</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">config</span><span class="pun">.</span><span class="pln">_f</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">ISO</span><span class="pln">_8601</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">configFromISO</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="kwd">return</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_a</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">[</span><span class="pun">]</span><span class="pun">;</span><span class="">
        </span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">.</span><span class="pln">empty</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">true</span><span class="pun">;</span><span class="">

        </span><span class="com">// This array is used to make a Date, either with `new Date` or `Date.UTC`</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">string</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">&#39;&#39;</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_i</span><span class="pun">,</span><span class="">
            </span><span class="pln">i</span><span class="pun">,</span><span class=""> </span><span class="pln">parsedInput</span><span class="pun">,</span><span class=""> </span><span class="pln">tokens</span><span class="pun">,</span><span class=""> </span><span class="pln">token</span><span class="pun">,</span><span class=""> </span><span class="pln">skipped</span><span class="pun">,</span><span class="">
            </span><span class="pln">stringLength</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">string</span><span class="pun">.</span><span class="pln">length</span><span class="pun">,</span><span class="">
            </span><span class="pln">totalParsedInputLength</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class="">

        </span><span class="pln">tokens</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">expandFormat</span><span class="pun">(</span><span class="pln">config</span><span class="pun">.</span><span class="pln">_f</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_locale</span><span class="pun">)</span><span class="pun">.</span><span class="pln">match</span><span class="pun">(</span><span class="pln">formattingTokens</span><span class="pun">)</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pun">[</span><span class="pun">]</span><span class="pun">;</span><span class="">

        </span><span class="kwd">for</span><span class=""> </span><span class="pun">(</span><span class="pln">i</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class=""> </span><span class="pln">i</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">tokens</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span><span class=""> </span><span class="pln">i</span><span class="pun">++</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">token</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">tokens</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">;</span><span class="">
            </span><span class="pln">parsedInput</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">(</span><span class="pln">string</span><span class="pun">.</span><span class="pln">match</span><span class="pun">(</span><span class="pln">getParseRegexForToken</span><span class="pun">(</span><span class="pln">token</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pun">[</span><span class="pun">]</span><span class="pun">)</span><span class="pun">[</span><span class="pln">0</span><span class="pun">]</span><span class="pun">;</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">parsedInput</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">skipped</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">string</span><span class="pun">.</span><span class="pln">substr</span><span class="pun">(</span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">string</span><span class="pun">.</span><span class="pln">indexOf</span><span class="pun">(</span><span class="pln">parsedInput</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">
                </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">skipped</span><span class="pun">.</span><span class="pln">length</span><span class=""> </span><span class="pun">&gt;</span><span class=""> </span><span class="pln">0</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                    </span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">.</span><span class="pln">unusedInput</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">skipped</span><span class="pun">)</span><span class="pun">;</span><span class="">
                </span><span class="pun">}</span><span class="">
                </span><span class="pln">string</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">string</span><span class="pun">.</span><span class="pln">slice</span><span class="pun">(</span><span class="pln">string</span><span class="pun">.</span><span class="pln">indexOf</span><span class="pun">(</span><span class="pln">parsedInput</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">parsedInput</span><span class="pun">.</span><span class="pln">length</span><span class="pun">)</span><span class="pun">;</span><span class="">
                </span><span class="pln">totalParsedInputLength</span><span class=""> </span><span class="pun">+</span><span class="pun">=</span><span class=""> </span><span class="pln">parsedInput</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
            </span><span class="com">// don&#39;t parse if it&#39;s not a known token</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">formatTokenFunctions</span><span class="pun">[</span><span class="pln">token</span><span class="pun">]</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">parsedInput</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                    </span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">.</span><span class="pln">empty</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">false</span><span class="pun">;</span><span class="">
                </span><span class="pun">}</span><span class="">
                </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
                    </span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">.</span><span class="pln">unusedTokens</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">token</span><span class="pun">)</span><span class="pun">;</span><span class="">
                </span><span class="pun">}</span><span class="">
                </span><span class="pln">addTimeToArrayFromToken</span><span class="pun">(</span><span class="pln">token</span><span class="pun">,</span><span class=""> </span><span class="pln">parsedInput</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
            </span><span class="kwd">else</span><span class=""> </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">config</span><span class="pun">.</span><span class="pln">_strict</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pun">!</span><span class="pln">parsedInput</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">.</span><span class="pln">unusedTokens</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">token</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="com">// add remaining unparsed input length to the string</span><span class="">
        </span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">.</span><span class="pln">charsLeftOver</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">stringLength</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">totalParsedInputLength</span><span class="pun">;</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">string</span><span class="pun">.</span><span class="pln">length</span><span class=""> </span><span class="pun">&gt;</span><span class=""> </span><span class="pln">0</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">.</span><span class="pln">unusedInput</span><span class="pun">.</span><span class="pln">push</span><span class="pun">(</span><span class="pln">string</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="com">// clear _12h flag if hour is &lt;= 12</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">.</span><span class="pln">bigHour</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">true</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class="">
                </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">[</span><span class="pln">HOUR</span><span class="pun">]</span><span class=""> </span><span class="pun">&lt;</span><span class="pun">=</span><span class=""> </span><span class="pln">12</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class="">
                </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">[</span><span class="pln">HOUR</span><span class="pun">]</span><span class=""> </span><span class="pun">&gt;</span><span class=""> </span><span class="pln">0</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">.</span><span class="pln">bigHour</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">undefined</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="com">// handle meridiem</span><span class="">
        </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">[</span><span class="pln">HOUR</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">meridiemFixWrap</span><span class="pun">(</span><span class="pln">config</span><span class="pun">.</span><span class="pln">_locale</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">[</span><span class="pln">HOUR</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_meridiem</span><span class="pun">)</span><span class="pun">;</span><span class="">

        </span><span class="pln">configFromArray</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pln">checkOverflow</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">


    </span><span class="kwd">function</span><span class=""> </span><span class="pln">meridiemFixWrap</span><span class=""> </span><span class="pun">(</span><span class="pln">locale</span><span class="pun">,</span><span class=""> </span><span class="pln">hour</span><span class="pun">,</span><span class=""> </span><span class="pln">meridiem</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">isPm</span><span class="pun">;</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">meridiem</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="com">// nothing to do</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">hour</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">locale</span><span class="pun">.</span><span class="pln">meridiemHour</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">locale</span><span class="pun">.</span><span class="pln">meridiemHour</span><span class="pun">(</span><span class="pln">hour</span><span class="pun">,</span><span class=""> </span><span class="pln">meridiem</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">locale</span><span class="pun">.</span><span class="pln">isPM</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="com">// Fallback</span><span class="">
            </span><span class="pln">isPm</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">locale</span><span class="pun">.</span><span class="pln">isPM</span><span class="pun">(</span><span class="pln">meridiem</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">isPm</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">hour</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">12</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">hour</span><span class=""> </span><span class="pun">+</span><span class="pun">=</span><span class=""> </span><span class="pln">12</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pun">!</span><span class="pln">isPm</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">hour</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">12</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">hour</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">hour</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="com">// this is not supposed to happen</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">hour</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">configFromStringAndArray</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">tempConfig</span><span class="pun">,</span><span class="">
            </span><span class="pln">bestMoment</span><span class="pun">,</span><span class="">

            </span><span class="pln">scoreToBeat</span><span class="pun">,</span><span class="">
            </span><span class="pln">i</span><span class="pun">,</span><span class="">
            </span><span class="pln">currentScore</span><span class="pun">;</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">config</span><span class="pun">.</span><span class="pln">_f</span><span class="pun">.</span><span class="pln">length</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">.</span><span class="pln">invalidFormat</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">true</span><span class="pun">;</span><span class="">
            </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_d</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">new</span><span class=""> </span><span class="pln">Date</span><span class="pun">(</span><span class="kwd">NaN</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="kwd">return</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">for</span><span class=""> </span><span class="pun">(</span><span class="pln">i</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class=""> </span><span class="pln">i</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_f</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span><span class=""> </span><span class="pln">i</span><span class="pun">++</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">currentScore</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class="">
            </span><span class="pln">tempConfig</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">copyConfig</span><span class="pun">(</span><span class="pun">{</span><span class="pun">}</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">config</span><span class="pun">.</span><span class="pln">_useUTC</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">tempConfig</span><span class="pun">.</span><span class="pln">_useUTC</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_useUTC</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
            </span><span class="pln">tempConfig</span><span class="pun">.</span><span class="pln">_f</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_f</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">;</span><span class="">
            </span><span class="pln">configFromStringAndFormat</span><span class="pun">(</span><span class="pln">tempConfig</span><span class="pun">)</span><span class="pun">;</span><span class="">

            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pun">!</span><span class="pln">valid</span><span class="pln">_</span><span class="pln">_isValid</span><span class="pun">(</span><span class="pln">tempConfig</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">continue</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">

            </span><span class="com">// if there is any input that was not parsed add a penalty for that format</span><span class="">
            </span><span class="pln">currentScore</span><span class=""> </span><span class="pun">+</span><span class="pun">=</span><span class=""> </span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="pln">tempConfig</span><span class="pun">)</span><span class="pun">.</span><span class="pln">charsLeftOver</span><span class="pun">;</span><span class="">

            </span><span class="com">//or tokens</span><span class="">
            </span><span class="pln">currentScore</span><span class=""> </span><span class="pun">+</span><span class="pun">=</span><span class=""> </span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="pln">tempConfig</span><span class="pun">)</span><span class="pun">.</span><span class="pln">unusedTokens</span><span class="pun">.</span><span class="pln">length</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">10</span><span class="pun">;</span><span class="">

            </span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="pln">tempConfig</span><span class="pun">)</span><span class="pun">.</span><span class="pln">score</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">currentScore</span><span class="pun">;</span><span class="">

            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">scoreToBeat</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">currentScore</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">scoreToBeat</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">scoreToBeat</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">currentScore</span><span class="pun">;</span><span class="">
                </span><span class="pln">bestMoment</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">tempConfig</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="pln">extend</span><span class="pun">(</span><span class="pln">config</span><span class="pun">,</span><span class=""> </span><span class="pln">bestMoment</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">tempConfig</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">configFromObject</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">config</span><span class="pun">.</span><span class="pln">_d</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">var</span><span class=""> </span><span class="pln">i</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">normalizeObjectUnits</span><span class="pun">(</span><span class="pln">config</span><span class="pun">.</span><span class="pln">_i</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_a</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">[</span><span class="pln">i</span><span class="pun">.</span><span class="pln">year</span><span class="pun">,</span><span class=""> </span><span class="pln">i</span><span class="pun">.</span><span class="pln">month</span><span class="pun">,</span><span class=""> </span><span class="pln">i</span><span class="pun">.</span><span class="pln">day</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">i</span><span class="pun">.</span><span class="pln">date</span><span class="pun">,</span><span class=""> </span><span class="pln">i</span><span class="pun">.</span><span class="pln">hour</span><span class="pun">,</span><span class=""> </span><span class="pln">i</span><span class="pun">.</span><span class="pln">minute</span><span class="pun">,</span><span class=""> </span><span class="pln">i</span><span class="pun">.</span><span class="pln">second</span><span class="pun">,</span><span class=""> </span><span class="pln">i</span><span class="pun">.</span><span class="pln">millisecond</span><span class="pun">]</span><span class="pun">;</span><span class="">

        </span><span class="pln">configFromArray</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">createFromConfig</span><span class=""> </span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">res</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">new</span><span class=""> </span><span class="pln">Moment</span><span class="pun">(</span><span class="pln">checkOverflow</span><span class="pun">(</span><span class="pln">prepareConfig</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">res</span><span class="pun">.</span><span class="pln">_nextDay</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="com">// Adding is smart enough around DST</span><span class="">
            </span><span class="pln">res</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">1</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;d&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pln">res</span><span class="pun">.</span><span class="pln">_nextDay</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">undefined</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="pln">res</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">prepareConfig</span><span class=""> </span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_i</span><span class="pun">,</span><span class="">
            </span><span class="pln">format</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_f</span><span class="pun">;</span><span class="">

        </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_locale</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_locale</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">locale</span><span class="pln">_locales</span><span class="pln">_</span><span class="pln">_getLocale</span><span class="pun">(</span><span class="pln">config</span><span class="pun">.</span><span class="pln">_l</span><span class="pun">)</span><span class="pun">;</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pun">(</span><span class="pln">format</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">undefined</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">valid</span><span class="pln">_</span><span class="pln">_createInvalid</span><span class="pun">(</span><span class="pun">{</span><span class="pln">nullInput</span><span class="pun">:</span><span class=""> </span><span class="kwd">true</span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;string&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_i</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_locale</span><span class="pun">.</span><span class="pln">preparse</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">isMoment</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="kwd">new</span><span class=""> </span><span class="pln">Moment</span><span class="pun">(</span><span class="pln">checkOverflow</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">isArray</span><span class="pun">(</span><span class="pln">format</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">configFromStringAndArray</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">format</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">configFromStringAndFormat</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">isDate</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_d</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">input</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">configFromInput</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="pln">config</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">configFromInput</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_i</span><span class="pun">;</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">undefined</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_d</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">new</span><span class=""> </span><span class="pln">Date</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">isDate</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_d</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">new</span><span class=""> </span><span class="pln">Date</span><span class="pun">(</span><span class="pun">+</span><span class="pln">input</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;string&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">configFromString</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">isArray</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_a</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">map</span><span class="pun">(</span><span class="pln">input</span><span class="pun">.</span><span class="pln">slice</span><span class="pun">(</span><span class="pln">0</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">obj</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">return</span><span class=""> </span><span class="pln">parseInt</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">,</span><span class=""> </span><span class="pln">10</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pln">configFromArray</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;object&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">configFromObject</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;number&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="com">// from milliseconds</span><span class="">
            </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_d</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">new</span><span class=""> </span><span class="pln">Date</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">createFromInputFallback</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">createLocalOrUTC</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">format</span><span class="pun">,</span><span class=""> </span><span class="pln">locale</span><span class="pun">,</span><span class=""> </span><span class="pln">strict</span><span class="pun">,</span><span class=""> </span><span class="pln">isUTC</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">c</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">{</span><span class="pun">}</span><span class="pun">;</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class="pun">(</span><span class="pln">locale</span><span class="pun">)</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;boolean&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">strict</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">locale</span><span class="pun">;</span><span class="">
            </span><span class="pln">locale</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">undefined</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="com">// object construction must be done this way.</span><span class="">
        </span><span class="com">// https://github.com/moment/moment/issues/1423</span><span class="">
        </span><span class="pln">c</span><span class="pun">.</span><span class="pln">_isAMomentObject</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">true</span><span class="pun">;</span><span class="">
        </span><span class="pln">c</span><span class="pun">.</span><span class="pln">_useUTC</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">c</span><span class="pun">.</span><span class="pln">_isUTC</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">isUTC</span><span class="pun">;</span><span class="">
        </span><span class="pln">c</span><span class="pun">.</span><span class="pln">_l</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">locale</span><span class="pun">;</span><span class="">
        </span><span class="pln">c</span><span class="pun">.</span><span class="pln">_i</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">input</span><span class="pun">;</span><span class="">
        </span><span class="pln">c</span><span class="pun">.</span><span class="pln">_f</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">format</span><span class="pun">;</span><span class="">
        </span><span class="pln">c</span><span class="pun">.</span><span class="pln">_strict</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">strict</span><span class="pun">;</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="pln">createFromConfig</span><span class="pun">(</span><span class="pln">c</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">format</span><span class="pun">,</span><span class=""> </span><span class="pln">locale</span><span class="pun">,</span><span class=""> </span><span class="pln">strict</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">createLocalOrUTC</span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">format</span><span class="pun">,</span><span class=""> </span><span class="pln">locale</span><span class="pun">,</span><span class=""> </span><span class="pln">strict</span><span class="pun">,</span><span class=""> </span><span class="kwd">false</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">prototypeMin</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">deprecate</span><span class="pun">(</span><span class="">
         </span><span class="str">&#39;moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548&#39;</span><span class="pun">,</span><span class="">
         </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
             </span><span class="kwd">var</span><span class=""> </span><span class="pln">other</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class="pun">.</span><span class="pln">apply</span><span class="pun">(</span><span class="kwd">null</span><span class="pun">,</span><span class=""> </span><span class="pln">arguments</span><span class="pun">)</span><span class="pun">;</span><span class="">
             </span><span class="kwd">return</span><span class=""> </span><span class="pln">other</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="kwd">this</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="kwd">this</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">other</span><span class="pun">;</span><span class="">
         </span><span class="pun">}</span><span class="">
     </span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">prototypeMax</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">deprecate</span><span class="pun">(</span><span class="">
        </span><span class="str">&#39;moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548&#39;</span><span class="pun">,</span><span class="">
        </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">var</span><span class=""> </span><span class="pln">other</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class="pun">.</span><span class="pln">apply</span><span class="pun">(</span><span class="kwd">null</span><span class="pun">,</span><span class=""> </span><span class="pln">arguments</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">other</span><span class=""> </span><span class="pun">&gt;</span><span class=""> </span><span class="kwd">this</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="kwd">this</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">other</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// Pick a moment m from moments so that m[fn](other) is true for all</span><span class="">
    </span><span class="com">// other. This relies on the function fn to be transitive.</span><span class="">
    </span><span class="com">//</span><span class="">
    </span><span class="com">// moments should either be an array of moment objects or an array, whose</span><span class="">
    </span><span class="com">// first element is an array of moment objects.</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">pickBy</span><span class="pun">(</span><span class="pln">fn</span><span class="pun">,</span><span class=""> </span><span class="pln">moments</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">res</span><span class="pun">,</span><span class=""> </span><span class="pln">i</span><span class="pun">;</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">moments</span><span class="pun">.</span><span class="pln">length</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">1</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">isArray</span><span class="pun">(</span><span class="pln">moments</span><span class="pun">[</span><span class="pln">0</span><span class="pun">]</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">moments</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">moments</span><span class="pun">[</span><span class="pln">0</span><span class="pun">]</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pun">!</span><span class="pln">moments</span><span class="pun">.</span><span class="pln">length</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="pln">res</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">moments</span><span class="pun">[</span><span class="pln">0</span><span class="pun">]</span><span class="pun">;</span><span class="">
        </span><span class="kwd">for</span><span class=""> </span><span class="pun">(</span><span class="pln">i</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">1</span><span class="pun">;</span><span class=""> </span><span class="pln">i</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">moments</span><span class="pun">.</span><span class="pln">length</span><span class="pun">;</span><span class=""> </span><span class="pun">++</span><span class="pln">i</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pun">!</span><span class="pln">moments</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">.</span><span class="pln">isValid</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">moments</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">[</span><span class="pln">fn</span><span class="pun">]</span><span class="pun">(</span><span class="pln">res</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">res</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">moments</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">res</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="com">// TODO: Use [].sort instead?</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">min</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">args</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">[</span><span class="pun">]</span><span class="pun">.</span><span class="pln">slice</span><span class="pun">.</span><span class="pln">call</span><span class="pun">(</span><span class="pln">arguments</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">)</span><span class="pun">;</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="pln">pickBy</span><span class="pun">(</span><span class="str">&#39;isBefore&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">args</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">max</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">args</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">[</span><span class="pun">]</span><span class="pun">.</span><span class="pln">slice</span><span class="pun">.</span><span class="pln">call</span><span class="pun">(</span><span class="pln">arguments</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">)</span><span class="pun">;</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="pln">pickBy</span><span class="pun">(</span><span class="str">&#39;isAfter&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">args</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">Duration</span><span class=""> </span><span class="pun">(</span><span class="pln">duration</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">normalizedInput</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">normalizeObjectUnits</span><span class="pun">(</span><span class="pln">duration</span><span class="pun">)</span><span class="pun">,</span><span class="">
            </span><span class="pln">years</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">normalizedInput</span><span class="pun">.</span><span class="pln">year</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class="">
            </span><span class="pln">quarters</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">normalizedInput</span><span class="pun">.</span><span class="pln">quarter</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class="">
            </span><span class="pln">months</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">normalizedInput</span><span class="pun">.</span><span class="pln">month</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class="">
            </span><span class="pln">weeks</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">normalizedInput</span><span class="pun">.</span><span class="pln">week</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class="">
            </span><span class="pln">days</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">normalizedInput</span><span class="pun">.</span><span class="pln">day</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class="">
            </span><span class="pln">hours</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">normalizedInput</span><span class="pun">.</span><span class="pln">hour</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class="">
            </span><span class="pln">minutes</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">normalizedInput</span><span class="pun">.</span><span class="pln">minute</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class="">
            </span><span class="pln">seconds</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">normalizedInput</span><span class="pun">.</span><span class="pln">second</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class="">
            </span><span class="pln">milliseconds</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">normalizedInput</span><span class="pun">.</span><span class="pln">millisecond</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class="">

        </span><span class="com">// representation for dateAddRemove</span><span class="">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_milliseconds</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">+</span><span class="pln">milliseconds</span><span class=""> </span><span class="pun">+</span><span class="">
            </span><span class="pln">seconds</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">1e3</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="com">// 1000</span><span class="">
            </span><span class="pln">minutes</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">6e4</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="com">// 1000 * 60</span><span class="">
            </span><span class="pln">hours</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">36e5</span><span class="pun">;</span><span class=""> </span><span class="com">// 1000 * 60 * 60</span><span class="">
        </span><span class="com">// Because of dateAddRemove treats 24 hours as different from a</span><span class="">
        </span><span class="com">// day when working around DST, we need to store them separately</span><span class="">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_days</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">+</span><span class="pln">days</span><span class=""> </span><span class="pun">+</span><span class="">
            </span><span class="pln">weeks</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">7</span><span class="pun">;</span><span class="">
        </span><span class="com">// It is impossible translate months into days without knowing</span><span class="">
        </span><span class="com">// which months you are are talking about, so we have to store</span><span class="">
        </span><span class="com">// it separately.</span><span class="">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_months</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">+</span><span class="pln">months</span><span class=""> </span><span class="pun">+</span><span class="">
            </span><span class="pln">quarters</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">3</span><span class=""> </span><span class="pun">+</span><span class="">
            </span><span class="pln">years</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">12</span><span class="pun">;</span><span class="">

        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_data</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">{</span><span class="pun">}</span><span class="pun">;</span><span class="">

        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_locale</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">locale</span><span class="pln">_locales</span><span class="pln">_</span><span class="pln">_getLocale</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">

        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_bubble</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">isDuration</span><span class=""> </span><span class="pun">(</span><span class="pln">obj</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">obj</span><span class=""> </span><span class="kwd">instanceof</span><span class=""> </span><span class="pln">Duration</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">offset</span><span class=""> </span><span class="pun">(</span><span class="pln">token</span><span class="pun">,</span><span class=""> </span><span class="pln">separator</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="pln">token</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">var</span><span class=""> </span><span class="pln">offset</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">utcOffset</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="kwd">var</span><span class=""> </span><span class="pln">sign</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">&#39;+&#39;</span><span class="pun">;</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">offset</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">0</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">offset</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">-</span><span class="pln">offset</span><span class="pun">;</span><span class="">
                </span><span class="pln">sign</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">&#39;-&#39;</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">sign</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">zeroFill</span><span class="pun">(</span><span class="pun">~</span><span class="pun">~</span><span class="pun">(</span><span class="pln">offset</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">60</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">2</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">separator</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">zeroFill</span><span class="pun">(</span><span class="pun">~</span><span class="pun">~</span><span class="pun">(</span><span class="pln">offset</span><span class="pun">)</span><span class=""> </span><span class="pun">%</span><span class=""> </span><span class="pln">60</span><span class="pun">,</span><span class=""> </span><span class="pln">2</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="pln">offset</span><span class="pun">(</span><span class="str">&#39;Z&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;:&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">offset</span><span class="pun">(</span><span class="str">&#39;ZZ&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// PARSING</span><span class="">

    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;Z&#39;</span><span class="pun">,</span><span class="">  </span><span class="pln">matchOffset</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;ZZ&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">matchOffset</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addParseToken</span><span class="pun">(</span><span class="pun">[</span><span class="str">&#39;Z&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;ZZ&#39;</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">array</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_useUTC</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">true</span><span class="pun">;</span><span class="">
        </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_tzm</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">offsetFromString</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// HELPERS</span><span class="">

    </span><span class="com">// timezone chunker</span><span class="">
    </span><span class="com">// &#39;+10:00&#39; &gt; [&#39;10&#39;,  &#39;00&#39;]</span><span class="">
    </span><span class="com">// &#39;-1530&#39;  &gt; [&#39;-15&#39;, &#39;30&#39;]</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">chunkOffset</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">/([\+\-]|\d\d)/gi</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">offsetFromString</span><span class="pun">(</span><span class="pln">string</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">matches</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">(</span><span class="pun">(</span><span class="pln">string</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">.</span><span class="pln">match</span><span class="pun">(</span><span class="pln">matchOffset</span><span class="pun">)</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pun">[</span><span class="pun">]</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">chunk</span><span class="">   </span><span class="pun">=</span><span class=""> </span><span class="pln">matches</span><span class="pun">[</span><span class="pln">matches</span><span class="pun">.</span><span class="pln">length</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">1</span><span class="pun">]</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pun">[</span><span class="pun">]</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">parts</span><span class="">   </span><span class="pun">=</span><span class=""> </span><span class="pun">(</span><span class="pln">chunk</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">.</span><span class="pln">match</span><span class="pun">(</span><span class="pln">chunkOffset</span><span class="pun">)</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;-&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">]</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">minutes</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">+</span><span class="pun">(</span><span class="pln">parts</span><span class="pun">[</span><span class="pln">1</span><span class="pun">]</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">60</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">toInt</span><span class="pun">(</span><span class="pln">parts</span><span class="pun">[</span><span class="pln">2</span><span class="pun">]</span><span class="pun">)</span><span class="pun">;</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="pln">parts</span><span class="pun">[</span><span class="pln">0</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;+&#39;</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">minutes</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pun">-</span><span class="pln">minutes</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="com">// Return a moment from input, that is local/utc/zone equivalent to model.</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">cloneWithOffset</span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">model</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">res</span><span class="pun">,</span><span class=""> </span><span class="pln">diff</span><span class="pun">;</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">model</span><span class="pun">.</span><span class="pln">_isUTC</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">res</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">model</span><span class="pun">.</span><span class="pln">clone</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pln">diff</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">(</span><span class="pln">isMoment</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">isDate</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pun">+</span><span class="pln">input</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pun">+</span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pun">(</span><span class="pun">+</span><span class="pln">res</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="com">// Use low-level api, because this fn is low-level api.</span><span class="">
            </span><span class="pln">res</span><span class="pun">.</span><span class="pln">_d</span><span class="pun">.</span><span class="pln">setTime</span><span class="pun">(</span><span class="pun">+</span><span class="pln">res</span><span class="pun">.</span><span class="pln">_d</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">diff</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">updateOffset</span><span class="pun">(</span><span class="pln">res</span><span class="pun">,</span><span class=""> </span><span class="kwd">false</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">res</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">.</span><span class="pln">local</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">getDateOffset</span><span class=""> </span><span class="pun">(</span><span class="pln">m</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="com">// On Firefox.24 Date#getTimezoneOffset returns a floating point.</span><span class="">
        </span><span class="com">// https://github.com/moment/moment/pull/1871</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pun">-</span><span class="pln">Math</span><span class="pun">.</span><span class="pln">round</span><span class="pun">(</span><span class="pln">m</span><span class="pun">.</span><span class="pln">_d</span><span class="pun">.</span><span class="pln">getTimezoneOffset</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">15</span><span class="pun">)</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">15</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="com">// HOOKS</span><span class="">

    </span><span class="com">// This function will be called whenever a moment is mutated.</span><span class="">
    </span><span class="com">// It is intended to keep the offset in sync with the timezone.</span><span class="">
    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">updateOffset</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="pun">}</span><span class="pun">;</span><span class="">

    </span><span class="com">// MOMENTS</span><span class="">

    </span><span class="com">// keepLocalTime = true means only change the timezone, without</span><span class="">
    </span><span class="com">// affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]--&gt;</span><span class="">
    </span><span class="com">// 5:31:26 +0200 It is possible that 5:31:26 doesn&#39;t exist with offset</span><span class="">
    </span><span class="com">// +0200, so we adjust the time as needed, to be valid.</span><span class="">
    </span><span class="com">//</span><span class="">
    </span><span class="com">// Keeping the time actually adds/subtracts (one hour)</span><span class="">
    </span><span class="com">// from the actual represented time. That is why we call updateOffset</span><span class="">
    </span><span class="com">// a second time. In case it wants us to change the offset again</span><span class="">
    </span><span class="com">// _changeInProgress == true case, then we have to adjust, because</span><span class="">
    </span><span class="com">// there is no such time in the given timezone.</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">getSetOffset</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">keepLocalTime</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">offset</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_offset</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class="">
            </span><span class="pln">localAdjust</span><span class="pun">;</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;string&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">offsetFromString</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">Math</span><span class="pun">.</span><span class="pln">abs</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">16</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">60</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pun">!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_isUTC</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">keepLocalTime</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">localAdjust</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">getDateOffset</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_offset</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">input</span><span class="pun">;</span><span class="">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_isUTC</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">true</span><span class="pun">;</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">localAdjust</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">localAdjust</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;m&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">offset</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pun">!</span><span class="pln">keepLocalTime</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_changeInProgress</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                    </span><span class="pln">add</span><span class="pln">_subtract</span><span class="pln">_</span><span class="pln">_addSubtract</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="pln">create</span><span class="pln">_</span><span class="pln">_createDuration</span><span class="pun">(</span><span class="pln">input</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">offset</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;m&#39;</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">1</span><span class="pun">,</span><span class=""> </span><span class="kwd">false</span><span class="pun">)</span><span class="pun">;</span><span class="">
                </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pun">!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_changeInProgress</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_changeInProgress</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">true</span><span class="pun">;</span><span class="">
                    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">updateOffset</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="kwd">true</span><span class="pun">)</span><span class="pun">;</span><span class="">
                    </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_changeInProgress</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">;</span><span class="">
                </span><span class="pun">}</span><span class="">
            </span><span class="pun">}</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_isUTC</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">offset</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">getDateOffset</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">getSetZone</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">keepLocalTime</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;string&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">-</span><span class="pln">input</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">

            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">utcOffset</span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">keepLocalTime</span><span class="pun">)</span><span class="pun">;</span><span class="">

            </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pun">-</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">utcOffset</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">setOffsetToUTC</span><span class=""> </span><span class="pun">(</span><span class="pln">keepLocalTime</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">utcOffset</span><span class="pun">(</span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">keepLocalTime</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">setOffsetToLocal</span><span class=""> </span><span class="pun">(</span><span class="pln">keepLocalTime</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_isUTC</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">utcOffset</span><span class="pun">(</span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">keepLocalTime</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_isUTC</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">false</span><span class="pun">;</span><span class="">

            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">keepLocalTime</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">subtract</span><span class="pun">(</span><span class="pln">getDateOffset</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;m&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">setOffsetToParsedOffset</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_tzm</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">utcOffset</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_tzm</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_i</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;string&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">utcOffset</span><span class="pun">(</span><span class="pln">offsetFromString</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_i</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">hasAlignedHourOffset</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">.</span><span class="pln">utcOffset</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">utcOffset</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">%</span><span class=""> </span><span class="pln">60</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">isDaylightSavingTime</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pun">(</span><span class="">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">utcOffset</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">&gt;</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">clone</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">month</span><span class="pun">(</span><span class="pln">0</span><span class="pun">)</span><span class="pun">.</span><span class="pln">utcOffset</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">||</span><span class="">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">utcOffset</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">&gt;</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">clone</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">month</span><span class="pun">(</span><span class="pln">5</span><span class="pun">)</span><span class="pun">.</span><span class="pln">utcOffset</span><span class="pun">(</span><span class="pun">)</span><span class="">
        </span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">isDaylightSavingTimeShifted</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_isDSTShifted</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;undefined&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_isDSTShifted</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">var</span><span class=""> </span><span class="pln">c</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">{</span><span class="pun">}</span><span class="pun">;</span><span class="">

        </span><span class="pln">copyConfig</span><span class="pun">(</span><span class="pln">c</span><span class="pun">,</span><span class=""> </span><span class="kwd">this</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pln">c</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">prepareConfig</span><span class="pun">(</span><span class="pln">c</span><span class="pun">)</span><span class="pun">;</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">c</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">var</span><span class=""> </span><span class="pln">other</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">c</span><span class="pun">.</span><span class="pln">_isUTC</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">create</span><span class="pln">_utc</span><span class="pln">_</span><span class="pln">_createUTC</span><span class="pun">(</span><span class="pln">c</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">)</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class="pun">(</span><span class="pln">c</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_isDSTShifted</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isValid</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class="">
                </span><span class="pln">compareArrays</span><span class="pun">(</span><span class="pln">c</span><span class="pun">.</span><span class="pln">_a</span><span class="pun">,</span><span class=""> </span><span class="pln">other</span><span class="pun">.</span><span class="pln">toArray</span><span class="pun">(</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">&gt;</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_isDSTShifted</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">false</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_isDSTShifted</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">isLocal</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pun">!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_isUTC</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">isUtcOffset</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_isUTC</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">isUtc</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_isUTC</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_offset</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">aspNetRegex</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/</span><span class="pun">;</span><span class="">

    </span><span class="com">// from http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html</span><span class="">
    </span><span class="com">// somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">create</span><span class="pln">_</span><span class="pln">_isoRegex</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">create</span><span class="pln">_</span><span class="pln">_createDuration</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">key</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">duration</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">input</span><span class="pun">,</span><span class="">
            </span><span class="com">// matching against regexp is expensive, do it on demand</span><span class="">
            </span><span class="pln">match</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">,</span><span class="">
            </span><span class="pln">sign</span><span class="pun">,</span><span class="">
            </span><span class="pln">ret</span><span class="pun">,</span><span class="">
            </span><span class="pln">diffRes</span><span class="pun">;</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">isDuration</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">duration</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">ms</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">input</span><span class="pun">.</span><span class="pln">_milliseconds</span><span class="pun">,</span><span class="">
                </span><span class="pln">d</span><span class="">  </span><span class="pun">:</span><span class=""> </span><span class="pln">input</span><span class="pun">.</span><span class="pln">_days</span><span class="pun">,</span><span class="">
                </span><span class="pln">M</span><span class="">  </span><span class="pun">:</span><span class=""> </span><span class="pln">input</span><span class="pun">.</span><span class="pln">_months</span><span class="">
            </span><span class="pun">}</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;number&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">duration</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">{</span><span class="pun">}</span><span class="pun">;</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">key</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">duration</span><span class="pun">[</span><span class="pln">key</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">input</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">duration</span><span class="pun">.</span><span class="pln">milliseconds</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">input</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pun">!</span><span class="pun">!</span><span class="pun">(</span><span class="pln">match</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">aspNetRegex</span><span class="pun">.</span><span class="pln">exec</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">sign</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">(</span><span class="pln">match</span><span class="pun">[</span><span class="pln">1</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;-&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pun">-</span><span class="pln">1</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">1</span><span class="pun">;</span><span class="">
            </span><span class="pln">duration</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">y</span><span class="">  </span><span class="pun">:</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class="">
                </span><span class="pln">d</span><span class="">  </span><span class="pun">:</span><span class=""> </span><span class="pln">toInt</span><span class="pun">(</span><span class="pln">match</span><span class="pun">[</span><span class="pln">DATE</span><span class="pun">]</span><span class="pun">)</span><span class="">        </span><span class="pun">*</span><span class=""> </span><span class="pln">sign</span><span class="pun">,</span><span class="">
                </span><span class="pln">h</span><span class="">  </span><span class="pun">:</span><span class=""> </span><span class="pln">toInt</span><span class="pun">(</span><span class="pln">match</span><span class="pun">[</span><span class="pln">HOUR</span><span class="pun">]</span><span class="pun">)</span><span class="">        </span><span class="pun">*</span><span class=""> </span><span class="pln">sign</span><span class="pun">,</span><span class="">
                </span><span class="pln">m</span><span class="">  </span><span class="pun">:</span><span class=""> </span><span class="pln">toInt</span><span class="pun">(</span><span class="pln">match</span><span class="pun">[</span><span class="pln">MINUTE</span><span class="pun">]</span><span class="pun">)</span><span class="">      </span><span class="pun">*</span><span class=""> </span><span class="pln">sign</span><span class="pun">,</span><span class="">
                </span><span class="pln">s</span><span class="">  </span><span class="pun">:</span><span class=""> </span><span class="pln">toInt</span><span class="pun">(</span><span class="pln">match</span><span class="pun">[</span><span class="pln">SECOND</span><span class="pun">]</span><span class="pun">)</span><span class="">      </span><span class="pun">*</span><span class=""> </span><span class="pln">sign</span><span class="pun">,</span><span class="">
                </span><span class="pln">ms</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">toInt</span><span class="pun">(</span><span class="pln">match</span><span class="pun">[</span><span class="pln">MILLISECOND</span><span class="pun">]</span><span class="pun">)</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">sign</span><span class="">
            </span><span class="pun">}</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pun">!</span><span class="pun">!</span><span class="pun">(</span><span class="pln">match</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">create</span><span class="pln">_</span><span class="pln">_isoRegex</span><span class="pun">.</span><span class="pln">exec</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">sign</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">(</span><span class="pln">match</span><span class="pun">[</span><span class="pln">1</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;-&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pun">-</span><span class="pln">1</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">1</span><span class="pun">;</span><span class="">
            </span><span class="pln">duration</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">y</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">parseIso</span><span class="pun">(</span><span class="pln">match</span><span class="pun">[</span><span class="pln">2</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">sign</span><span class="pun">)</span><span class="pun">,</span><span class="">
                </span><span class="pln">M</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">parseIso</span><span class="pun">(</span><span class="pln">match</span><span class="pun">[</span><span class="pln">3</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">sign</span><span class="pun">)</span><span class="pun">,</span><span class="">
                </span><span class="pln">d</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">parseIso</span><span class="pun">(</span><span class="pln">match</span><span class="pun">[</span><span class="pln">4</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">sign</span><span class="pun">)</span><span class="pun">,</span><span class="">
                </span><span class="pln">h</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">parseIso</span><span class="pun">(</span><span class="pln">match</span><span class="pun">[</span><span class="pln">5</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">sign</span><span class="pun">)</span><span class="pun">,</span><span class="">
                </span><span class="pln">m</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">parseIso</span><span class="pun">(</span><span class="pln">match</span><span class="pun">[</span><span class="pln">6</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">sign</span><span class="pun">)</span><span class="pun">,</span><span class="">
                </span><span class="pln">s</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">parseIso</span><span class="pun">(</span><span class="pln">match</span><span class="pun">[</span><span class="pln">7</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">sign</span><span class="pun">)</span><span class="pun">,</span><span class="">
                </span><span class="pln">w</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">parseIso</span><span class="pun">(</span><span class="pln">match</span><span class="pun">[</span><span class="pln">8</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">sign</span><span class="pun">)</span><span class="">
            </span><span class="pun">}</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">duration</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="com">// checks for null or undefined</span><span class="">
            </span><span class="pln">duration</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">{</span><span class="pun">}</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">duration</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;object&#39;</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pun">(</span><span class="str">&#39;from&#39;</span><span class=""> </span><span class="kwd">in</span><span class=""> </span><span class="pln">duration</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="str">&#39;to&#39;</span><span class=""> </span><span class="kwd">in</span><span class=""> </span><span class="pln">duration</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">diffRes</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">momentsDifference</span><span class="pun">(</span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class="pun">(</span><span class="pln">duration</span><span class="pun">.</span><span class="pln">from</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class="pun">(</span><span class="pln">duration</span><span class="pun">.</span><span class="pln">to</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">

            </span><span class="pln">duration</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">{</span><span class="pun">}</span><span class="pun">;</span><span class="">
            </span><span class="pln">duration</span><span class="pun">.</span><span class="pln">ms</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">diffRes</span><span class="pun">.</span><span class="pln">milliseconds</span><span class="pun">;</span><span class="">
            </span><span class="pln">duration</span><span class="pun">.</span><span class="pln">M</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">diffRes</span><span class="pun">.</span><span class="pln">months</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="pln">ret</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">new</span><span class=""> </span><span class="pln">Duration</span><span class="pun">(</span><span class="pln">duration</span><span class="pun">)</span><span class="pun">;</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">isDuration</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">hasOwnProp</span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;_locale&#39;</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">ret</span><span class="pun">.</span><span class="pln">_locale</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">input</span><span class="pun">.</span><span class="pln">_locale</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="pln">ret</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="pln">create</span><span class="pln">_</span><span class="pln">_createDuration</span><span class="pun">.</span><span class="pln">fn</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">Duration</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">parseIso</span><span class=""> </span><span class="pun">(</span><span class="pln">inp</span><span class="pun">,</span><span class=""> </span><span class="pln">sign</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="com">// We&#39;d normally use ~~inp for this, but unfortunately it also</span><span class="">
        </span><span class="com">// converts floats to ints.</span><span class="">
        </span><span class="com">// inp may be undefined, so careful calling replace on it.</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">res</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">inp</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">parseFloat</span><span class="pun">(</span><span class="pln">inp</span><span class="pun">.</span><span class="pln">replace</span><span class="pun">(</span><span class="str">&#39;,&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;.&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="com">// apply sign while we&#39;re at it</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pun">(</span><span class="pln">isNaN</span><span class="pun">(</span><span class="pln">res</span><span class="pun">)</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">0</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">res</span><span class="pun">)</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">sign</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">positiveMomentsDifference</span><span class="pun">(</span><span class="pln">base</span><span class="pun">,</span><span class=""> </span><span class="pln">other</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">res</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">{</span><span class="pln">milliseconds</span><span class="pun">:</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">months</span><span class="pun">:</span><span class=""> </span><span class="pln">0</span><span class="pun">}</span><span class="pun">;</span><span class="">

        </span><span class="pln">res</span><span class="pun">.</span><span class="pln">months</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">other</span><span class="pun">.</span><span class="pln">month</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">base</span><span class="pun">.</span><span class="pln">month</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class="">
            </span><span class="pun">(</span><span class="pln">other</span><span class="pun">.</span><span class="pln">year</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">base</span><span class="pun">.</span><span class="pln">year</span><span class="pun">(</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">12</span><span class="pun">;</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">base</span><span class="pun">.</span><span class="pln">clone</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">res</span><span class="pun">.</span><span class="pln">months</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;M&#39;</span><span class="pun">)</span><span class="pun">.</span><span class="pln">isAfter</span><span class="pun">(</span><span class="pln">other</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pun">--</span><span class="pln">res</span><span class="pun">.</span><span class="pln">months</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="pln">res</span><span class="pun">.</span><span class="pln">milliseconds</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">+</span><span class="pln">other</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pun">+</span><span class="pun">(</span><span class="pln">base</span><span class="pun">.</span><span class="pln">clone</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">res</span><span class="pun">.</span><span class="pln">months</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;M&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="pln">res</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">momentsDifference</span><span class="pun">(</span><span class="pln">base</span><span class="pun">,</span><span class=""> </span><span class="pln">other</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">res</span><span class="pun">;</span><span class="">
        </span><span class="pln">other</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">cloneWithOffset</span><span class="pun">(</span><span class="pln">other</span><span class="pun">,</span><span class=""> </span><span class="pln">base</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">base</span><span class="pun">.</span><span class="pln">isBefore</span><span class="pun">(</span><span class="pln">other</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">res</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">positiveMomentsDifference</span><span class="pun">(</span><span class="pln">base</span><span class="pun">,</span><span class=""> </span><span class="pln">other</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">res</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">positiveMomentsDifference</span><span class="pun">(</span><span class="pln">other</span><span class="pun">,</span><span class=""> </span><span class="pln">base</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pln">res</span><span class="pun">.</span><span class="pln">milliseconds</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">-</span><span class="pln">res</span><span class="pun">.</span><span class="pln">milliseconds</span><span class="pun">;</span><span class="">
            </span><span class="pln">res</span><span class="pun">.</span><span class="pln">months</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">-</span><span class="pln">res</span><span class="pun">.</span><span class="pln">months</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="pln">res</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">createAdder</span><span class="pun">(</span><span class="pln">direction</span><span class="pun">,</span><span class=""> </span><span class="pln">name</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">val</span><span class="pun">,</span><span class=""> </span><span class="pln">period</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">var</span><span class=""> </span><span class="pln">dur</span><span class="pun">,</span><span class=""> </span><span class="pln">tmp</span><span class="pun">;</span><span class="">
            </span><span class="com">//invert the arguments, but complain about it</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">period</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pun">!</span><span class="pln">isNaN</span><span class="pun">(</span><span class="pun">+</span><span class="pln">period</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">deprecateSimple</span><span class="pun">(</span><span class="pln">name</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;moment().&#39;</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">name</span><span class="">  </span><span class="pun">+</span><span class=""> </span><span class="str">&#39;(period, number) is deprecated. Please use moment().&#39;</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">name</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="str">&#39;(number, period).&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
                </span><span class="pln">tmp</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">val</span><span class="pun">;</span><span class=""> </span><span class="pln">val</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">period</span><span class="pun">;</span><span class=""> </span><span class="pln">period</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">tmp</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">

            </span><span class="pln">val</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">typeof</span><span class=""> </span><span class="pln">val</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;string&#39;</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pun">+</span><span class="pln">val</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">val</span><span class="pun">;</span><span class="">
            </span><span class="pln">dur</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">create</span><span class="pln">_</span><span class="pln">_createDuration</span><span class="pun">(</span><span class="pln">val</span><span class="pun">,</span><span class=""> </span><span class="pln">period</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pln">add</span><span class="pln">_subtract</span><span class="pln">_</span><span class="pln">_addSubtract</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="pln">dur</span><span class="pun">,</span><span class=""> </span><span class="pln">direction</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">add</span><span class="pln">_subtract</span><span class="pln">_</span><span class="pln">_addSubtract</span><span class=""> </span><span class="pun">(</span><span class="pln">mom</span><span class="pun">,</span><span class=""> </span><span class="pln">duration</span><span class="pun">,</span><span class=""> </span><span class="pln">isAdding</span><span class="pun">,</span><span class=""> </span><span class="pln">updateOffset</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">milliseconds</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">duration</span><span class="pun">.</span><span class="pln">_milliseconds</span><span class="pun">,</span><span class="">
            </span><span class="pln">days</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">duration</span><span class="pun">.</span><span class="pln">_days</span><span class="pun">,</span><span class="">
            </span><span class="pln">months</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">duration</span><span class="pun">.</span><span class="pln">_months</span><span class="pun">;</span><span class="">
        </span><span class="pln">updateOffset</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">updateOffset</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="kwd">true</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">updateOffset</span><span class="pun">;</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">milliseconds</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">mom</span><span class="pun">.</span><span class="pln">_d</span><span class="pun">.</span><span class="pln">setTime</span><span class="pun">(</span><span class="pun">+</span><span class="pln">mom</span><span class="pun">.</span><span class="pln">_d</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">milliseconds</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">isAdding</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">days</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">get</span><span class="pln">_set</span><span class="pln">_</span><span class="pln">_set</span><span class="pun">(</span><span class="pln">mom</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;Date&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">get</span><span class="pln">_set</span><span class="pln">_</span><span class="pln">_get</span><span class="pun">(</span><span class="pln">mom</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;Date&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">days</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">isAdding</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">months</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">setMonth</span><span class="pun">(</span><span class="pln">mom</span><span class="pun">,</span><span class=""> </span><span class="pln">get</span><span class="pln">_set</span><span class="pln">_</span><span class="pln">_get</span><span class="pun">(</span><span class="pln">mom</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;Month&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">months</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">isAdding</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">updateOffset</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">updateOffset</span><span class="pun">(</span><span class="pln">mom</span><span class="pun">,</span><span class=""> </span><span class="pln">days</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">months</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">add</span><span class="pln">_subtract</span><span class="pln">_</span><span class="pln">_add</span><span class="">      </span><span class="pun">=</span><span class=""> </span><span class="pln">createAdder</span><span class="pun">(</span><span class="pln">1</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;add&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">add</span><span class="pln">_subtract</span><span class="pln">_</span><span class="pln">_subtract</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">createAdder</span><span class="pun">(</span><span class="pun">-</span><span class="pln">1</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;subtract&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">moment</span><span class="pln">_calendar</span><span class="pln">_</span><span class="pln">_calendar</span><span class=""> </span><span class="pun">(</span><span class="pln">time</span><span class="pun">,</span><span class=""> </span><span class="pln">formats</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="com">// We want to compare the start of today, vs this.</span><span class="">
        </span><span class="com">// Getting start-of-today depends on whether we&#39;re local/utc/offset or not.</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">now</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">time</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class="">
            </span><span class="pln">sod</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">cloneWithOffset</span><span class="pun">(</span><span class="pln">now</span><span class="pun">,</span><span class=""> </span><span class="kwd">this</span><span class="pun">)</span><span class="pun">.</span><span class="pln">startOf</span><span class="pun">(</span><span class="str">&#39;day&#39;</span><span class="pun">)</span><span class="pun">,</span><span class="">
            </span><span class="pln">diff</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">diff</span><span class="pun">(</span><span class="pln">sod</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;days&#39;</span><span class="pun">,</span><span class=""> </span><span class="kwd">true</span><span class="pun">)</span><span class="pun">,</span><span class="">
            </span><span class="pln">format</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">diff</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pun">-</span><span class="pln">6</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="str">&#39;sameElse&#39;</span><span class=""> </span><span class="pun">:</span><span class="">
                </span><span class="pln">diff</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pun">-</span><span class="pln">1</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="str">&#39;lastWeek&#39;</span><span class=""> </span><span class="pun">:</span><span class="">
                </span><span class="pln">diff</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">0</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="str">&#39;lastDay&#39;</span><span class=""> </span><span class="pun">:</span><span class="">
                </span><span class="pln">diff</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">1</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="str">&#39;sameDay&#39;</span><span class=""> </span><span class="pun">:</span><span class="">
                </span><span class="pln">diff</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">2</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="str">&#39;nextDay&#39;</span><span class=""> </span><span class="pun">:</span><span class="">
                </span><span class="pln">diff</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">7</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="str">&#39;nextWeek&#39;</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;sameElse&#39;</span><span class="pun">;</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">format</span><span class="pun">(</span><span class="pln">formats</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">formats</span><span class="pun">[</span><span class="pln">format</span><span class="pun">]</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">localeData</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">calendar</span><span class="pun">(</span><span class="pln">format</span><span class="pun">,</span><span class=""> </span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class="pun">(</span><span class="pln">now</span><span class="pun">)</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">clone</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">new</span><span class=""> </span><span class="pln">Moment</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">isAfter</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">units</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">inputMs</span><span class="pun">;</span><span class="">
        </span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">normalizeUnits</span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">units</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;undefined&#39;</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">units</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;millisecond&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;millisecond&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">isMoment</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pun">+</span><span class="kwd">this</span><span class=""> </span><span class="pun">&gt;</span><span class=""> </span><span class="pun">+</span><span class="pln">input</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">inputMs</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">isMoment</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pun">+</span><span class="pln">input</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pun">+</span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">inputMs</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pun">+</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">clone</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">startOf</span><span class="pun">(</span><span class="pln">units</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">isBefore</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">units</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">inputMs</span><span class="pun">;</span><span class="">
        </span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">normalizeUnits</span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">units</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;undefined&#39;</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">units</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;millisecond&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;millisecond&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">isMoment</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pun">+</span><span class="kwd">this</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pun">+</span><span class="pln">input</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">inputMs</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">isMoment</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pun">+</span><span class="pln">input</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pun">+</span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pun">+</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">clone</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">endOf</span><span class="pun">(</span><span class="pln">units</span><span class="pun">)</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">inputMs</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">isBetween</span><span class=""> </span><span class="pun">(</span><span class="pln">from</span><span class="pun">,</span><span class=""> </span><span class="pln">to</span><span class="pun">,</span><span class=""> </span><span class="pln">units</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isAfter</span><span class="pun">(</span><span class="pln">from</span><span class="pun">,</span><span class=""> </span><span class="pln">units</span><span class="pun">)</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isBefore</span><span class="pun">(</span><span class="pln">to</span><span class="pun">,</span><span class=""> </span><span class="pln">units</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">isSame</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">units</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">inputMs</span><span class="pun">;</span><span class="">
        </span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">normalizeUnits</span><span class="pun">(</span><span class="pln">units</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="str">&#39;millisecond&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;millisecond&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">isMoment</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pun">+</span><span class="kwd">this</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pun">+</span><span class="pln">input</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">inputMs</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">+</span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pun">+</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">clone</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">startOf</span><span class="pun">(</span><span class="pln">units</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">&lt;</span><span class="pun">=</span><span class=""> </span><span class="pln">inputMs</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">inputMs</span><span class=""> </span><span class="pun">&lt;</span><span class="pun">=</span><span class=""> </span><span class="pun">+</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">clone</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">endOf</span><span class="pun">(</span><span class="pln">units</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">diff</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">units</span><span class="pun">,</span><span class=""> </span><span class="pln">asFloat</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">that</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">cloneWithOffset</span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="kwd">this</span><span class="pun">)</span><span class="pun">,</span><span class="">
            </span><span class="pln">zoneDelta</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">(</span><span class="pln">that</span><span class="pun">.</span><span class="pln">utcOffset</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">utcOffset</span><span class="pun">(</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">6e4</span><span class="pun">,</span><span class="">
            </span><span class="pln">delta</span><span class="pun">,</span><span class=""> </span><span class="pln">output</span><span class="pun">;</span><span class="">

        </span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">normalizeUnits</span><span class="pun">(</span><span class="pln">units</span><span class="pun">)</span><span class="pun">;</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;year&#39;</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;month&#39;</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;quarter&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">output</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">monthDiff</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="pln">that</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;quarter&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">output</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">output</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">3</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;year&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">output</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">output</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">12</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">delta</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">that</span><span class="pun">;</span><span class="">
            </span><span class="pln">output</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;second&#39;</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">delta</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">1e3</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="com">// 1000</span><span class="">
                </span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;minute&#39;</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">delta</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">6e4</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="com">// 1000 * 60</span><span class="">
                </span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;hour&#39;</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">delta</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">36e5</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="com">// 1000 * 60 * 60</span><span class="">
                </span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;day&#39;</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pun">(</span><span class="pln">delta</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">zoneDelta</span><span class="pun">)</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">864e5</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="com">// 1000 * 60 * 60 * 24, negate dst</span><span class="">
                </span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;week&#39;</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pun">(</span><span class="pln">delta</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">zoneDelta</span><span class="pun">)</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">6048e5</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="com">// 1000 * 60 * 60 * 24 * 7, negate dst</span><span class="">
                </span><span class="pln">delta</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">asFloat</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">output</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">absFloor</span><span class="pun">(</span><span class="pln">output</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">monthDiff</span><span class=""> </span><span class="pun">(</span><span class="pln">a</span><span class="pun">,</span><span class=""> </span><span class="pln">b</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="com">// difference in months</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">wholeMonthDiff</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">(</span><span class="pun">(</span><span class="pln">b</span><span class="pun">.</span><span class="pln">year</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">a</span><span class="pun">.</span><span class="pln">year</span><span class="pun">(</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">12</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pun">(</span><span class="pln">b</span><span class="pun">.</span><span class="pln">month</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">a</span><span class="pun">.</span><span class="pln">month</span><span class="pun">(</span><span class="pun">)</span><span class="pun">)</span><span class="pun">,</span><span class="">
            </span><span class="com">// b is in (anchor - 1 month, anchor + 1 month)</span><span class="">
            </span><span class="pln">anchor</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">a</span><span class="pun">.</span><span class="pln">clone</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">wholeMonthDiff</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;months&#39;</span><span class="pun">)</span><span class="pun">,</span><span class="">
            </span><span class="pln">anchor2</span><span class="pun">,</span><span class=""> </span><span class="pln">adjust</span><span class="pun">;</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">b</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">anchor</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">0</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">anchor2</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">a</span><span class="pun">.</span><span class="pln">clone</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">wholeMonthDiff</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">1</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;months&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="com">// linear across the month</span><span class="">
            </span><span class="pln">adjust</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">(</span><span class="pln">b</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">anchor</span><span class="pun">)</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pun">(</span><span class="pln">anchor</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">anchor2</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">anchor2</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">a</span><span class="pun">.</span><span class="pln">clone</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">wholeMonthDiff</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">1</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;months&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="com">// linear across the month</span><span class="">
            </span><span class="pln">adjust</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">(</span><span class="pln">b</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">anchor</span><span class="pun">)</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pun">(</span><span class="pln">anchor2</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">anchor</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="pun">-</span><span class="pun">(</span><span class="pln">wholeMonthDiff</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">adjust</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">defaultFormat</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">&#39;YYYY-MM-DDTHH:mm:ssZ&#39;</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">toString</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">clone</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">locale</span><span class="pun">(</span><span class="str">&#39;en&#39;</span><span class="pun">)</span><span class="pun">.</span><span class="pln">format</span><span class="pun">(</span><span class="str">&#39;ddd MMM DD YYYY HH:mm:ss [GMT]ZZ&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">moment</span><span class="pln">_format</span><span class="pln">_</span><span class="pln">_toISOString</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">m</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">clone</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">utc</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">0</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">m</span><span class="pun">.</span><span class="pln">year</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">m</span><span class="pun">.</span><span class="pln">year</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">&lt;</span><span class="pun">=</span><span class=""> </span><span class="pln">9999</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="str">&#39;function&#39;</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">typeof</span><span class=""> </span><span class="pln">Date</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">.</span><span class="pln">toISOString</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="com">// native implementation is ~50x faster, use it when we can</span><span class="">
                </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">toDate</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">toISOString</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">return</span><span class=""> </span><span class="pln">formatMoment</span><span class="pun">(</span><span class="pln">m</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;YYYY-MM-DD[T]HH:mm:ss.SSS[Z]&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">formatMoment</span><span class="pun">(</span><span class="pln">m</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">format</span><span class=""> </span><span class="pun">(</span><span class="pln">inputString</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">output</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">formatMoment</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="pln">inputString</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">defaultFormat</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">localeData</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">postformat</span><span class="pun">(</span><span class="pln">output</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">from</span><span class=""> </span><span class="pun">(</span><span class="pln">time</span><span class="pun">,</span><span class=""> </span><span class="pln">withoutSuffix</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pun">!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isValid</span><span class="pun">(</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">localeData</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">invalidDate</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">create</span><span class="pln">_</span><span class="pln">_createDuration</span><span class="pun">(</span><span class="pun">{</span><span class="pln">to</span><span class="pun">:</span><span class=""> </span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="pln">from</span><span class="pun">:</span><span class=""> </span><span class="pln">time</span><span class="pun">}</span><span class="pun">)</span><span class="pun">.</span><span class="pln">locale</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">locale</span><span class="pun">(</span><span class="pun">)</span><span class="pun">)</span><span class="pun">.</span><span class="pln">humanize</span><span class="pun">(</span><span class="pun">!</span><span class="pln">withoutSuffix</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">fromNow</span><span class=""> </span><span class="pun">(</span><span class="pln">withoutSuffix</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">from</span><span class="pun">(</span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">withoutSuffix</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">to</span><span class=""> </span><span class="pun">(</span><span class="pln">time</span><span class="pun">,</span><span class=""> </span><span class="pln">withoutSuffix</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pun">!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isValid</span><span class="pun">(</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">localeData</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">invalidDate</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">create</span><span class="pln">_</span><span class="pln">_createDuration</span><span class="pun">(</span><span class="pun">{</span><span class="pln">from</span><span class="pun">:</span><span class=""> </span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="pln">to</span><span class="pun">:</span><span class=""> </span><span class="pln">time</span><span class="pun">}</span><span class="pun">)</span><span class="pun">.</span><span class="pln">locale</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">locale</span><span class="pun">(</span><span class="pun">)</span><span class="pun">)</span><span class="pun">.</span><span class="pln">humanize</span><span class="pun">(</span><span class="pun">!</span><span class="pln">withoutSuffix</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">toNow</span><span class=""> </span><span class="pun">(</span><span class="pln">withoutSuffix</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">to</span><span class="pun">(</span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">withoutSuffix</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">locale</span><span class=""> </span><span class="pun">(</span><span class="pln">key</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">newLocaleData</span><span class="pun">;</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">key</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">undefined</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_locale</span><span class="pun">.</span><span class="pln">_abbr</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">newLocaleData</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">locale</span><span class="pln">_locales</span><span class="pln">_</span><span class="pln">_getLocale</span><span class="pun">(</span><span class="pln">key</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">newLocaleData</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_locale</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">newLocaleData</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">lang</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">deprecate</span><span class="pun">(</span><span class="">
        </span><span class="str">&#39;moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.&#39;</span><span class="pun">,</span><span class="">
        </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">key</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">key</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">undefined</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">localeData</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">locale</span><span class="pun">(</span><span class="pln">key</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">localeData</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_locale</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">startOf</span><span class=""> </span><span class="pun">(</span><span class="pln">units</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">normalizeUnits</span><span class="pun">(</span><span class="pln">units</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="com">// the following switch intentionally omits break keywords</span><span class="">
        </span><span class="com">// to utilize falling through the cases.</span><span class="">
        </span><span class="kwd">switch</span><span class=""> </span><span class="pun">(</span><span class="pln">units</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">case</span><span class=""> </span><span class="str">&#39;year&#39;</span><span class="pun">:</span><span class="">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">month</span><span class="pun">(</span><span class="pln">0</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="com">/* falls through */</span><span class="">
        </span><span class="kwd">case</span><span class=""> </span><span class="str">&#39;quarter&#39;</span><span class="pun">:</span><span class="">
        </span><span class="kwd">case</span><span class=""> </span><span class="str">&#39;month&#39;</span><span class="pun">:</span><span class="">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">date</span><span class="pun">(</span><span class="pln">1</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="com">/* falls through */</span><span class="">
        </span><span class="kwd">case</span><span class=""> </span><span class="str">&#39;week&#39;</span><span class="pun">:</span><span class="">
        </span><span class="kwd">case</span><span class=""> </span><span class="str">&#39;isoWeek&#39;</span><span class="pun">:</span><span class="">
        </span><span class="kwd">case</span><span class=""> </span><span class="str">&#39;day&#39;</span><span class="pun">:</span><span class="">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">hours</span><span class="pun">(</span><span class="pln">0</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="com">/* falls through */</span><span class="">
        </span><span class="kwd">case</span><span class=""> </span><span class="str">&#39;hour&#39;</span><span class="pun">:</span><span class="">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">minutes</span><span class="pun">(</span><span class="pln">0</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="com">/* falls through */</span><span class="">
        </span><span class="kwd">case</span><span class=""> </span><span class="str">&#39;minute&#39;</span><span class="pun">:</span><span class="">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">seconds</span><span class="pun">(</span><span class="pln">0</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="com">/* falls through */</span><span class="">
        </span><span class="kwd">case</span><span class=""> </span><span class="str">&#39;second&#39;</span><span class="pun">:</span><span class="">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">milliseconds</span><span class="pun">(</span><span class="pln">0</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="com">// weeks are a special case</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;week&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">weekday</span><span class="pun">(</span><span class="pln">0</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;isoWeek&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isoWeekday</span><span class="pun">(</span><span class="pln">1</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="com">// quarters are also special</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;quarter&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">month</span><span class="pun">(</span><span class="pln">Math</span><span class="pun">.</span><span class="pln">floor</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">month</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">3</span><span class="pun">)</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">3</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">endOf</span><span class=""> </span><span class="pun">(</span><span class="pln">units</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">normalizeUnits</span><span class="pun">(</span><span class="pln">units</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">undefined</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;millisecond&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">startOf</span><span class="pun">(</span><span class="pln">units</span><span class="pun">)</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">1</span><span class="pun">,</span><span class=""> </span><span class="pun">(</span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;isoWeek&#39;</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="str">&#39;week&#39;</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">units</span><span class="pun">)</span><span class="pun">)</span><span class="pun">.</span><span class="pln">subtract</span><span class="pun">(</span><span class="pln">1</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;ms&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">to</span><span class="pln">_type</span><span class="pln">_</span><span class="pln">_valueOf</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pun">+</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_d</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pun">(</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_offset</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">0</span><span class="pun">)</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">60000</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">unix</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">Math</span><span class="pun">.</span><span class="pln">floor</span><span class="pun">(</span><span class="pun">+</span><span class="kwd">this</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">1000</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">toDate</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_offset</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="kwd">new</span><span class=""> </span><span class="pln">Date</span><span class="pun">(</span><span class="pun">+</span><span class="kwd">this</span><span class="pun">)</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_d</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">toArray</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">m</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class="pun">;</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pun">[</span><span class="pln">m</span><span class="pun">.</span><span class="pln">year</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">m</span><span class="pun">.</span><span class="pln">month</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">m</span><span class="pun">.</span><span class="pln">date</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">m</span><span class="pun">.</span><span class="pln">hour</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">m</span><span class="pun">.</span><span class="pln">minute</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">m</span><span class="pun">.</span><span class="pln">second</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">m</span><span class="pun">.</span><span class="pln">millisecond</span><span class="pun">(</span><span class="pun">)</span><span class="pun">]</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">toObject</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">m</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class="pun">;</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">years</span><span class="pun">:</span><span class=""> </span><span class="pln">m</span><span class="pun">.</span><span class="pln">year</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class="">
            </span><span class="pln">months</span><span class="pun">:</span><span class=""> </span><span class="pln">m</span><span class="pun">.</span><span class="pln">month</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class="">
            </span><span class="pln">date</span><span class="pun">:</span><span class=""> </span><span class="pln">m</span><span class="pun">.</span><span class="pln">date</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class="">
            </span><span class="pln">hours</span><span class="pun">:</span><span class=""> </span><span class="pln">m</span><span class="pun">.</span><span class="pln">hours</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class="">
            </span><span class="pln">minutes</span><span class="pun">:</span><span class=""> </span><span class="pln">m</span><span class="pun">.</span><span class="pln">minutes</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class="">
            </span><span class="pln">seconds</span><span class="pun">:</span><span class=""> </span><span class="pln">m</span><span class="pun">.</span><span class="pln">seconds</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class="">
            </span><span class="pln">milliseconds</span><span class="pun">:</span><span class=""> </span><span class="pln">m</span><span class="pun">.</span><span class="pln">milliseconds</span><span class="pun">(</span><span class="pun">)</span><span class="">
        </span><span class="pun">}</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">moment</span><span class="pln">_valid</span><span class="pln">_</span><span class="pln">_isValid</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">valid</span><span class="pln">_</span><span class="pln">_isValid</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">parsingFlags</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">extend</span><span class="pun">(</span><span class="pun">{</span><span class="pun">}</span><span class="pun">,</span><span class=""> </span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">invalidAt</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">)</span><span class="pun">.</span><span class="pln">overflow</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;gg&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">2</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">weekYear</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">%</span><span class=""> </span><span class="pln">100</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;GG&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">2</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">isoWeekYear</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">%</span><span class=""> </span><span class="pln">100</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">addWeekYearFormatToken</span><span class=""> </span><span class="pun">(</span><span class="pln">token</span><span class="pun">,</span><span class=""> </span><span class="pln">getter</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pun">[</span><span class="pln">token</span><span class="pun">,</span><span class=""> </span><span class="pln">token</span><span class="pun">.</span><span class="pln">length</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">getter</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="pln">addWeekYearFormatToken</span><span class="pun">(</span><span class="str">&#39;gggg&#39;</span><span class="pun">,</span><span class="">     </span><span class="str">&#39;weekYear&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addWeekYearFormatToken</span><span class="pun">(</span><span class="str">&#39;ggggg&#39;</span><span class="pun">,</span><span class="">    </span><span class="str">&#39;weekYear&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addWeekYearFormatToken</span><span class="pun">(</span><span class="str">&#39;GGGG&#39;</span><span class="pun">,</span><span class="">  </span><span class="str">&#39;isoWeekYear&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addWeekYearFormatToken</span><span class="pun">(</span><span class="str">&#39;GGGGG&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;isoWeekYear&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// ALIASES</span><span class="">

    </span><span class="pln">addUnitAlias</span><span class="pun">(</span><span class="str">&#39;weekYear&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;gg&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addUnitAlias</span><span class="pun">(</span><span class="str">&#39;isoWeekYear&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;GG&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// PARSING</span><span class="">

    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;G&#39;</span><span class="pun">,</span><span class="">      </span><span class="pln">matchSigned</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;g&#39;</span><span class="pun">,</span><span class="">      </span><span class="pln">matchSigned</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;GG&#39;</span><span class="pun">,</span><span class="">     </span><span class="pln">match1to2</span><span class="pun">,</span><span class=""> </span><span class="pln">match2</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;gg&#39;</span><span class="pun">,</span><span class="">     </span><span class="pln">match1to2</span><span class="pun">,</span><span class=""> </span><span class="pln">match2</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;GGGG&#39;</span><span class="pun">,</span><span class="">   </span><span class="pln">match1to4</span><span class="pun">,</span><span class=""> </span><span class="pln">match4</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;gggg&#39;</span><span class="pun">,</span><span class="">   </span><span class="pln">match1to4</span><span class="pun">,</span><span class=""> </span><span class="pln">match4</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;GGGGG&#39;</span><span class="pun">,</span><span class="">  </span><span class="pln">match1to6</span><span class="pun">,</span><span class=""> </span><span class="pln">match6</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;ggggg&#39;</span><span class="pun">,</span><span class="">  </span><span class="pln">match1to6</span><span class="pun">,</span><span class=""> </span><span class="pln">match6</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="pln">addWeekParseToken</span><span class="pun">(</span><span class="pun">[</span><span class="str">&#39;gggg&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;ggggg&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;GGGG&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;GGGGG&#39;</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">week</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">,</span><span class=""> </span><span class="pln">token</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">week</span><span class="pun">[</span><span class="pln">token</span><span class="pun">.</span><span class="pln">substr</span><span class="pun">(</span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">2</span><span class="pun">)</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">toInt</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="pln">addWeekParseToken</span><span class="pun">(</span><span class="pun">[</span><span class="str">&#39;gg&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;GG&#39;</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">week</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">,</span><span class=""> </span><span class="pln">token</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">week</span><span class="pun">[</span><span class="pln">token</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">parseTwoDigitYear</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// HELPERS</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">weeksInYear</span><span class="pun">(</span><span class="pln">year</span><span class="pun">,</span><span class=""> </span><span class="pln">dow</span><span class="pun">,</span><span class=""> </span><span class="pln">doy</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">weekOfYear</span><span class="pun">(</span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class="pun">(</span><span class="pun">[</span><span class="pln">year</span><span class="pun">,</span><span class=""> </span><span class="pln">11</span><span class="pun">,</span><span class=""> </span><span class="pln">31</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">dow</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">doy</span><span class="pun">]</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">dow</span><span class="pun">,</span><span class=""> </span><span class="pln">doy</span><span class="pun">)</span><span class="pun">.</span><span class="pln">week</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="com">// MOMENTS</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">getSetWeekYear</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">year</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">weekOfYear</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">localeData</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">_week</span><span class="pun">.</span><span class="pln">dow</span><span class="pun">,</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">localeData</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">_week</span><span class="pun">.</span><span class="pln">doy</span><span class="pun">)</span><span class="pun">.</span><span class="pln">year</span><span class="pun">;</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">year</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pun">(</span><span class="pln">input</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">year</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;y&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">getSetISOWeekYear</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">year</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">weekOfYear</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="pln">1</span><span class="pun">,</span><span class=""> </span><span class="pln">4</span><span class="pun">)</span><span class="pun">.</span><span class="pln">year</span><span class="pun">;</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">year</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pun">(</span><span class="pln">input</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">year</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;y&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">getISOWeeksInYear</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">weeksInYear</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">year</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">1</span><span class="pun">,</span><span class=""> </span><span class="pln">4</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">getWeeksInYear</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">weekInfo</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">localeData</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">_week</span><span class="pun">;</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">weeksInYear</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">year</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">weekInfo</span><span class="pun">.</span><span class="pln">dow</span><span class="pun">,</span><span class=""> </span><span class="pln">weekInfo</span><span class="pun">.</span><span class="pln">doy</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="str">&#39;Q&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;quarter&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// ALIASES</span><span class="">

    </span><span class="pln">addUnitAlias</span><span class="pun">(</span><span class="str">&#39;quarter&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;Q&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// PARSING</span><span class="">

    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;Q&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">match1</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addParseToken</span><span class="pun">(</span><span class="str">&#39;Q&#39;</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">array</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">array</span><span class="pun">[</span><span class="pln">MONTH</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">(</span><span class="pln">toInt</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">1</span><span class="pun">)</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">3</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// MOMENTS</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">getSetQuarter</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">Math</span><span class="pun">.</span><span class="pln">ceil</span><span class="pun">(</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">month</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">1</span><span class="pun">)</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">3</span><span class="pun">)</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">month</span><span class="pun">(</span><span class="pun">(</span><span class="pln">input</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">1</span><span class="pun">)</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">3</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">month</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">%</span><span class=""> </span><span class="pln">3</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="str">&#39;D&#39;</span><span class="pun">,</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;DD&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">2</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;Do&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;date&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// ALIASES</span><span class="">

    </span><span class="pln">addUnitAlias</span><span class="pun">(</span><span class="str">&#39;date&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;D&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// PARSING</span><span class="">

    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;D&#39;</span><span class="pun">,</span><span class="">  </span><span class="pln">match1to2</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;DD&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">match1to2</span><span class="pun">,</span><span class=""> </span><span class="pln">match2</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;Do&#39;</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">isStrict</span><span class="pun">,</span><span class=""> </span><span class="pln">locale</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">isStrict</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">locale</span><span class="pun">.</span><span class="pln">_ordinalParse</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">locale</span><span class="pun">.</span><span class="pln">_ordinalParseLenient</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="pln">addParseToken</span><span class="pun">(</span><span class="pun">[</span><span class="str">&#39;D&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;DD&#39;</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">DATE</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addParseToken</span><span class="pun">(</span><span class="str">&#39;Do&#39;</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">array</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">array</span><span class="pun">[</span><span class="pln">DATE</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">toInt</span><span class="pun">(</span><span class="pln">input</span><span class="pun">.</span><span class="pln">match</span><span class="pun">(</span><span class="pln">match1to2</span><span class="pun">)</span><span class="pun">[</span><span class="pln">0</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">10</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// MOMENTS</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">getSetDayOfMonth</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">makeGetSet</span><span class="pun">(</span><span class="str">&#39;Date&#39;</span><span class="pun">,</span><span class=""> </span><span class="kwd">true</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="str">&#39;d&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;do&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;day&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="str">&#39;dd&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">format</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">localeData</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">weekdaysMin</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="pln">format</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="str">&#39;ddd&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">format</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">localeData</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">weekdaysShort</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="pln">format</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="str">&#39;dddd&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">format</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">localeData</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">weekdays</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="pln">format</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="str">&#39;e&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;weekday&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="str">&#39;E&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;isoWeekday&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// ALIASES</span><span class="">

    </span><span class="pln">addUnitAlias</span><span class="pun">(</span><span class="str">&#39;day&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;d&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addUnitAlias</span><span class="pun">(</span><span class="str">&#39;weekday&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;e&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addUnitAlias</span><span class="pun">(</span><span class="str">&#39;isoWeekday&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;E&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// PARSING</span><span class="">

    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;d&#39;</span><span class="pun">,</span><span class="">    </span><span class="pln">match1to2</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;e&#39;</span><span class="pun">,</span><span class="">    </span><span class="pln">match1to2</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;E&#39;</span><span class="pun">,</span><span class="">    </span><span class="pln">match1to2</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;dd&#39;</span><span class="pun">,</span><span class="">   </span><span class="pln">matchWord</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;ddd&#39;</span><span class="pun">,</span><span class="">  </span><span class="pln">matchWord</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;dddd&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">matchWord</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="pln">addWeekParseToken</span><span class="pun">(</span><span class="pun">[</span><span class="str">&#39;dd&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;ddd&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;dddd&#39;</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">week</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">weekday</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_locale</span><span class="pun">.</span><span class="pln">weekdaysParse</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="com">// if we didn&#39;t get a weekday name, mark the date as invalid</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">weekday</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">week</span><span class="pun">.</span><span class="pln">d</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">weekday</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">.</span><span class="pln">invalidWeekday</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">input</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="pln">addWeekParseToken</span><span class="pun">(</span><span class="pun">[</span><span class="str">&#39;d&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;e&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;E&#39;</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">week</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">,</span><span class=""> </span><span class="pln">token</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">week</span><span class="pun">[</span><span class="pln">token</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">toInt</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// HELPERS</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">parseWeekday</span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">locale</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;string&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">input</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pun">!</span><span class="pln">isNaN</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">parseInt</span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">10</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">locale</span><span class="pun">.</span><span class="pln">weekdaysParse</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;number&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">input</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">null</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="com">// LOCALES</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">defaultLocaleWeekdays</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">&#39;Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday&#39;</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="str">&#39;_&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">localeWeekdays</span><span class=""> </span><span class="pun">(</span><span class="pln">m</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_weekdays</span><span class="pun">[</span><span class="pln">m</span><span class="pun">.</span><span class="pln">day</span><span class="pun">(</span><span class="pun">)</span><span class="pun">]</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">defaultLocaleWeekdaysShort</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">&#39;Sun_Mon_Tue_Wed_Thu_Fri_Sat&#39;</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="str">&#39;_&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">localeWeekdaysShort</span><span class=""> </span><span class="pun">(</span><span class="pln">m</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_weekdaysShort</span><span class="pun">[</span><span class="pln">m</span><span class="pun">.</span><span class="pln">day</span><span class="pun">(</span><span class="pun">)</span><span class="pun">]</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">defaultLocaleWeekdaysMin</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">&#39;Su_Mo_Tu_We_Th_Fr_Sa&#39;</span><span class="pun">.</span><span class="pln">split</span><span class="pun">(</span><span class="str">&#39;_&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">localeWeekdaysMin</span><span class=""> </span><span class="pun">(</span><span class="pln">m</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_weekdaysMin</span><span class="pun">[</span><span class="pln">m</span><span class="pun">.</span><span class="pln">day</span><span class="pun">(</span><span class="pun">)</span><span class="pun">]</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">localeWeekdaysParse</span><span class=""> </span><span class="pun">(</span><span class="pln">weekdayName</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">i</span><span class="pun">,</span><span class=""> </span><span class="pln">mom</span><span class="pun">,</span><span class=""> </span><span class="pln">regex</span><span class="pun">;</span><span class="">

        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_weekdaysParse</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_weekdaysParse</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pun">[</span><span class="pun">]</span><span class="pun">;</span><span class="">

        </span><span class="kwd">for</span><span class=""> </span><span class="pun">(</span><span class="pln">i</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class=""> </span><span class="pln">i</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">7</span><span class="pun">;</span><span class=""> </span><span class="pln">i</span><span class="pun">++</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="com">// make the regex if we don&#39;t have it already</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pun">!</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_weekdaysParse</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="pln">mom</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class="pun">(</span><span class="pun">[</span><span class="pln">2000</span><span class="pun">,</span><span class=""> </span><span class="pln">1</span><span class="pun">]</span><span class="pun">)</span><span class="pun">.</span><span class="pln">day</span><span class="pun">(</span><span class="pln">i</span><span class="pun">)</span><span class="pun">;</span><span class="">
                </span><span class="pln">regex</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">&#39;^&#39;</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">weekdays</span><span class="pun">(</span><span class="pln">mom</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="str">&#39;|^&#39;</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">weekdaysShort</span><span class="pun">(</span><span class="pln">mom</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="str">&#39;|^&#39;</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">weekdaysMin</span><span class="pun">(</span><span class="pln">mom</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
                </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_weekdaysParse</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">new</span><span class=""> </span><span class="pln">RegExp</span><span class="pun">(</span><span class="pln">regex</span><span class="pun">.</span><span class="pln">replace</span><span class="pun">(</span><span class="str">&#39;.&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;i&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
            </span><span class="com">// test the regex</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_weekdaysParse</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">.</span><span class="pln">test</span><span class="pun">(</span><span class="pln">weekdayName</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">return</span><span class=""> </span><span class="pln">i</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="com">// MOMENTS</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">getSetDayOfWeek</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">day</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_isUTC</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_d</span><span class="pun">.</span><span class="pln">getUTCDay</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_d</span><span class="pun">.</span><span class="pln">getDay</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">parseWeekday</span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">localeData</span><span class="pun">(</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">input</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">day</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;d&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">day</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">getSetLocaleDayOfWeek</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">weekday</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">day</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">7</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">localeData</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">_week</span><span class="pun">.</span><span class="pln">dow</span><span class="pun">)</span><span class=""> </span><span class="pun">%</span><span class=""> </span><span class="pln">7</span><span class="pun">;</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">weekday</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">add</span><span class="pun">(</span><span class="pln">input</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">weekday</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;d&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">getSetISODayOfWeek</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="com">// behaves the same as moment#day except</span><span class="">
        </span><span class="com">// as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)</span><span class="">
        </span><span class="com">// as a setter, sunday should belong to the previous week.</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">day</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">7</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">day</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">day</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">%</span><span class=""> </span><span class="pln">7</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">input</span><span class=""> </span><span class="pun">-</span><span class=""> </span><span class="pln">7</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="str">&#39;H&#39;</span><span class="pun">,</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;HH&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">2</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;hour&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="str">&#39;h&#39;</span><span class="pun">,</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;hh&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">2</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">hours</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">%</span><span class=""> </span><span class="pln">12</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">12</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">meridiem</span><span class=""> </span><span class="pun">(</span><span class="pln">token</span><span class="pun">,</span><span class=""> </span><span class="pln">lowercase</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="pln">token</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">localeData</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">meridiem</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">hours</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">minutes</span><span class="pun">(</span><span class="pun">)</span><span class="pun">,</span><span class=""> </span><span class="pln">lowercase</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="pln">meridiem</span><span class="pun">(</span><span class="str">&#39;a&#39;</span><span class="pun">,</span><span class=""> </span><span class="kwd">true</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">meridiem</span><span class="pun">(</span><span class="str">&#39;A&#39;</span><span class="pun">,</span><span class=""> </span><span class="kwd">false</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// ALIASES</span><span class="">

    </span><span class="pln">addUnitAlias</span><span class="pun">(</span><span class="str">&#39;hour&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;h&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// PARSING</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">matchMeridiem</span><span class=""> </span><span class="pun">(</span><span class="pln">isStrict</span><span class="pun">,</span><span class=""> </span><span class="pln">locale</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">locale</span><span class="pun">.</span><span class="pln">_meridiemParse</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;a&#39;</span><span class="pun">,</span><span class="">  </span><span class="pln">matchMeridiem</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;A&#39;</span><span class="pun">,</span><span class="">  </span><span class="pln">matchMeridiem</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;H&#39;</span><span class="pun">,</span><span class="">  </span><span class="pln">match1to2</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;h&#39;</span><span class="pun">,</span><span class="">  </span><span class="pln">match1to2</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;HH&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">match1to2</span><span class="pun">,</span><span class=""> </span><span class="pln">match2</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;hh&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">match1to2</span><span class="pun">,</span><span class=""> </span><span class="pln">match2</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="pln">addParseToken</span><span class="pun">(</span><span class="pun">[</span><span class="str">&#39;H&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;HH&#39;</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">HOUR</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addParseToken</span><span class="pun">(</span><span class="pun">[</span><span class="str">&#39;a&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;A&#39;</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">array</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_isPm</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_locale</span><span class="pun">.</span><span class="pln">isPM</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_meridiem</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">input</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addParseToken</span><span class="pun">(</span><span class="pun">[</span><span class="str">&#39;h&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;hh&#39;</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">array</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">array</span><span class="pun">[</span><span class="pln">HOUR</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">toInt</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pln">getParsingFlags</span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class="pun">.</span><span class="pln">bigHour</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">true</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// LOCALES</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">localeIsPM</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="com">// IE8 Quirks Mode &amp; IE7 Standards Mode do not allow accessing strings like arrays</span><span class="">
        </span><span class="com">// Using charAt should be more compatible.</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pun">(</span><span class="pun">(</span><span class="pln">input</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">.</span><span class="pln">toLowerCase</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">charAt</span><span class="pun">(</span><span class="pln">0</span><span class="pun">)</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;p&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">defaultLocaleMeridiemParse</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">/[ap]\.?m?\.?/i</span><span class="pun">;</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">localeMeridiem</span><span class=""> </span><span class="pun">(</span><span class="pln">hours</span><span class="pun">,</span><span class=""> </span><span class="pln">minutes</span><span class="pun">,</span><span class=""> </span><span class="pln">isLower</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">hours</span><span class=""> </span><span class="pun">&gt;</span><span class=""> </span><span class="pln">11</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">isLower</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="str">&#39;pm&#39;</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;PM&#39;</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">isLower</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="str">&#39;am&#39;</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;AM&#39;</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">


    </span><span class="com">// MOMENTS</span><span class="">

    </span><span class="com">// Setting the hour should keep the time, because the user explicitly</span><span class="">
    </span><span class="com">// specified which hour he wants. So trying to maintain the same hour (in</span><span class="">
    </span><span class="com">// a new timezone) makes sense. Adding/subtracting hours does not follow</span><span class="">
    </span><span class="com">// this rule.</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">getSetHour</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">makeGetSet</span><span class="pun">(</span><span class="str">&#39;Hours&#39;</span><span class="pun">,</span><span class=""> </span><span class="kwd">true</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="str">&#39;m&#39;</span><span class="pun">,</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;mm&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">2</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;minute&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// ALIASES</span><span class="">

    </span><span class="pln">addUnitAlias</span><span class="pun">(</span><span class="str">&#39;minute&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;m&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// PARSING</span><span class="">

    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;m&#39;</span><span class="pun">,</span><span class="">  </span><span class="pln">match1to2</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;mm&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">match1to2</span><span class="pun">,</span><span class=""> </span><span class="pln">match2</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addParseToken</span><span class="pun">(</span><span class="pun">[</span><span class="str">&#39;m&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;mm&#39;</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">MINUTE</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// MOMENTS</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">getSetMinute</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">makeGetSet</span><span class="pun">(</span><span class="str">&#39;Minutes&#39;</span><span class="pun">,</span><span class=""> </span><span class="kwd">false</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="str">&#39;s&#39;</span><span class="pun">,</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;ss&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">2</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;second&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// ALIASES</span><span class="">

    </span><span class="pln">addUnitAlias</span><span class="pun">(</span><span class="str">&#39;second&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;s&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// PARSING</span><span class="">

    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;s&#39;</span><span class="pun">,</span><span class="">  </span><span class="pln">match1to2</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;ss&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">match1to2</span><span class="pun">,</span><span class=""> </span><span class="pln">match2</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addParseToken</span><span class="pun">(</span><span class="pun">[</span><span class="str">&#39;s&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;ss&#39;</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">SECOND</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// MOMENTS</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">getSetSecond</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">makeGetSet</span><span class="pun">(</span><span class="str">&#39;Seconds&#39;</span><span class="pun">,</span><span class=""> </span><span class="kwd">false</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="str">&#39;S&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pun">~</span><span class="pun">~</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">millisecond</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">100</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;SS&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">2</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pun">~</span><span class="pun">~</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">millisecond</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">10</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;SSS&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">3</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;millisecond&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;SSSS&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">4</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">millisecond</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">10</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;SSSSS&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">5</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">millisecond</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">100</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;SSSSSS&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">6</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">millisecond</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">1000</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;SSSSSSS&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">7</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">millisecond</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">10000</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;SSSSSSSS&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">8</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">millisecond</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">100000</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;SSSSSSSSS&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">9</span><span class="pun">]</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">millisecond</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">1000000</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">


    </span><span class="com">// ALIASES</span><span class="">

    </span><span class="pln">addUnitAlias</span><span class="pun">(</span><span class="str">&#39;millisecond&#39;</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;ms&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// PARSING</span><span class="">

    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;S&#39;</span><span class="pun">,</span><span class="">    </span><span class="pln">match1to3</span><span class="pun">,</span><span class=""> </span><span class="pln">match1</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;SS&#39;</span><span class="pun">,</span><span class="">   </span><span class="pln">match1to3</span><span class="pun">,</span><span class=""> </span><span class="pln">match2</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;SSS&#39;</span><span class="pun">,</span><span class="">  </span><span class="pln">match1to3</span><span class="pun">,</span><span class=""> </span><span class="pln">match3</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">token</span><span class="pun">;</span><span class="">
    </span><span class="kwd">for</span><span class=""> </span><span class="pun">(</span><span class="pln">token</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">&#39;SSSS&#39;</span><span class="pun">;</span><span class=""> </span><span class="pln">token</span><span class="pun">.</span><span class="pln">length</span><span class=""> </span><span class="pun">&lt;</span><span class="pun">=</span><span class=""> </span><span class="pln">9</span><span class="pun">;</span><span class=""> </span><span class="pln">token</span><span class=""> </span><span class="pun">+</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;S&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="pln">token</span><span class="pun">,</span><span class=""> </span><span class="pln">matchUnsigned</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">parseMs</span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">array</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">array</span><span class="pun">[</span><span class="pln">MILLISECOND</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">toInt</span><span class="pun">(</span><span class="pun">(</span><span class="str">&#39;0.&#39;</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">1000</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">for</span><span class=""> </span><span class="pun">(</span><span class="pln">token</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">&#39;S&#39;</span><span class="pun">;</span><span class=""> </span><span class="pln">token</span><span class="pun">.</span><span class="pln">length</span><span class=""> </span><span class="pun">&lt;</span><span class="pun">=</span><span class=""> </span><span class="pln">9</span><span class="pun">;</span><span class=""> </span><span class="pln">token</span><span class=""> </span><span class="pun">+</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;S&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">addParseToken</span><span class="pun">(</span><span class="pln">token</span><span class="pun">,</span><span class=""> </span><span class="pln">parseMs</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">
    </span><span class="com">// MOMENTS</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">getSetMillisecond</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">makeGetSet</span><span class="pun">(</span><span class="str">&#39;Milliseconds&#39;</span><span class="pun">,</span><span class=""> </span><span class="kwd">false</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="str">&#39;z&#39;</span><span class="pun">,</span><span class="">  </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;zoneAbbr&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="str">&#39;zz&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;zoneName&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// MOMENTS</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">getZoneAbbr</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_isUTC</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="str">&#39;UTC&#39;</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">getZoneName</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_isUTC</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="str">&#39;Coordinated Universal Time&#39;</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">Moment</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">;</span><span class="">

    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">add</span><span class="">          </span><span class="pun">=</span><span class=""> </span><span class="pln">add</span><span class="pln">_subtract</span><span class="pln">_</span><span class="pln">_add</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">calendar</span><span class="">     </span><span class="pun">=</span><span class=""> </span><span class="pln">moment</span><span class="pln">_calendar</span><span class="pln">_</span><span class="pln">_calendar</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">clone</span><span class="">        </span><span class="pun">=</span><span class=""> </span><span class="pln">clone</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">diff</span><span class="">         </span><span class="pun">=</span><span class=""> </span><span class="pln">diff</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">endOf</span><span class="">        </span><span class="pun">=</span><span class=""> </span><span class="pln">endOf</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">format</span><span class="">       </span><span class="pun">=</span><span class=""> </span><span class="pln">format</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">from</span><span class="">         </span><span class="pun">=</span><span class=""> </span><span class="pln">from</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">fromNow</span><span class="">      </span><span class="pun">=</span><span class=""> </span><span class="pln">fromNow</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">to</span><span class="">           </span><span class="pun">=</span><span class=""> </span><span class="pln">to</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">toNow</span><span class="">        </span><span class="pun">=</span><span class=""> </span><span class="pln">toNow</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">get</span><span class="">          </span><span class="pun">=</span><span class=""> </span><span class="pln">getSet</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">invalidAt</span><span class="">    </span><span class="pun">=</span><span class=""> </span><span class="pln">invalidAt</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">isAfter</span><span class="">      </span><span class="pun">=</span><span class=""> </span><span class="pln">isAfter</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">isBefore</span><span class="">     </span><span class="pun">=</span><span class=""> </span><span class="pln">isBefore</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">isBetween</span><span class="">    </span><span class="pun">=</span><span class=""> </span><span class="pln">isBetween</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">isSame</span><span class="">       </span><span class="pun">=</span><span class=""> </span><span class="pln">isSame</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">isValid</span><span class="">      </span><span class="pun">=</span><span class=""> </span><span class="pln">moment</span><span class="pln">_valid</span><span class="pln">_</span><span class="pln">_isValid</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">lang</span><span class="">         </span><span class="pun">=</span><span class=""> </span><span class="pln">lang</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">locale</span><span class="">       </span><span class="pun">=</span><span class=""> </span><span class="pln">locale</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">localeData</span><span class="">   </span><span class="pun">=</span><span class=""> </span><span class="pln">localeData</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">max</span><span class="">          </span><span class="pun">=</span><span class=""> </span><span class="pln">prototypeMax</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">min</span><span class="">          </span><span class="pun">=</span><span class=""> </span><span class="pln">prototypeMin</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">parsingFlags</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">parsingFlags</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">set</span><span class="">          </span><span class="pun">=</span><span class=""> </span><span class="pln">getSet</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">startOf</span><span class="">      </span><span class="pun">=</span><span class=""> </span><span class="pln">startOf</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">subtract</span><span class="">     </span><span class="pun">=</span><span class=""> </span><span class="pln">add</span><span class="pln">_subtract</span><span class="pln">_</span><span class="pln">_subtract</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">toArray</span><span class="">      </span><span class="pun">=</span><span class=""> </span><span class="pln">toArray</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">toObject</span><span class="">     </span><span class="pun">=</span><span class=""> </span><span class="pln">toObject</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">toDate</span><span class="">       </span><span class="pun">=</span><span class=""> </span><span class="pln">toDate</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">toISOString</span><span class="">  </span><span class="pun">=</span><span class=""> </span><span class="pln">moment</span><span class="pln">_format</span><span class="pln">_</span><span class="pln">_toISOString</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">toJSON</span><span class="">       </span><span class="pun">=</span><span class=""> </span><span class="pln">moment</span><span class="pln">_format</span><span class="pln">_</span><span class="pln">_toISOString</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">toString</span><span class="">     </span><span class="pun">=</span><span class=""> </span><span class="pln">toString</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">unix</span><span class="">         </span><span class="pun">=</span><span class=""> </span><span class="pln">unix</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">valueOf</span><span class="">      </span><span class="pun">=</span><span class=""> </span><span class="pln">to</span><span class="pln">_type</span><span class="pln">_</span><span class="pln">_valueOf</span><span class="pun">;</span><span class="">

    </span><span class="com">// Year</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">year</span><span class="">       </span><span class="pun">=</span><span class=""> </span><span class="pln">getSetYear</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">isLeapYear</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">getIsLeapYear</span><span class="pun">;</span><span class="">

    </span><span class="com">// Week Year</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">weekYear</span><span class="">    </span><span class="pun">=</span><span class=""> </span><span class="pln">getSetWeekYear</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">isoWeekYear</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">getSetISOWeekYear</span><span class="pun">;</span><span class="">

    </span><span class="com">// Quarter</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">quarter</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">quarters</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">getSetQuarter</span><span class="pun">;</span><span class="">

    </span><span class="com">// Month</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">month</span><span class="">       </span><span class="pun">=</span><span class=""> </span><span class="pln">getSetMonth</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">daysInMonth</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">getDaysInMonth</span><span class="pun">;</span><span class="">

    </span><span class="com">// Week</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">week</span><span class="">           </span><span class="pun">=</span><span class=""> </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">weeks</span><span class="">        </span><span class="pun">=</span><span class=""> </span><span class="pln">getSetWeek</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">isoWeek</span><span class="">        </span><span class="pun">=</span><span class=""> </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">isoWeeks</span><span class="">     </span><span class="pun">=</span><span class=""> </span><span class="pln">getSetISOWeek</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">weeksInYear</span><span class="">    </span><span class="pun">=</span><span class=""> </span><span class="pln">getWeeksInYear</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">isoWeeksInYear</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">getISOWeeksInYear</span><span class="pun">;</span><span class="">

    </span><span class="com">// Day</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">date</span><span class="">       </span><span class="pun">=</span><span class=""> </span><span class="pln">getSetDayOfMonth</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">day</span><span class="">        </span><span class="pun">=</span><span class=""> </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">days</span><span class="">             </span><span class="pun">=</span><span class=""> </span><span class="pln">getSetDayOfWeek</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">weekday</span><span class="">    </span><span class="pun">=</span><span class=""> </span><span class="pln">getSetLocaleDayOfWeek</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">isoWeekday</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">getSetISODayOfWeek</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">dayOfYear</span><span class="">  </span><span class="pun">=</span><span class=""> </span><span class="pln">getSetDayOfYear</span><span class="pun">;</span><span class="">

    </span><span class="com">// Hour</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">hour</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">hours</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">getSetHour</span><span class="pun">;</span><span class="">

    </span><span class="com">// Minute</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">minute</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">minutes</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">getSetMinute</span><span class="pun">;</span><span class="">

    </span><span class="com">// Second</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">second</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">seconds</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">getSetSecond</span><span class="pun">;</span><span class="">

    </span><span class="com">// Millisecond</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">millisecond</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">milliseconds</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">getSetMillisecond</span><span class="pun">;</span><span class="">

    </span><span class="com">// Offset</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">utcOffset</span><span class="">            </span><span class="pun">=</span><span class=""> </span><span class="pln">getSetOffset</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">utc</span><span class="">                  </span><span class="pun">=</span><span class=""> </span><span class="pln">setOffsetToUTC</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">local</span><span class="">                </span><span class="pun">=</span><span class=""> </span><span class="pln">setOffsetToLocal</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">parseZone</span><span class="">            </span><span class="pun">=</span><span class=""> </span><span class="pln">setOffsetToParsedOffset</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">hasAlignedHourOffset</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">hasAlignedHourOffset</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">isDST</span><span class="">                </span><span class="pun">=</span><span class=""> </span><span class="pln">isDaylightSavingTime</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">isDSTShifted</span><span class="">         </span><span class="pun">=</span><span class=""> </span><span class="pln">isDaylightSavingTimeShifted</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">isLocal</span><span class="">              </span><span class="pun">=</span><span class=""> </span><span class="pln">isLocal</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">isUtcOffset</span><span class="">          </span><span class="pun">=</span><span class=""> </span><span class="pln">isUtcOffset</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">isUtc</span><span class="">                </span><span class="pun">=</span><span class=""> </span><span class="pln">isUtc</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">isUTC</span><span class="">                </span><span class="pun">=</span><span class=""> </span><span class="pln">isUtc</span><span class="pun">;</span><span class="">

    </span><span class="com">// Timezone</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">zoneAbbr</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">getZoneAbbr</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">zoneName</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">getZoneName</span><span class="pun">;</span><span class="">

    </span><span class="com">// Deprecations</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">dates</span><span class="">  </span><span class="pun">=</span><span class=""> </span><span class="pln">deprecate</span><span class="pun">(</span><span class="str">&#39;dates accessor is deprecated. Use date instead.&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">getSetDayOfMonth</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">months</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">deprecate</span><span class="pun">(</span><span class="str">&#39;months accessor is deprecated. Use month instead&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">getSetMonth</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">years</span><span class="">  </span><span class="pun">=</span><span class=""> </span><span class="pln">deprecate</span><span class="pun">(</span><span class="str">&#39;years accessor is deprecated. Use year instead&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">getSetYear</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">zone</span><span class="">   </span><span class="pun">=</span><span class=""> </span><span class="pln">deprecate</span><span class="pun">(</span><span class="str">&#39;moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">getSetZone</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">momentPrototype</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">momentPrototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">moment</span><span class="pln">_</span><span class="pln">_createUnix</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class="pun">(</span><span class="pln">input</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">1000</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">moment</span><span class="pln">_</span><span class="pln">_createInZone</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class="pun">.</span><span class="pln">apply</span><span class="pun">(</span><span class="kwd">null</span><span class="pun">,</span><span class=""> </span><span class="pln">arguments</span><span class="pun">)</span><span class="pun">.</span><span class="pln">parseZone</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">defaultCalendar</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">sameDay</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;[Today at] LT&#39;</span><span class="pun">,</span><span class="">
        </span><span class="pln">nextDay</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;[Tomorrow at] LT&#39;</span><span class="pun">,</span><span class="">
        </span><span class="pln">nextWeek</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;dddd [at] LT&#39;</span><span class="pun">,</span><span class="">
        </span><span class="pln">lastDay</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;[Yesterday at] LT&#39;</span><span class="pun">,</span><span class="">
        </span><span class="pln">lastWeek</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;[Last] dddd [at] LT&#39;</span><span class="pun">,</span><span class="">
        </span><span class="pln">sameElse</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;L&#39;</span><span class="">
    </span><span class="pun">}</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">locale</span><span class="pln">_calendar</span><span class="pln">_</span><span class="pln">_calendar</span><span class=""> </span><span class="pun">(</span><span class="pln">key</span><span class="pun">,</span><span class=""> </span><span class="pln">mom</span><span class="pun">,</span><span class=""> </span><span class="pln">now</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">output</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_calendar</span><span class="pun">[</span><span class="pln">key</span><span class="pun">]</span><span class="pun">;</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">typeof</span><span class=""> </span><span class="pln">output</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;function&#39;</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">output</span><span class="pun">.</span><span class="pln">call</span><span class="pun">(</span><span class="pln">mom</span><span class="pun">,</span><span class=""> </span><span class="pln">now</span><span class="pun">)</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">output</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">defaultLongDateFormat</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">LTS</span><span class="">  </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;h:mm:ss A&#39;</span><span class="pun">,</span><span class="">
        </span><span class="pln">LT</span><span class="">   </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;h:mm A&#39;</span><span class="pun">,</span><span class="">
        </span><span class="pln">L</span><span class="">    </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;MM/DD/YYYY&#39;</span><span class="pun">,</span><span class="">
        </span><span class="pln">LL</span><span class="">   </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;MMMM D, YYYY&#39;</span><span class="pun">,</span><span class="">
        </span><span class="pln">LLL</span><span class="">  </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;MMMM D, YYYY h:mm A&#39;</span><span class="pun">,</span><span class="">
        </span><span class="pln">LLLL</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;dddd, MMMM D, YYYY h:mm A&#39;</span><span class="">
    </span><span class="pun">}</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">longDateFormat</span><span class=""> </span><span class="pun">(</span><span class="pln">key</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">format</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_longDateFormat</span><span class="pun">[</span><span class="pln">key</span><span class="pun">]</span><span class="pun">,</span><span class="">
            </span><span class="pln">formatUpper</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_longDateFormat</span><span class="pun">[</span><span class="pln">key</span><span class="pun">.</span><span class="pln">toUpperCase</span><span class="pun">(</span><span class="pun">)</span><span class="pun">]</span><span class="pun">;</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">format</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pun">!</span><span class="pln">formatUpper</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">format</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_longDateFormat</span><span class="pun">[</span><span class="pln">key</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">formatUpper</span><span class="pun">.</span><span class="pln">replace</span><span class="pun">(</span><span class="str">/MMMM|MM|DD|dddd/g</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">val</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">val</span><span class="pun">.</span><span class="pln">slice</span><span class="pun">(</span><span class="pln">1</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_longDateFormat</span><span class="pun">[</span><span class="pln">key</span><span class="pun">]</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">defaultInvalidDate</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">&#39;Invalid date&#39;</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">invalidDate</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_invalidDate</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">defaultOrdinal</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">&#39;%d&#39;</span><span class="pun">;</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">defaultOrdinalParse</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">/\d{1,2}/</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">ordinal</span><span class=""> </span><span class="pun">(</span><span class="pln">number</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_ordinal</span><span class="pun">.</span><span class="pln">replace</span><span class="pun">(</span><span class="str">&#39;%d&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">number</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">preParsePostFormat</span><span class=""> </span><span class="pun">(</span><span class="pln">string</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">string</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">defaultRelativeTime</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">future</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;in %s&#39;</span><span class="pun">,</span><span class="">
        </span><span class="pln">past</span><span class="">   </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;%s ago&#39;</span><span class="pun">,</span><span class="">
        </span><span class="pln">s</span><span class="">  </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;a few seconds&#39;</span><span class="pun">,</span><span class="">
        </span><span class="pln">m</span><span class="">  </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;a minute&#39;</span><span class="pun">,</span><span class="">
        </span><span class="pln">mm</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;%d minutes&#39;</span><span class="pun">,</span><span class="">
        </span><span class="pln">h</span><span class="">  </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;an hour&#39;</span><span class="pun">,</span><span class="">
        </span><span class="pln">hh</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;%d hours&#39;</span><span class="pun">,</span><span class="">
        </span><span class="pln">d</span><span class="">  </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;a day&#39;</span><span class="pun">,</span><span class="">
        </span><span class="pln">dd</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;%d days&#39;</span><span class="pun">,</span><span class="">
        </span><span class="pln">M</span><span class="">  </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;a month&#39;</span><span class="pun">,</span><span class="">
        </span><span class="pln">MM</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;%d months&#39;</span><span class="pun">,</span><span class="">
        </span><span class="pln">y</span><span class="">  </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;a year&#39;</span><span class="pun">,</span><span class="">
        </span><span class="pln">yy</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;%d years&#39;</span><span class="">
    </span><span class="pun">}</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">relative</span><span class="pln">_</span><span class="pln">_relativeTime</span><span class=""> </span><span class="pun">(</span><span class="pln">number</span><span class="pun">,</span><span class=""> </span><span class="pln">withoutSuffix</span><span class="pun">,</span><span class=""> </span><span class="pln">string</span><span class="pun">,</span><span class=""> </span><span class="pln">isFuture</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">output</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_relativeTime</span><span class="pun">[</span><span class="pln">string</span><span class="pun">]</span><span class="pun">;</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">output</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;function&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">?</span><span class="">
            </span><span class="pln">output</span><span class="pun">(</span><span class="pln">number</span><span class="pun">,</span><span class=""> </span><span class="pln">withoutSuffix</span><span class="pun">,</span><span class=""> </span><span class="pln">string</span><span class="pun">,</span><span class=""> </span><span class="pln">isFuture</span><span class="pun">)</span><span class=""> </span><span class="pun">:</span><span class="">
            </span><span class="pln">output</span><span class="pun">.</span><span class="pln">replace</span><span class="pun">(</span><span class="str">/%d/i</span><span class="pun">,</span><span class=""> </span><span class="pln">number</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">pastFuture</span><span class=""> </span><span class="pun">(</span><span class="pln">diff</span><span class="pun">,</span><span class=""> </span><span class="pln">output</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">format</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_relativeTime</span><span class="pun">[</span><span class="pln">diff</span><span class=""> </span><span class="pun">&gt;</span><span class=""> </span><span class="pln">0</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="str">&#39;future&#39;</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;past&#39;</span><span class="pun">]</span><span class="pun">;</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">typeof</span><span class=""> </span><span class="pln">format</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;function&#39;</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">format</span><span class="pun">(</span><span class="pln">output</span><span class="pun">)</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">format</span><span class="pun">.</span><span class="pln">replace</span><span class="pun">(</span><span class="str">/%s/i</span><span class="pun">,</span><span class=""> </span><span class="pln">output</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">locale</span><span class="pln">_set</span><span class="pln">_</span><span class="pln">_set</span><span class=""> </span><span class="pun">(</span><span class="pln">config</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">prop</span><span class="pun">,</span><span class=""> </span><span class="pln">i</span><span class="pun">;</span><span class="">
        </span><span class="kwd">for</span><span class=""> </span><span class="pun">(</span><span class="pln">i</span><span class=""> </span><span class="kwd">in</span><span class=""> </span><span class="pln">config</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">prop</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">config</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pun">;</span><span class="">
            </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">prop</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;function&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">this</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">prop</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">this</span><span class="pun">[</span><span class="str">&#39;_&#39;</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">i</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">prop</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="com">// Lenient ordinal parsing accepts just a number in addition to</span><span class="">
        </span><span class="com">// number + (possibly) stuff coming from _ordinalParseLenient.</span><span class="">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_ordinalParseLenient</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">new</span><span class=""> </span><span class="pln">RegExp</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_ordinalParse</span><span class="pun">.</span><span class="pln">source</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="str">&#39;|&#39;</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pun">(</span><span class="str">/\d{1,2}/</span><span class="pun">)</span><span class="pun">.</span><span class="pln">source</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">Locale</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">;</span><span class="">

    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">_calendar</span><span class="">       </span><span class="pun">=</span><span class=""> </span><span class="pln">defaultCalendar</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">calendar</span><span class="">        </span><span class="pun">=</span><span class=""> </span><span class="pln">locale</span><span class="pln">_calendar</span><span class="pln">_</span><span class="pln">_calendar</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">_longDateFormat</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">defaultLongDateFormat</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">longDateFormat</span><span class="">  </span><span class="pun">=</span><span class=""> </span><span class="pln">longDateFormat</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">_invalidDate</span><span class="">    </span><span class="pun">=</span><span class=""> </span><span class="pln">defaultInvalidDate</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">invalidDate</span><span class="">     </span><span class="pun">=</span><span class=""> </span><span class="pln">invalidDate</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">_ordinal</span><span class="">        </span><span class="pun">=</span><span class=""> </span><span class="pln">defaultOrdinal</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">ordinal</span><span class="">         </span><span class="pun">=</span><span class=""> </span><span class="pln">ordinal</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">_ordinalParse</span><span class="">   </span><span class="pun">=</span><span class=""> </span><span class="pln">defaultOrdinalParse</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">preparse</span><span class="">        </span><span class="pun">=</span><span class=""> </span><span class="pln">preParsePostFormat</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">postformat</span><span class="">      </span><span class="pun">=</span><span class=""> </span><span class="pln">preParsePostFormat</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">_relativeTime</span><span class="">   </span><span class="pun">=</span><span class=""> </span><span class="pln">defaultRelativeTime</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">relativeTime</span><span class="">    </span><span class="pun">=</span><span class=""> </span><span class="pln">relative</span><span class="pln">_</span><span class="pln">_relativeTime</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">pastFuture</span><span class="">      </span><span class="pun">=</span><span class=""> </span><span class="pln">pastFuture</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">set</span><span class="">             </span><span class="pun">=</span><span class=""> </span><span class="pln">locale</span><span class="pln">_set</span><span class="pln">_</span><span class="pln">_set</span><span class="pun">;</span><span class="">

    </span><span class="com">// Month</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">months</span><span class="">       </span><span class="pun">=</span><span class="">        </span><span class="pln">localeMonths</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">_months</span><span class="">      </span><span class="pun">=</span><span class=""> </span><span class="pln">defaultLocaleMonths</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">monthsShort</span><span class="">  </span><span class="pun">=</span><span class="">        </span><span class="pln">localeMonthsShort</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">_monthsShort</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">defaultLocaleMonthsShort</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">monthsParse</span><span class="">  </span><span class="pun">=</span><span class="">        </span><span class="pln">localeMonthsParse</span><span class="pun">;</span><span class="">

    </span><span class="com">// Week</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">week</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">localeWeek</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">_week</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">defaultLocaleWeek</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">firstDayOfYear</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">localeFirstDayOfYear</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">firstDayOfWeek</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">localeFirstDayOfWeek</span><span class="pun">;</span><span class="">

    </span><span class="com">// Day of Week</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">weekdays</span><span class="">       </span><span class="pun">=</span><span class="">        </span><span class="pln">localeWeekdays</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">_weekdays</span><span class="">      </span><span class="pun">=</span><span class=""> </span><span class="pln">defaultLocaleWeekdays</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">weekdaysMin</span><span class="">    </span><span class="pun">=</span><span class="">        </span><span class="pln">localeWeekdaysMin</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">_weekdaysMin</span><span class="">   </span><span class="pun">=</span><span class=""> </span><span class="pln">defaultLocaleWeekdaysMin</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">weekdaysShort</span><span class="">  </span><span class="pun">=</span><span class="">        </span><span class="pln">localeWeekdaysShort</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">_weekdaysShort</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">defaultLocaleWeekdaysShort</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">weekdaysParse</span><span class="">  </span><span class="pun">=</span><span class="">        </span><span class="pln">localeWeekdaysParse</span><span class="pun">;</span><span class="">

    </span><span class="com">// Hours</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">isPM</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">localeIsPM</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">_meridiemParse</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">defaultLocaleMeridiemParse</span><span class="pun">;</span><span class="">
    </span><span class="pln">prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">meridiem</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">localeMeridiem</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">lists</span><span class="pln">_</span><span class="pln">_get</span><span class=""> </span><span class="pun">(</span><span class="pln">format</span><span class="pun">,</span><span class=""> </span><span class="pln">index</span><span class="pun">,</span><span class=""> </span><span class="pln">field</span><span class="pun">,</span><span class=""> </span><span class="pln">setter</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">locale</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">locale</span><span class="pln">_locales</span><span class="pln">_</span><span class="pln">_getLocale</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">utc</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">create</span><span class="pln">_utc</span><span class="pln">_</span><span class="pln">_createUTC</span><span class="pun">(</span><span class="pun">)</span><span class="pun">.</span><span class="pln">set</span><span class="pun">(</span><span class="pln">setter</span><span class="pun">,</span><span class=""> </span><span class="pln">index</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">locale</span><span class="pun">[</span><span class="pln">field</span><span class="pun">]</span><span class="pun">(</span><span class="pln">utc</span><span class="pun">,</span><span class=""> </span><span class="pln">format</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">list</span><span class=""> </span><span class="pun">(</span><span class="pln">format</span><span class="pun">,</span><span class=""> </span><span class="pln">index</span><span class="pun">,</span><span class=""> </span><span class="pln">field</span><span class="pun">,</span><span class=""> </span><span class="pln">count</span><span class="pun">,</span><span class=""> </span><span class="pln">setter</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="kwd">typeof</span><span class=""> </span><span class="pln">format</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;number&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">index</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">format</span><span class="pun">;</span><span class="">
            </span><span class="pln">format</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">undefined</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="pln">format</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">format</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">;</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">index</span><span class=""> </span><span class="pun">!</span><span class="pun">=</span><span class=""> </span><span class="kwd">null</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">lists</span><span class="pln">_</span><span class="pln">_get</span><span class="pun">(</span><span class="pln">format</span><span class="pun">,</span><span class=""> </span><span class="pln">index</span><span class="pun">,</span><span class=""> </span><span class="pln">field</span><span class="pun">,</span><span class=""> </span><span class="pln">setter</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">var</span><span class=""> </span><span class="pln">i</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">out</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">[</span><span class="pun">]</span><span class="pun">;</span><span class="">
        </span><span class="kwd">for</span><span class=""> </span><span class="pun">(</span><span class="pln">i</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class=""> </span><span class="pln">i</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">count</span><span class="pun">;</span><span class=""> </span><span class="pln">i</span><span class="pun">++</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">out</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">lists</span><span class="pln">_</span><span class="pln">_get</span><span class="pun">(</span><span class="pln">format</span><span class="pun">,</span><span class=""> </span><span class="pln">i</span><span class="pun">,</span><span class=""> </span><span class="pln">field</span><span class="pun">,</span><span class=""> </span><span class="pln">setter</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">out</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">lists</span><span class="pln">_</span><span class="pln">_listMonths</span><span class=""> </span><span class="pun">(</span><span class="pln">format</span><span class="pun">,</span><span class=""> </span><span class="pln">index</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">list</span><span class="pun">(</span><span class="pln">format</span><span class="pun">,</span><span class=""> </span><span class="pln">index</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;months&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">12</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;month&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">lists</span><span class="pln">_</span><span class="pln">_listMonthsShort</span><span class=""> </span><span class="pun">(</span><span class="pln">format</span><span class="pun">,</span><span class=""> </span><span class="pln">index</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">list</span><span class="pun">(</span><span class="pln">format</span><span class="pun">,</span><span class=""> </span><span class="pln">index</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;monthsShort&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">12</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;month&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">lists</span><span class="pln">_</span><span class="pln">_listWeekdays</span><span class=""> </span><span class="pun">(</span><span class="pln">format</span><span class="pun">,</span><span class=""> </span><span class="pln">index</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">list</span><span class="pun">(</span><span class="pln">format</span><span class="pun">,</span><span class=""> </span><span class="pln">index</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;weekdays&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">7</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;day&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">lists</span><span class="pln">_</span><span class="pln">_listWeekdaysShort</span><span class=""> </span><span class="pun">(</span><span class="pln">format</span><span class="pun">,</span><span class=""> </span><span class="pln">index</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">list</span><span class="pun">(</span><span class="pln">format</span><span class="pun">,</span><span class=""> </span><span class="pln">index</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;weekdaysShort&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">7</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;day&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">lists</span><span class="pln">_</span><span class="pln">_listWeekdaysMin</span><span class=""> </span><span class="pun">(</span><span class="pln">format</span><span class="pun">,</span><span class=""> </span><span class="pln">index</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">list</span><span class="pun">(</span><span class="pln">format</span><span class="pun">,</span><span class=""> </span><span class="pln">index</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;weekdaysMin&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">7</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;day&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="pln">locale</span><span class="pln">_locales</span><span class="pln">_</span><span class="pln">_getSetGlobalLocale</span><span class="pun">(</span><span class="str">&#39;en&#39;</span><span class="pun">,</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">ordinalParse</span><span class="pun">:</span><span class=""> </span><span class="str">/\d{1,2}(th|st|nd|rd)/</span><span class="pun">,</span><span class="">
        </span><span class="pln">ordinal</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">number</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">var</span><span class=""> </span><span class="pln">b</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">number</span><span class=""> </span><span class="pun">%</span><span class=""> </span><span class="pln">10</span><span class="pun">,</span><span class="">
                </span><span class="pln">output</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">(</span><span class="pln">toInt</span><span class="pun">(</span><span class="pln">number</span><span class=""> </span><span class="pun">%</span><span class=""> </span><span class="pln">100</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">10</span><span class="pun">)</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">1</span><span class="pun">)</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="str">&#39;th&#39;</span><span class=""> </span><span class="pun">:</span><span class="">
                </span><span class="pun">(</span><span class="pln">b</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">1</span><span class="pun">)</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="str">&#39;st&#39;</span><span class=""> </span><span class="pun">:</span><span class="">
                </span><span class="pun">(</span><span class="pln">b</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">2</span><span class="pun">)</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="str">&#39;nd&#39;</span><span class=""> </span><span class="pun">:</span><span class="">
                </span><span class="pun">(</span><span class="pln">b</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">3</span><span class="pun">)</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="str">&#39;rd&#39;</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;th&#39;</span><span class="pun">;</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">number</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">output</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// Side effect imports</span><span class="">
    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">lang</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">deprecate</span><span class="pun">(</span><span class="str">&#39;moment.lang is deprecated. Use moment.locale instead.&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">locale</span><span class="pln">_locales</span><span class="pln">_</span><span class="pln">_getSetGlobalLocale</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">langData</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">deprecate</span><span class="pun">(</span><span class="str">&#39;moment.langData is deprecated. Use moment.localeData instead.&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">locale</span><span class="pln">_locales</span><span class="pln">_</span><span class="pln">_getLocale</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">mathAbs</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">Math</span><span class="pun">.</span><span class="pln">abs</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">duration</span><span class="pln">_abs</span><span class="pln">_</span><span class="pln">_abs</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">data</span><span class="">           </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_data</span><span class="pun">;</span><span class="">

        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_milliseconds</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">mathAbs</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_milliseconds</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_days</span><span class="">         </span><span class="pun">=</span><span class=""> </span><span class="pln">mathAbs</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_days</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_months</span><span class="">       </span><span class="pun">=</span><span class=""> </span><span class="pln">mathAbs</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_months</span><span class="pun">)</span><span class="pun">;</span><span class="">

        </span><span class="pln">data</span><span class="pun">.</span><span class="pln">milliseconds</span><span class="">  </span><span class="pun">=</span><span class=""> </span><span class="pln">mathAbs</span><span class="pun">(</span><span class="pln">data</span><span class="pun">.</span><span class="pln">milliseconds</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pln">data</span><span class="pun">.</span><span class="pln">seconds</span><span class="">       </span><span class="pun">=</span><span class=""> </span><span class="pln">mathAbs</span><span class="pun">(</span><span class="pln">data</span><span class="pun">.</span><span class="pln">seconds</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pln">data</span><span class="pun">.</span><span class="pln">minutes</span><span class="">       </span><span class="pun">=</span><span class=""> </span><span class="pln">mathAbs</span><span class="pun">(</span><span class="pln">data</span><span class="pun">.</span><span class="pln">minutes</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pln">data</span><span class="pun">.</span><span class="pln">hours</span><span class="">         </span><span class="pun">=</span><span class=""> </span><span class="pln">mathAbs</span><span class="pun">(</span><span class="pln">data</span><span class="pun">.</span><span class="pln">hours</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pln">data</span><span class="pun">.</span><span class="pln">months</span><span class="">        </span><span class="pun">=</span><span class=""> </span><span class="pln">mathAbs</span><span class="pun">(</span><span class="pln">data</span><span class="pun">.</span><span class="pln">months</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pln">data</span><span class="pun">.</span><span class="pln">years</span><span class="">         </span><span class="pun">=</span><span class=""> </span><span class="pln">mathAbs</span><span class="pun">(</span><span class="pln">data</span><span class="pun">.</span><span class="pln">years</span><span class="pun">)</span><span class="pun">;</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">duration</span><span class="pln">_add</span><span class="pln">_subtract</span><span class="pln">_</span><span class="pln">_addSubtract</span><span class=""> </span><span class="pun">(</span><span class="pln">duration</span><span class="pun">,</span><span class=""> </span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">value</span><span class="pun">,</span><span class=""> </span><span class="pln">direction</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">other</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">create</span><span class="pln">_</span><span class="pln">_createDuration</span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">value</span><span class="pun">)</span><span class="pun">;</span><span class="">

        </span><span class="pln">duration</span><span class="pun">.</span><span class="pln">_milliseconds</span><span class=""> </span><span class="pun">+</span><span class="pun">=</span><span class=""> </span><span class="pln">direction</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">other</span><span class="pun">.</span><span class="pln">_milliseconds</span><span class="pun">;</span><span class="">
        </span><span class="pln">duration</span><span class="pun">.</span><span class="pln">_days</span><span class="">         </span><span class="pun">+</span><span class="pun">=</span><span class=""> </span><span class="pln">direction</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">other</span><span class="pun">.</span><span class="pln">_days</span><span class="pun">;</span><span class="">
        </span><span class="pln">duration</span><span class="pun">.</span><span class="pln">_months</span><span class="">       </span><span class="pun">+</span><span class="pun">=</span><span class=""> </span><span class="pln">direction</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">other</span><span class="pun">.</span><span class="pln">_months</span><span class="pun">;</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="pln">duration</span><span class="pun">.</span><span class="pln">_bubble</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="com">// supports only 2.0-style add(1, &#39;s&#39;) or add(duration)</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">duration</span><span class="pln">_add</span><span class="pln">_subtract</span><span class="pln">_</span><span class="pln">_add</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">value</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">duration</span><span class="pln">_add</span><span class="pln">_subtract</span><span class="pln">_</span><span class="pln">_addSubtract</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">value</span><span class="pun">,</span><span class=""> </span><span class="pln">1</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="com">// supports only 2.0-style subtract(1, &#39;s&#39;) or subtract(duration)</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">duration</span><span class="pln">_add</span><span class="pln">_subtract</span><span class="pln">_</span><span class="pln">_subtract</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">value</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">duration</span><span class="pln">_add</span><span class="pln">_subtract</span><span class="pln">_</span><span class="pln">_addSubtract</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">value</span><span class="pun">,</span><span class=""> </span><span class="pun">-</span><span class="pln">1</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">absCeil</span><span class=""> </span><span class="pun">(</span><span class="pln">number</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">number</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">0</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">Math</span><span class="pun">.</span><span class="pln">floor</span><span class="pun">(</span><span class="pln">number</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">Math</span><span class="pun">.</span><span class="pln">ceil</span><span class="pun">(</span><span class="pln">number</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">bubble</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">milliseconds</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_milliseconds</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">days</span><span class="">         </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_days</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">months</span><span class="">       </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_months</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">data</span><span class="">         </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_data</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">seconds</span><span class="pun">,</span><span class=""> </span><span class="pln">minutes</span><span class="pun">,</span><span class=""> </span><span class="pln">hours</span><span class="pun">,</span><span class=""> </span><span class="pln">years</span><span class="pun">,</span><span class=""> </span><span class="pln">monthsFromDays</span><span class="pun">;</span><span class="">

        </span><span class="com">// if we have a mix of positive and negative values, bubble down first</span><span class="">
        </span><span class="com">// check: https://github.com/moment/moment/issues/2166</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pun">!</span><span class="pun">(</span><span class="pun">(</span><span class="pln">milliseconds</span><span class=""> </span><span class="pun">&gt;</span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">days</span><span class=""> </span><span class="pun">&gt;</span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">months</span><span class=""> </span><span class="pun">&gt;</span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">)</span><span class=""> </span><span class="pun">||</span><span class="">
                </span><span class="pun">(</span><span class="pln">milliseconds</span><span class=""> </span><span class="pun">&lt;</span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">days</span><span class=""> </span><span class="pun">&lt;</span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pln">months</span><span class=""> </span><span class="pun">&lt;</span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">)</span><span class="pun">)</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">milliseconds</span><span class=""> </span><span class="pun">+</span><span class="pun">=</span><span class=""> </span><span class="pln">absCeil</span><span class="pun">(</span><span class="pln">monthsToDays</span><span class="pun">(</span><span class="pln">months</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">days</span><span class="pun">)</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">864e5</span><span class="pun">;</span><span class="">
            </span><span class="pln">days</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class="">
            </span><span class="pln">months</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="com">// The following code bubbles up values, see the tests for</span><span class="">
        </span><span class="com">// examples of what that means.</span><span class="">
        </span><span class="pln">data</span><span class="pun">.</span><span class="pln">milliseconds</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">milliseconds</span><span class=""> </span><span class="pun">%</span><span class=""> </span><span class="pln">1000</span><span class="pun">;</span><span class="">

        </span><span class="pln">seconds</span><span class="">           </span><span class="pun">=</span><span class=""> </span><span class="pln">absFloor</span><span class="pun">(</span><span class="pln">milliseconds</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">1000</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pln">data</span><span class="pun">.</span><span class="pln">seconds</span><span class="">      </span><span class="pun">=</span><span class=""> </span><span class="pln">seconds</span><span class=""> </span><span class="pun">%</span><span class=""> </span><span class="pln">60</span><span class="pun">;</span><span class="">

        </span><span class="pln">minutes</span><span class="">           </span><span class="pun">=</span><span class=""> </span><span class="pln">absFloor</span><span class="pun">(</span><span class="pln">seconds</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">60</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pln">data</span><span class="pun">.</span><span class="pln">minutes</span><span class="">      </span><span class="pun">=</span><span class=""> </span><span class="pln">minutes</span><span class=""> </span><span class="pun">%</span><span class=""> </span><span class="pln">60</span><span class="pun">;</span><span class="">

        </span><span class="pln">hours</span><span class="">             </span><span class="pun">=</span><span class=""> </span><span class="pln">absFloor</span><span class="pun">(</span><span class="pln">minutes</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">60</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pln">data</span><span class="pun">.</span><span class="pln">hours</span><span class="">        </span><span class="pun">=</span><span class=""> </span><span class="pln">hours</span><span class=""> </span><span class="pun">%</span><span class=""> </span><span class="pln">24</span><span class="pun">;</span><span class="">

        </span><span class="pln">days</span><span class=""> </span><span class="pun">+</span><span class="pun">=</span><span class=""> </span><span class="pln">absFloor</span><span class="pun">(</span><span class="pln">hours</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">24</span><span class="pun">)</span><span class="pun">;</span><span class="">

        </span><span class="com">// convert days to months</span><span class="">
        </span><span class="pln">monthsFromDays</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">absFloor</span><span class="pun">(</span><span class="pln">daysToMonths</span><span class="pun">(</span><span class="pln">days</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pln">months</span><span class=""> </span><span class="pun">+</span><span class="pun">=</span><span class=""> </span><span class="pln">monthsFromDays</span><span class="pun">;</span><span class="">
        </span><span class="pln">days</span><span class=""> </span><span class="pun">-</span><span class="pun">=</span><span class=""> </span><span class="pln">absCeil</span><span class="pun">(</span><span class="pln">monthsToDays</span><span class="pun">(</span><span class="pln">monthsFromDays</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">

        </span><span class="com">// 12 months -&gt; 1 year</span><span class="">
        </span><span class="pln">years</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">absFloor</span><span class="pun">(</span><span class="pln">months</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">12</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pln">months</span><span class=""> </span><span class="pun">%</span><span class="pun">=</span><span class=""> </span><span class="pln">12</span><span class="pun">;</span><span class="">

        </span><span class="pln">data</span><span class="pun">.</span><span class="pln">days</span><span class="">   </span><span class="pun">=</span><span class=""> </span><span class="pln">days</span><span class="pun">;</span><span class="">
        </span><span class="pln">data</span><span class="pun">.</span><span class="pln">months</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">months</span><span class="pun">;</span><span class="">
        </span><span class="pln">data</span><span class="pun">.</span><span class="pln">years</span><span class="">  </span><span class="pun">=</span><span class=""> </span><span class="pln">years</span><span class="pun">;</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">daysToMonths</span><span class=""> </span><span class="pun">(</span><span class="pln">days</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="com">// 400 years have 146097 days (taking into account leap year rules)</span><span class="">
        </span><span class="com">// 400 years have 12 months === 4800</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">days</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">4800</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">146097</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">monthsToDays</span><span class=""> </span><span class="pun">(</span><span class="pln">months</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="com">// the reverse of daysToMonths</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">months</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">146097</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">4800</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">as</span><span class=""> </span><span class="pun">(</span><span class="pln">units</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">days</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">months</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">milliseconds</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_milliseconds</span><span class="pun">;</span><span class="">

        </span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">normalizeUnits</span><span class="pun">(</span><span class="pln">units</span><span class="pun">)</span><span class="pun">;</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;month&#39;</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;year&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">days</span><span class="">   </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_days</span><span class="">   </span><span class="pun">+</span><span class=""> </span><span class="pln">milliseconds</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">864e5</span><span class="pun">;</span><span class="">
            </span><span class="pln">months</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_months</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">daysToMonths</span><span class="pun">(</span><span class="pln">days</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="str">&#39;month&#39;</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">months</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="pln">months</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">12</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class=""> </span><span class="kwd">else</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="com">// handle milliseconds separately because of floating point math errors (issue #1867)</span><span class="">
            </span><span class="pln">days</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_days</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">Math</span><span class="pun">.</span><span class="pln">round</span><span class="pun">(</span><span class="pln">monthsToDays</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_months</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="kwd">switch</span><span class=""> </span><span class="pun">(</span><span class="pln">units</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
                </span><span class="kwd">case</span><span class=""> </span><span class="str">&#39;week&#39;</span><span class="">   </span><span class="pun">:</span><span class=""> </span><span class="kwd">return</span><span class=""> </span><span class="pln">days</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">7</span><span class="">     </span><span class="pun">+</span><span class=""> </span><span class="pln">milliseconds</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">6048e5</span><span class="pun">;</span><span class="">
                </span><span class="kwd">case</span><span class=""> </span><span class="str">&#39;day&#39;</span><span class="">    </span><span class="pun">:</span><span class=""> </span><span class="kwd">return</span><span class=""> </span><span class="pln">days</span><span class="">         </span><span class="pun">+</span><span class=""> </span><span class="pln">milliseconds</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">864e5</span><span class="pun">;</span><span class="">
                </span><span class="kwd">case</span><span class=""> </span><span class="str">&#39;hour&#39;</span><span class="">   </span><span class="pun">:</span><span class=""> </span><span class="kwd">return</span><span class=""> </span><span class="pln">days</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">24</span><span class="">    </span><span class="pun">+</span><span class=""> </span><span class="pln">milliseconds</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">36e5</span><span class="pun">;</span><span class="">
                </span><span class="kwd">case</span><span class=""> </span><span class="str">&#39;minute&#39;</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="kwd">return</span><span class=""> </span><span class="pln">days</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">1440</span><span class="">  </span><span class="pun">+</span><span class=""> </span><span class="pln">milliseconds</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">6e4</span><span class="pun">;</span><span class="">
                </span><span class="kwd">case</span><span class=""> </span><span class="str">&#39;second&#39;</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="kwd">return</span><span class=""> </span><span class="pln">days</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">86400</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">milliseconds</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">1000</span><span class="pun">;</span><span class="">
                </span><span class="com">// Math.floor prevents floating point math errors here</span><span class="">
                </span><span class="kwd">case</span><span class=""> </span><span class="str">&#39;millisecond&#39;</span><span class="pun">:</span><span class=""> </span><span class="kwd">return</span><span class=""> </span><span class="pln">Math</span><span class="pun">.</span><span class="pln">floor</span><span class="pun">(</span><span class="pln">days</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">864e5</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">milliseconds</span><span class="pun">;</span><span class="">
                </span><span class="kwd">default</span><span class="pun">:</span><span class=""> </span><span class="kwd">throw</span><span class=""> </span><span class="kwd">new</span><span class=""> </span><span class="pln">Error</span><span class="pun">(</span><span class="str">&#39;Unknown unit &#39;</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="pln">units</span><span class="pun">)</span><span class="pun">;</span><span class="">
            </span><span class="pun">}</span><span class="">
        </span><span class="pun">}</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="com">// TODO: Use this.as(&#39;ms&#39;)?</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">duration</span><span class="pln">_as</span><span class="pln">_</span><span class="pln">_valueOf</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pun">(</span><span class="">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_milliseconds</span><span class=""> </span><span class="pun">+</span><span class="">
            </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_days</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">864e5</span><span class=""> </span><span class="pun">+</span><span class="">
            </span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_months</span><span class=""> </span><span class="pun">%</span><span class=""> </span><span class="pln">12</span><span class="pun">)</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">2592e6</span><span class=""> </span><span class="pun">+</span><span class="">
            </span><span class="pln">toInt</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_months</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">12</span><span class="pun">)</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">31536e6</span><span class="">
        </span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">makeAs</span><span class=""> </span><span class="pun">(</span><span class="pln">alias</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">as</span><span class="pun">(</span><span class="pln">alias</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">asMilliseconds</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">makeAs</span><span class="pun">(</span><span class="str">&#39;ms&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">asSeconds</span><span class="">      </span><span class="pun">=</span><span class=""> </span><span class="pln">makeAs</span><span class="pun">(</span><span class="str">&#39;s&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">asMinutes</span><span class="">      </span><span class="pun">=</span><span class=""> </span><span class="pln">makeAs</span><span class="pun">(</span><span class="str">&#39;m&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">asHours</span><span class="">        </span><span class="pun">=</span><span class=""> </span><span class="pln">makeAs</span><span class="pun">(</span><span class="str">&#39;h&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">asDays</span><span class="">         </span><span class="pun">=</span><span class=""> </span><span class="pln">makeAs</span><span class="pun">(</span><span class="str">&#39;d&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">asWeeks</span><span class="">        </span><span class="pun">=</span><span class=""> </span><span class="pln">makeAs</span><span class="pun">(</span><span class="str">&#39;w&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">asMonths</span><span class="">       </span><span class="pun">=</span><span class=""> </span><span class="pln">makeAs</span><span class="pun">(</span><span class="str">&#39;M&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">asYears</span><span class="">        </span><span class="pun">=</span><span class=""> </span><span class="pln">makeAs</span><span class="pun">(</span><span class="str">&#39;y&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">duration</span><span class="pln">_get</span><span class="pln">_</span><span class="pln">_get</span><span class=""> </span><span class="pun">(</span><span class="pln">units</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">units</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">normalizeUnits</span><span class="pun">(</span><span class="pln">units</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">[</span><span class="pln">units</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="str">&#39;s&#39;</span><span class="pun">]</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">makeGetter</span><span class="pun">(</span><span class="pln">name</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_data</span><span class="pun">[</span><span class="pln">name</span><span class="pun">]</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">milliseconds</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">makeGetter</span><span class="pun">(</span><span class="str">&#39;milliseconds&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">seconds</span><span class="">      </span><span class="pun">=</span><span class=""> </span><span class="pln">makeGetter</span><span class="pun">(</span><span class="str">&#39;seconds&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">minutes</span><span class="">      </span><span class="pun">=</span><span class=""> </span><span class="pln">makeGetter</span><span class="pun">(</span><span class="str">&#39;minutes&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">hours</span><span class="">        </span><span class="pun">=</span><span class=""> </span><span class="pln">makeGetter</span><span class="pun">(</span><span class="str">&#39;hours&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">days</span><span class="">         </span><span class="pun">=</span><span class=""> </span><span class="pln">makeGetter</span><span class="pun">(</span><span class="str">&#39;days&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">months</span><span class="">       </span><span class="pun">=</span><span class=""> </span><span class="pln">makeGetter</span><span class="pun">(</span><span class="str">&#39;months&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">years</span><span class="">        </span><span class="pun">=</span><span class=""> </span><span class="pln">makeGetter</span><span class="pun">(</span><span class="str">&#39;years&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">weeks</span><span class=""> </span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">absFloor</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">days</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">7</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">round</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">Math</span><span class="pun">.</span><span class="pln">round</span><span class="pun">;</span><span class="">
    </span><span class="kwd">var</span><span class=""> </span><span class="pln">thresholds</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">s</span><span class="pun">:</span><span class=""> </span><span class="pln">45</span><span class="pun">,</span><span class="">  </span><span class="com">// seconds to minute</span><span class="">
        </span><span class="pln">m</span><span class="pun">:</span><span class=""> </span><span class="pln">45</span><span class="pun">,</span><span class="">  </span><span class="com">// minutes to hour</span><span class="">
        </span><span class="pln">h</span><span class="pun">:</span><span class=""> </span><span class="pln">22</span><span class="pun">,</span><span class="">  </span><span class="com">// hours to day</span><span class="">
        </span><span class="pln">d</span><span class="pun">:</span><span class=""> </span><span class="pln">26</span><span class="pun">,</span><span class="">  </span><span class="com">// days to month</span><span class="">
        </span><span class="pln">M</span><span class="pun">:</span><span class=""> </span><span class="pln">11</span><span class="">   </span><span class="com">// months to year</span><span class="">
    </span><span class="pun">}</span><span class="pun">;</span><span class="">

    </span><span class="com">// helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">substituteTimeAgo</span><span class="pun">(</span><span class="pln">string</span><span class="pun">,</span><span class=""> </span><span class="pln">number</span><span class="pun">,</span><span class=""> </span><span class="pln">withoutSuffix</span><span class="pun">,</span><span class=""> </span><span class="pln">isFuture</span><span class="pun">,</span><span class=""> </span><span class="pln">locale</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">locale</span><span class="pun">.</span><span class="pln">relativeTime</span><span class="pun">(</span><span class="pln">number</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">1</span><span class="pun">,</span><span class=""> </span><span class="pun">!</span><span class="pun">!</span><span class="pln">withoutSuffix</span><span class="pun">,</span><span class=""> </span><span class="pln">string</span><span class="pun">,</span><span class=""> </span><span class="pln">isFuture</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">duration</span><span class="pln">_humanize</span><span class="pln">_</span><span class="pln">_relativeTime</span><span class=""> </span><span class="pun">(</span><span class="pln">posNegDuration</span><span class="pun">,</span><span class=""> </span><span class="pln">withoutSuffix</span><span class="pun">,</span><span class=""> </span><span class="pln">locale</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">duration</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">create</span><span class="pln">_</span><span class="pln">_createDuration</span><span class="pun">(</span><span class="pln">posNegDuration</span><span class="pun">)</span><span class="pun">.</span><span class="pln">abs</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">seconds</span><span class="">  </span><span class="pun">=</span><span class=""> </span><span class="pln">round</span><span class="pun">(</span><span class="pln">duration</span><span class="pun">.</span><span class="pln">as</span><span class="pun">(</span><span class="str">&#39;s&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">minutes</span><span class="">  </span><span class="pun">=</span><span class=""> </span><span class="pln">round</span><span class="pun">(</span><span class="pln">duration</span><span class="pun">.</span><span class="pln">as</span><span class="pun">(</span><span class="str">&#39;m&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">hours</span><span class="">    </span><span class="pun">=</span><span class=""> </span><span class="pln">round</span><span class="pun">(</span><span class="pln">duration</span><span class="pun">.</span><span class="pln">as</span><span class="pun">(</span><span class="str">&#39;h&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">days</span><span class="">     </span><span class="pun">=</span><span class=""> </span><span class="pln">round</span><span class="pun">(</span><span class="pln">duration</span><span class="pun">.</span><span class="pln">as</span><span class="pun">(</span><span class="str">&#39;d&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">months</span><span class="">   </span><span class="pun">=</span><span class=""> </span><span class="pln">round</span><span class="pun">(</span><span class="pln">duration</span><span class="pun">.</span><span class="pln">as</span><span class="pun">(</span><span class="str">&#39;M&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">years</span><span class="">    </span><span class="pun">=</span><span class=""> </span><span class="pln">round</span><span class="pun">(</span><span class="pln">duration</span><span class="pun">.</span><span class="pln">as</span><span class="pun">(</span><span class="str">&#39;y&#39;</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">

        </span><span class="kwd">var</span><span class=""> </span><span class="pln">a</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">seconds</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">thresholds</span><span class="pun">.</span><span class="pln">s</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;s&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">seconds</span><span class="pun">]</span><span class="">  </span><span class="pun">||</span><span class="">
                </span><span class="pln">minutes</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">1</span><span class="">          </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;m&#39;</span><span class="pun">]</span><span class="">           </span><span class="pun">||</span><span class="">
                </span><span class="pln">minutes</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">thresholds</span><span class="pun">.</span><span class="pln">m</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;mm&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">minutes</span><span class="pun">]</span><span class=""> </span><span class="pun">||</span><span class="">
                </span><span class="pln">hours</span><span class="">   </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">1</span><span class="">          </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;h&#39;</span><span class="pun">]</span><span class="">           </span><span class="pun">||</span><span class="">
                </span><span class="pln">hours</span><span class="">   </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">thresholds</span><span class="pun">.</span><span class="pln">h</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;hh&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">hours</span><span class="pun">]</span><span class="">   </span><span class="pun">||</span><span class="">
                </span><span class="pln">days</span><span class="">    </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">1</span><span class="">          </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;d&#39;</span><span class="pun">]</span><span class="">           </span><span class="pun">||</span><span class="">
                </span><span class="pln">days</span><span class="">    </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">thresholds</span><span class="pun">.</span><span class="pln">d</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;dd&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">days</span><span class="pun">]</span><span class="">    </span><span class="pun">||</span><span class="">
                </span><span class="pln">months</span><span class="">  </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">1</span><span class="">          </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;M&#39;</span><span class="pun">]</span><span class="">           </span><span class="pun">||</span><span class="">
                </span><span class="pln">months</span><span class="">  </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">thresholds</span><span class="pun">.</span><span class="pln">M</span><span class=""> </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;MM&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">months</span><span class="pun">]</span><span class="">  </span><span class="pun">||</span><span class="">
                </span><span class="pln">years</span><span class="">   </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="pln">1</span><span class="">          </span><span class="pun">&amp;&amp;</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;y&#39;</span><span class="pun">]</span><span class="">           </span><span class="pun">||</span><span class=""> </span><span class="pun">[</span><span class="str">&#39;yy&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">years</span><span class="pun">]</span><span class="pun">;</span><span class="">

        </span><span class="pln">a</span><span class="pun">[</span><span class="pln">2</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">withoutSuffix</span><span class="pun">;</span><span class="">
        </span><span class="pln">a</span><span class="pun">[</span><span class="pln">3</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pun">+</span><span class="pln">posNegDuration</span><span class=""> </span><span class="pun">&gt;</span><span class=""> </span><span class="pln">0</span><span class="pun">;</span><span class="">
        </span><span class="pln">a</span><span class="pun">[</span><span class="pln">4</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">locale</span><span class="pun">;</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="pln">substituteTimeAgo</span><span class="pun">.</span><span class="pln">apply</span><span class="pun">(</span><span class="kwd">null</span><span class="pun">,</span><span class=""> </span><span class="pln">a</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="com">// This function allows you to set a threshold for relative time strings</span><span class="">
    </span><span class="kwd">function</span><span class=""> </span><span class="pln">duration</span><span class="pln">_humanize</span><span class="pln">_</span><span class="pln">_getSetRelativeTimeThreshold</span><span class=""> </span><span class="pun">(</span><span class="pln">threshold</span><span class="pun">,</span><span class=""> </span><span class="pln">limit</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">thresholds</span><span class="pun">[</span><span class="pln">threshold</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">undefined</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="kwd">false</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">limit</span><span class=""> </span><span class="pun">=</span><span class="pun">=</span><span class="pun">=</span><span class=""> </span><span class="kwd">undefined</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="pln">thresholds</span><span class="pun">[</span><span class="pln">threshold</span><span class="pun">]</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">
        </span><span class="pln">thresholds</span><span class="pun">[</span><span class="pln">threshold</span><span class="pun">]</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">limit</span><span class="pun">;</span><span class="">
        </span><span class="kwd">return</span><span class=""> </span><span class="kwd">true</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">humanize</span><span class=""> </span><span class="pun">(</span><span class="pln">withSuffix</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">locale</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">localeData</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">output</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">duration</span><span class="pln">_humanize</span><span class="pln">_</span><span class="pln">_relativeTime</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="pun">!</span><span class="pln">withSuffix</span><span class="pun">,</span><span class=""> </span><span class="pln">locale</span><span class="pun">)</span><span class="pun">;</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pln">withSuffix</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="pln">output</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">locale</span><span class="pun">.</span><span class="pln">pastFuture</span><span class="pun">(</span><span class="pun">+</span><span class="kwd">this</span><span class="pun">,</span><span class=""> </span><span class="pln">output</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="pln">locale</span><span class="pun">.</span><span class="pln">postformat</span><span class="pun">(</span><span class="pln">output</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">iso</span><span class="pln">_string</span><span class="pln">_</span><span class="pln">_abs</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">Math</span><span class="pun">.</span><span class="pln">abs</span><span class="pun">;</span><span class="">

    </span><span class="kwd">function</span><span class=""> </span><span class="pln">iso</span><span class="pln">_string</span><span class="pln">_</span><span class="pln">_toISOString</span><span class="pun">(</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="com">// for ISO strings we do not use the normal bubbling rules:</span><span class="">
        </span><span class="com">//  * milliseconds bubble up until they become hours</span><span class="">
        </span><span class="com">//  * days do not bubble at all</span><span class="">
        </span><span class="com">//  * months bubble up until they become years</span><span class="">
        </span><span class="com">// This is because there is no context-free conversion between hours and days</span><span class="">
        </span><span class="com">// (think of clock changes)</span><span class="">
        </span><span class="com">// and also not between days and months (28-31 days per month)</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">seconds</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">iso</span><span class="pln">_string</span><span class="pln">_</span><span class="pln">_abs</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_milliseconds</span><span class="pun">)</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">1000</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">days</span><span class="">         </span><span class="pun">=</span><span class=""> </span><span class="pln">iso</span><span class="pln">_string</span><span class="pln">_</span><span class="pln">_abs</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_days</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">months</span><span class="">       </span><span class="pun">=</span><span class=""> </span><span class="pln">iso</span><span class="pln">_string</span><span class="pln">_</span><span class="pln">_abs</span><span class="pun">(</span><span class="kwd">this</span><span class="pun">.</span><span class="pln">_months</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">minutes</span><span class="pun">,</span><span class=""> </span><span class="pln">hours</span><span class="pun">,</span><span class=""> </span><span class="pln">years</span><span class="pun">;</span><span class="">

        </span><span class="com">// 3600 seconds -&gt; 60 minutes -&gt; 1 hour</span><span class="">
        </span><span class="pln">minutes</span><span class="">           </span><span class="pun">=</span><span class=""> </span><span class="pln">absFloor</span><span class="pun">(</span><span class="pln">seconds</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">60</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pln">hours</span><span class="">             </span><span class="pun">=</span><span class=""> </span><span class="pln">absFloor</span><span class="pun">(</span><span class="pln">minutes</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">60</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pln">seconds</span><span class=""> </span><span class="pun">%</span><span class="pun">=</span><span class=""> </span><span class="pln">60</span><span class="pun">;</span><span class="">
        </span><span class="pln">minutes</span><span class=""> </span><span class="pun">%</span><span class="pun">=</span><span class=""> </span><span class="pln">60</span><span class="pun">;</span><span class="">

        </span><span class="com">// 12 months -&gt; 1 year</span><span class="">
        </span><span class="pln">years</span><span class="">  </span><span class="pun">=</span><span class=""> </span><span class="pln">absFloor</span><span class="pun">(</span><span class="pln">months</span><span class=""> </span><span class="pun">/</span><span class=""> </span><span class="pln">12</span><span class="pun">)</span><span class="pun">;</span><span class="">
        </span><span class="pln">months</span><span class=""> </span><span class="pun">%</span><span class="pun">=</span><span class=""> </span><span class="pln">12</span><span class="pun">;</span><span class="">


        </span><span class="com">// inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">Y</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">years</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">M</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">months</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">D</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">days</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">h</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">hours</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">m</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">minutes</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">s</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">seconds</span><span class="pun">;</span><span class="">
        </span><span class="kwd">var</span><span class=""> </span><span class="pln">total</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">this</span><span class="pun">.</span><span class="pln">asSeconds</span><span class="pun">(</span><span class="pun">)</span><span class="pun">;</span><span class="">

        </span><span class="kwd">if</span><span class=""> </span><span class="pun">(</span><span class="pun">!</span><span class="pln">total</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
            </span><span class="com">// this is the same as C#&#39;s (Noda) and python (isodate)...</span><span class="">
            </span><span class="com">// but not other JS (goog.date)</span><span class="">
            </span><span class="kwd">return</span><span class=""> </span><span class="str">&#39;P0D&#39;</span><span class="pun">;</span><span class="">
        </span><span class="pun">}</span><span class="">

        </span><span class="kwd">return</span><span class=""> </span><span class="pun">(</span><span class="pln">total</span><span class=""> </span><span class="pun">&lt;</span><span class=""> </span><span class="pln">0</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="str">&#39;-&#39;</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class="">
            </span><span class="str">&#39;P&#39;</span><span class=""> </span><span class="pun">+</span><span class="">
            </span><span class="pun">(</span><span class="pln">Y</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">Y</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="str">&#39;Y&#39;</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class="">
            </span><span class="pun">(</span><span class="pln">M</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">M</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="str">&#39;M&#39;</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class="">
            </span><span class="pun">(</span><span class="pln">D</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">D</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="str">&#39;D&#39;</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class="">
            </span><span class="pun">(</span><span class="pun">(</span><span class="pln">h</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">m</span><span class=""> </span><span class="pun">||</span><span class=""> </span><span class="pln">s</span><span class="pun">)</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="str">&#39;T&#39;</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class="">
            </span><span class="pun">(</span><span class="pln">h</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">h</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="str">&#39;H&#39;</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class="">
            </span><span class="pun">(</span><span class="pln">m</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">m</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="str">&#39;M&#39;</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class=""> </span><span class="pun">+</span><span class="">
            </span><span class="pun">(</span><span class="pln">s</span><span class=""> </span><span class="pun">?</span><span class=""> </span><span class="pln">s</span><span class=""> </span><span class="pun">+</span><span class=""> </span><span class="str">&#39;S&#39;</span><span class=""> </span><span class="pun">:</span><span class=""> </span><span class="str">&#39;&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">Duration</span><span class="pun">.</span><span class="pln">prototype</span><span class="pun">;</span><span class="">

    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">abs</span><span class="">            </span><span class="pun">=</span><span class=""> </span><span class="pln">duration</span><span class="pln">_abs</span><span class="pln">_</span><span class="pln">_abs</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">add</span><span class="">            </span><span class="pun">=</span><span class=""> </span><span class="pln">duration</span><span class="pln">_add</span><span class="pln">_subtract</span><span class="pln">_</span><span class="pln">_add</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">subtract</span><span class="">       </span><span class="pun">=</span><span class=""> </span><span class="pln">duration</span><span class="pln">_add</span><span class="pln">_subtract</span><span class="pln">_</span><span class="pln">_subtract</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">as</span><span class="">             </span><span class="pun">=</span><span class=""> </span><span class="pln">as</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">asMilliseconds</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">asMilliseconds</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">asSeconds</span><span class="">      </span><span class="pun">=</span><span class=""> </span><span class="pln">asSeconds</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">asMinutes</span><span class="">      </span><span class="pun">=</span><span class=""> </span><span class="pln">asMinutes</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">asHours</span><span class="">        </span><span class="pun">=</span><span class=""> </span><span class="pln">asHours</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">asDays</span><span class="">         </span><span class="pun">=</span><span class=""> </span><span class="pln">asDays</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">asWeeks</span><span class="">        </span><span class="pun">=</span><span class=""> </span><span class="pln">asWeeks</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">asMonths</span><span class="">       </span><span class="pun">=</span><span class=""> </span><span class="pln">asMonths</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">asYears</span><span class="">        </span><span class="pun">=</span><span class=""> </span><span class="pln">asYears</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">valueOf</span><span class="">        </span><span class="pun">=</span><span class=""> </span><span class="pln">duration</span><span class="pln">_as</span><span class="pln">_</span><span class="pln">_valueOf</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">_bubble</span><span class="">        </span><span class="pun">=</span><span class=""> </span><span class="pln">bubble</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">get</span><span class="">            </span><span class="pun">=</span><span class=""> </span><span class="pln">duration</span><span class="pln">_get</span><span class="pln">_</span><span class="pln">_get</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">milliseconds</span><span class="">   </span><span class="pun">=</span><span class=""> </span><span class="pln">milliseconds</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">seconds</span><span class="">        </span><span class="pun">=</span><span class=""> </span><span class="pln">seconds</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">minutes</span><span class="">        </span><span class="pun">=</span><span class=""> </span><span class="pln">minutes</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">hours</span><span class="">          </span><span class="pun">=</span><span class=""> </span><span class="pln">hours</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">days</span><span class="">           </span><span class="pun">=</span><span class=""> </span><span class="pln">days</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">weeks</span><span class="">          </span><span class="pun">=</span><span class=""> </span><span class="pln">weeks</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">months</span><span class="">         </span><span class="pun">=</span><span class=""> </span><span class="pln">months</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">years</span><span class="">          </span><span class="pun">=</span><span class=""> </span><span class="pln">years</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">humanize</span><span class="">       </span><span class="pun">=</span><span class=""> </span><span class="pln">humanize</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">toISOString</span><span class="">    </span><span class="pun">=</span><span class=""> </span><span class="pln">iso</span><span class="pln">_string</span><span class="pln">_</span><span class="pln">_toISOString</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">toString</span><span class="">       </span><span class="pun">=</span><span class=""> </span><span class="pln">iso</span><span class="pln">_string</span><span class="pln">_</span><span class="pln">_toISOString</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">toJSON</span><span class="">         </span><span class="pun">=</span><span class=""> </span><span class="pln">iso</span><span class="pln">_string</span><span class="pln">_</span><span class="pln">_toISOString</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">locale</span><span class="">         </span><span class="pun">=</span><span class=""> </span><span class="pln">locale</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">localeData</span><span class="">     </span><span class="pun">=</span><span class=""> </span><span class="pln">localeData</span><span class="pun">;</span><span class="">

    </span><span class="com">// Deprecations</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">toIsoString</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">deprecate</span><span class="pun">(</span><span class="str">&#39;toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">iso</span><span class="pln">_string</span><span class="pln">_</span><span class="pln">_toISOString</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">duration</span><span class="pln">_prototype</span><span class="pln">_</span><span class="pln">_proto</span><span class="pun">.</span><span class="pln">lang</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">lang</span><span class="pun">;</span><span class="">

    </span><span class="com">// Side effect imports</span><span class="">

    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="str">&#39;X&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;unix&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addFormatToken</span><span class="pun">(</span><span class="str">&#39;x&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="pln">0</span><span class="pun">,</span><span class=""> </span><span class="str">&#39;valueOf&#39;</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// PARSING</span><span class="">

    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;x&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">matchSigned</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addRegexToken</span><span class="pun">(</span><span class="str">&#39;X&#39;</span><span class="pun">,</span><span class=""> </span><span class="pln">matchTimestamp</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addParseToken</span><span class="pun">(</span><span class="str">&#39;X&#39;</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">array</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_d</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">new</span><span class=""> </span><span class="pln">Date</span><span class="pun">(</span><span class="pln">parseFloat</span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">10</span><span class="pun">)</span><span class=""> </span><span class="pun">*</span><span class=""> </span><span class="pln">1000</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pln">addParseToken</span><span class="pun">(</span><span class="str">&#39;x&#39;</span><span class="pun">,</span><span class=""> </span><span class="kwd">function</span><span class=""> </span><span class="pun">(</span><span class="pln">input</span><span class="pun">,</span><span class=""> </span><span class="pln">array</span><span class="pun">,</span><span class=""> </span><span class="pln">config</span><span class="pun">)</span><span class=""> </span><span class="pun">{</span><span class="">
        </span><span class="pln">config</span><span class="pun">.</span><span class="pln">_d</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="kwd">new</span><span class=""> </span><span class="pln">Date</span><span class="pun">(</span><span class="pln">toInt</span><span class="pun">(</span><span class="pln">input</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span><span class="">
    </span><span class="pun">}</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="com">// Side effect imports</span><span class="">


    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">version</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="str">&#39;2.10.5&#39;</span><span class="pun">;</span><span class="">

    </span><span class="pln">setHookCallback</span><span class="pun">(</span><span class="pln">local</span><span class="pln">_</span><span class="pln">_createLocal</span><span class="pun">)</span><span class="pun">;</span><span class="">

    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">fn</span><span class="">                    </span><span class="pun">=</span><span class=""> </span><span class="pln">momentPrototype</span><span class="pun">;</span><span class="">
    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">min</span><span class="">                   </span><span class="pun">=</span><span class=""> </span><span class="pln">min</span><span class="pun">;</span><span class="">
    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">max</span><span class="">                   </span><span class="pun">=</span><span class=""> </span><span class="pln">max</span><span class="pun">;</span><span class="">
    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">utc</span><span class="">                   </span><span class="pun">=</span><span class=""> </span><span class="pln">create</span><span class="pln">_utc</span><span class="pln">_</span><span class="pln">_createUTC</span><span class="pun">;</span><span class="">
    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">unix</span><span class="">                  </span><span class="pun">=</span><span class=""> </span><span class="pln">moment</span><span class="pln">_</span><span class="pln">_createUnix</span><span class="pun">;</span><span class="">
    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">months</span><span class="">                </span><span class="pun">=</span><span class=""> </span><span class="pln">lists</span><span class="pln">_</span><span class="pln">_listMonths</span><span class="pun">;</span><span class="">
    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">isDate</span><span class="">                </span><span class="pun">=</span><span class=""> </span><span class="pln">isDate</span><span class="pun">;</span><span class="">
    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">locale</span><span class="">                </span><span class="pun">=</span><span class=""> </span><span class="pln">locale</span><span class="pln">_locales</span><span class="pln">_</span><span class="pln">_getSetGlobalLocale</span><span class="pun">;</span><span class="">
    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">invalid</span><span class="">               </span><span class="pun">=</span><span class=""> </span><span class="pln">valid</span><span class="pln">_</span><span class="pln">_createInvalid</span><span class="pun">;</span><span class="">
    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">duration</span><span class="">              </span><span class="pun">=</span><span class=""> </span><span class="pln">create</span><span class="pln">_</span><span class="pln">_createDuration</span><span class="pun">;</span><span class="">
    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">isMoment</span><span class="">              </span><span class="pun">=</span><span class=""> </span><span class="pln">isMoment</span><span class="pun">;</span><span class="">
    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">weekdays</span><span class="">              </span><span class="pun">=</span><span class=""> </span><span class="pln">lists</span><span class="pln">_</span><span class="pln">_listWeekdays</span><span class="pun">;</span><span class="">
    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">parseZone</span><span class="">             </span><span class="pun">=</span><span class=""> </span><span class="pln">moment</span><span class="pln">_</span><span class="pln">_createInZone</span><span class="pun">;</span><span class="">
    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">localeData</span><span class="">            </span><span class="pun">=</span><span class=""> </span><span class="pln">locale</span><span class="pln">_locales</span><span class="pln">_</span><span class="pln">_getLocale</span><span class="pun">;</span><span class="">
    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">isDuration</span><span class="">            </span><span class="pun">=</span><span class=""> </span><span class="pln">isDuration</span><span class="pun">;</span><span class="">
    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">monthsShort</span><span class="">           </span><span class="pun">=</span><span class=""> </span><span class="pln">lists</span><span class="pln">_</span><span class="pln">_listMonthsShort</span><span class="pun">;</span><span class="">
    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">weekdaysMin</span><span class="">           </span><span class="pun">=</span><span class=""> </span><span class="pln">lists</span><span class="pln">_</span><span class="pln">_listWeekdaysMin</span><span class="pun">;</span><span class="">
    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">defineLocale</span><span class="">          </span><span class="pun">=</span><span class=""> </span><span class="pln">defineLocale</span><span class="pun">;</span><span class="">
    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">weekdaysShort</span><span class="">         </span><span class="pun">=</span><span class=""> </span><span class="pln">lists</span><span class="pln">_</span><span class="pln">_listWeekdaysShort</span><span class="pun">;</span><span class="">
    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">normalizeUnits</span><span class="">        </span><span class="pun">=</span><span class=""> </span><span class="pln">normalizeUnits</span><span class="pun">;</span><span class="">
    </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">.</span><span class="pln">relativeTimeThreshold</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">duration</span><span class="pln">_humanize</span><span class="pln">_</span><span class="pln">_getSetRelativeTimeThreshold</span><span class="pun">;</span><span class="">

    </span><span class="kwd">var</span><span class=""> </span><span class="pln">_moment</span><span class=""> </span><span class="pun">=</span><span class=""> </span><span class="pln">utils</span><span class="pln">_hooks</span><span class="pln">_</span><span class="pln">_hooks</span><span class="pun">;</span><span class="">

    </span><span class="kwd">return</span><span class=""> </span><span class="pln">_moment</span><span class="pun">;</span><span class="">

</span><span class="pun">}</span><span class="pun">)</span><span class="pun">)</span><span class="pun">;</span>
