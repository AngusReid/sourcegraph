{{define "Head"}}<title>Sign up - Sourcegraph</title>
<meta name="robots" content="noindex">
{{end}}

{{define "Body"}}
<div class="row">
	<div class="col-md-5">
		{{if .FirstUser}}
		<h1>Set up Sourcegraph</h1>
		<p>Set up your new Sourcegraph server by first creating an admin account.</p>
		{{else if .SignupForm.Token}}
		<h1>Join this Sourcegraph server</h1>
		<p>To accept your invitation and create an account on this server, choose a login and password.</p>
		{{else}}
		<h1>Create a personal account</h1>
		{{end}}

		<form method="post" action="{{urlToWithReturnTo "sign-up" .ReturnTo}}" class="sign-up">
			<p class="help-block">{{.SignupForm.FormError}}</p>
			<div class="form-group {{.SignupForm.FieldClass "Login"}}">
				<label for="login">Username</label>
				<input name="Login" type="text" class="form-control" id="login" value="{{.SignupForm.Login}}" required pattern="[\w-]+" tabindex=1 autofocus>
				<p class="help-block">
					{{with .SignupForm.FieldError "Login"}}
						{{.}}
					{{end}}
				</p>
			</div>
			<div class="form-group {{.SignupForm.FieldClass "Password"}}">
				<label for="password">Password</label>
				<input name="Password" type="password" class="form-control" id="password" value="{{.SignupForm.Password}}" required tabindex=2>
				<p class="help-block">{{.SignupForm.FieldError "Password"}}</p>
			</div>
			<div class="form-group {{.SignupForm.FieldClass "Email"}}">
				<label for="email">Email address</label>
				<input name="Email" type="email" class="form-control" id="email" value="{{.SignupForm.Email}}" required {{if .SignupForm.Token}}readonly {{end}}tabindex=3>
				<p class="help-block">
					{{with .SignupForm.FieldError "Email"}}
						{{.}}
					{{end}}
				</p>
			</div>

			{{$btnLabel := printf "Create %s account" (ifString .FirstUser "admin")}}
			<p class="help-block">
				{{if .IsRoot}}
					By clicking on "{{$btnLabel}}" below, you agree to our <a href="https://sourcegraph.com/privacy">privacy policy</a> and <a href="https://sourcegraph.com/terms">terms</a>.
				{{end}}
				{{if .FirstUser}}{{template "dataCollectionMessage"}}{{end}}
			</p>
			<button type="submit" class="btn btn-primary btn-lg" tabindex=4>{{$btnLabel}}</button>
			<input type="hidden" name="csrf_token" value="{{.CSRFToken}}">
			{{with .SignupForm.Token}}<input type="hidden" name="Token" value="{{.}}">{{end}}
		</form>
	</div>
</div>
{{end}}
