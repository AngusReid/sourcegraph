{{define "Head"}}<title>Sourcegraph</title>
{{end}}

{{define "Body"}}
<br/>
{{if eq .AppURL.String "http://src.sourcegraph.com"}}
<div class="row">
	<div class="col-md-12">
		<h5>New to Sourcegraph? <a href="https://src.sourcegraph.com/sourcegraph/.docs/getting-started/">Getting started</a> is easy!</h5>
	</div>
</div>
<br>
{{end}}
<div class="row dashboard">
	<div class="col-md-{{if .Users}}6{{else}}12{{end}}">
		<h3>Repositories
			{{if .Repos}}
				<button class="btn btn-default" data-toggle="collapse" data-target="#addRepo"><i class="fa fa-plus"></i></button>
			{{end}}
		</h3>
		<div {{if .Repos}}class="collapse"{{end}} id="addRepo">
			<div class="well">
				<form action={{router.URLToRepoCreate}} method="post">
				  <strong>Create a repository:</strong> <input type="text" name="repo-name"> &nbsp;&nbsp;&nbsp;<input class="btn btn-sgblue" type="submit" value="Create">
				<input type="hidden" name="csrf_token" value="{{.CSRFToken}}">
				</form>
				<br>
			{{if (and $.CurrentUser (not appconf.DisableIntegrations))}}
				<p>
					Or <a href="{{urlTo "person.settings.integrations" "User" $.CurrentUser.Login}}">import private repositories from GitHub</a>.
				</p>
			{{end}}
			</div>
		</div>
		<div class="list-group repos">
			{{range .Repos}}
				<a class="list-group-item" href="{{urlToRepo .URI}}">
					<h4>{{template "RepoIcon" .}} {{template "RepoLabel" (repoLabelForOwner "" .URI)}}</h4>
					{{with .Description}}<p class="description">{{.}}</p>{{end}}
					{{with .PushedAt}}<p class="updated">Updated {{template "TimeAgo" .}}</p>{{end}}
				</a>
			{{end}}
		</div>
	</div>
	{{if .Users}}
	<div class="col-md-6">
		<h3>Users <button class="btn btn-default" data-toggle="collapse" data-target="#addUser"><i class="fa fa-plus"></i></button></h3>
		<div class="collapse" id="addUser">
			<div class="well">
				{{if .IsLDAP}}
				Your teammates can log in with their LDAP credentials. {{if not .DisableExternalLinks}}<a href="https://src.sourcegraph.com/sourcegraph/.docs/config/authentication/" target="_blank">Click here</a> for instructions to configure Sourcegraph for LDAP.{{end}}
				{{else}}
				<strong>Create invite links</strong> for your teammates:
				<ul id="user-invites-list" class="list-group">
				</ul>
				<form action="javascript:void(0);" class="form-inline">
					<input name="Email" type="text" class="input-xlarge form-control" id="user-invite-email" placeholder="user@example.com" value="" required tabindex=1 autofocus>
					<select name="Permission" class="input-small form-control"class="form-control" id="user-invite-perms" tabindex=2>
						<option value="read" selected>can read</option>
						<option value="write">can write</option>
						<option value="admin">is admin</option>
					</select>
					<button type="submit" id="user-invite-btn" class="btn btn-md btn-sgblue" name="Invite" value="Invite" tabindex=3>Invite</button>
					<input type="hidden" name="csrf_token" value="{{.CSRFToken}}">
				</form>
				{{end}}
			</div>
		</div>
		<div class="list-group">
			{{range .Users}}
				<li class="list-group-item">
					<strong>{{.Identifier}}</strong>{{if .Invite}}<div class="btn-xs btn-red pull-right">Pending Invite</div>{{end}}{{if .Admin}}<div class="btn-xs btn-green pull-right">Admin</div>{{else if .Write}}<div class="btn-xs btn-sgblue pull-right">Write</div>{{end}}
				</li>
			{{end}}
		</div>
	</div>
	{{end}}
</div>
{{end}}
