# Tmuxinator project config file that makes it easy to open/start all
# of the required services.
#
# To use, first run `gem install tmuxinator`. Then symlink this file
# into ~/.tmuxinator/sourcegraph.yml then run `tmuxinator new
# sourcegraph`.
#
# See https://github.com/tmuxinator/tmuxinator for information about
# tmuxinator.
#
# TODOs:
# * Use Docker to run vcsstore if on Linux
# * Add to Makefile

name: sourcegraph
root: ~/src/src.sourcegraph.com/sourcegraph

pre: sudo launchctl limit maxfiles 16384 && ulimit -n 16384

windows:
  - server: eval `conf/read` && make serve-dev
  - webpack: cd app && npm start
  - vcsstore: cd `go list -f '{{.Dir}}' sourcegraph.com/sourcegraph/vcsstore` && godep go install ./cmd/vcsstore && vcsstore serve
  - worker: echo "run 'make sgx && sgx work' when you need to run the worker"
